<!DOCTYPE html>
<html lang="ru" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>help:locations</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="help,locations"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Документация QSP"/>
<link rel="start" href="/"/>
<link rel="alternate" type="application/rss+xml" title="Недавние изменения" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Текущее пространство имён" href="/feed.php?mode=list&amp;ns=help"/>
<link rel="alternate" type="text/html" title="Простой HTML" href="/_export/xhtml/help/locations"/>
<link rel="canonical" href="http://wiki.qsp.su/help/locations"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=exportdokuwiki&amp;tseed=f78b359cebbc2738e83150069e877c7f"/>
<link rel="stylesheet" type="text/css" href="/lib/plugins/syntaxhighlighter3/sxh3/styles/shCore.css"/>
<link rel="stylesheet" type="text/css" href="/lib/plugins/syntaxhighlighter3/sxh3/styles/shThemeDefault.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='help';var JSINFO = {"id":"help:locations","namespace":"help"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?tseed=f78b359cebbc2738e83150069e877c7f&amp;template=exportdokuwiki"></script>
<script type="text/javascript" src="/lib/plugins/syntaxhighlighter3/sxh3/scripts/shCore.js"></script>
<script type="text/javascript" src="/lib/plugins/syntaxhighlighter3/sxh3/scripts/shAutoloader.js"></script>
<script type="text/javascript" src="/lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushXml.js"></script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Содержание</h3>
<div>

<ul class="toc">
<li class="level2"><div class="li"><a href="#lokacii_i_perexody">Локации и переходы</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#imenovanie_lokacij">Именование локаций</a></div></li>
<li class="level3"><div class="li"><a href="#perexody">Переходы</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<p>
<a href="/help/qsp" class="wikilink1" title="help:qsp">Назад: Что такое QSP?</a>
</p>

<h2 class="sectionedit1" id="lokacii_i_perexody">Локации и переходы</h2>
<div class="level2">

<p>
<strong>Локация</strong> - элементарная единица игрового мира. Это может быть пещера, дом, комната, улица и т.п.<br/>

С точки зрения игрока он исследует игровой мир перемещаясь по локациям, но с точки зрения создателя игры понятие локации гораздо шире.
</p>

<p>
Применения для локаций:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Игровые локации</strong> - локации, по которым ходит игрок, основа игрового мира.</div>
</li>
<li class="level1"><div class="li"> <strong>Служебные локации</strong> - локации, на которые не попадает игрок:</div>
<ul>
<li class="level2"><div class="li"> <strong>Локации-обработчики</strong> - локации, обрабатывающие определенные события в игре (переходы между локациями, таймер, выбор предмета и т.п.).</div>
</li>
<li class="level2"><div class="li"> <strong>Локации-данные</strong> - иногда удобно хранить игровые тексты в отдельных переменных, а переменные - в отдельной локации, чтобы не захламлять код.</div>
</li>
<li class="level2"><div class="li"> <strong>Локации-функции</strong> - в QSP есть возможность сделать локацию-функцию.</div>
</li>
<li class="level2"><div class="li"> <strong>Локации с кодом</strong> - иногда удобно вынести часть кода в отдельную локацию. Чаще всего это код, который используется в нескольких локациях.</div>
</li>
</ul>
</li>
</ul>

<p>
Локация состоит из:
</p>
<ul>
<li class="level1"><div class="li"> Базовое описание локации</div>
</li>
<li class="level1"><div class="li"> Базовые действия</div>
</li>
<li class="level1"><div class="li"> Код &quot;Выполнить при посещении&quot;</div>
</li>
</ul>

</div>
<!-- EDIT1 SECTION "Локации и переходы" [50-1896] -->
<h3 class="sectionedit2" id="imenovanie_lokacij">Именование локаций</h3>
<div class="level3">

<p>
Имя локации в процессе игры не отображается и может быть любым. Но есть общие рекомендации:
</p>
<ul>
<li class="level1"><div class="li"> Имя локации должно соответствовать её смыслу - если локация описывает дом, то это может быть &quot;Дом&quot;, &quot;House&quot;, но никак не &quot;Пещера&quot;.</div>
</li>
<li class="level1"><div class="li"> Можно пользоваться префиксами в названии:</div>
<ul>
<li class="level2"><div class="li"> <em class="u"><em>!название</em></em> или <em class="u"><em>$название</em></em> - служебная локация (не с базой данных)</div>
</li>
<li class="level2"><div class="li"> <em class="u"><em>#название</em></em> - локация с базой данных</div>
</li>
<li class="level2"><div class="li"> <em class="u"><em>^название</em></em> - локация, вложенная в предыдущую. Например, названия локаций через запятую: <em>Северная площадь</em>, <em>^Магазин игрушек</em>, <em>^^Продавец игрушек</em>, <em>^Магазин оружия</em>, <em>^^Мечи</em>, <em>^^Булавы</em>, <em>^^Оружейник</em></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Названия локаций из нескольких слов можно писать любым удобным способом, например:</div>
<ul>
<li class="level2"><div class="li"> <em>Дом с трубой</em></div>
</li>
<li class="level2"><div class="li"> <em>Дом_с_трубой</em></div>
</li>
<li class="level2"><div class="li"> <em>ДомСТрубой</em></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Регистр букв не важен: <em>&quot;Домструбой&quot;</em> и <em>&quot;ДомСТрубой&quot;</em> - одна и та же локация.</div>
</li>
</ul>

</div>
<!-- EDIT2 SECTION "Именование локаций" [1897-3406] -->
<h3 class="sectionedit3" id="perexody">Переходы</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <strong>GOTO</strong> <em>[$локация]</em><strong>,</strong><em>[параметр 1]</em><strong>,</strong><em>[параметр 2]</em><strong>, …</strong> или</div>
</li>
<li class="level1"><div class="li"> <strong>GT</strong> <em>[$локация]</em><strong>,</strong><em>[параметр 1]</em><strong>,</strong><em>[параметр 2]</em><strong>, …</strong> - переход на локацию с названием <em>[$локация]</em>.</div>
<ul>
<li class="level2"><div class="li"> Основное описание локации и список действий <em class="u"><em>заменяются</em></em> описанием и действиями новой локации.</div>
</li>
<li class="level2"><div class="li"> Переданные параметры хранятся в массиве ARGS. Максимальное количество параметров - <strong>9</strong><sup><a href="#fn__1" id="fnt__1" class="fn_top">1)</a></sup>.</div>
</li>
<li class="level2"><div class="li"> <em>Примеры:</em> <pre class="brush: qsp">
GT &#039;локация&#039;  &amp;! переход на локацию &quot;локация&quot;. Массив ARGS пуст.
GT &#039;локация&#039;,1,&#039;данные&#039; &amp;! переход с передачей 2-х параметров.
!ARGS[0] равен 1, $ARGS[1] содержит строку &quot;данные&quot;.
</pre></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> <strong>XGOTO</strong> <em>[$локация]</em><strong>,</strong><em>[параметр 1]</em><strong>,</strong><em>[параметр 2]</em><strong>, …</strong> или </div>
</li>
<li class="level1"><div class="li"> <strong>XGT</strong> <em>[$локация]</em><strong>,</strong><em>[параметр 1]</em><strong>,</strong><em>[параметр 2]</em><strong>, …</strong> - переход на локацию с названием <em>[$локация]</em>.</div>
<ul>
<li class="level2"><div class="li"> <em class="u"><em>Не</em></em> очищается поле основного описания локации.</div>
</li>
<li class="level2"><div class="li"> Базовое описание новой локации <em class="u"><em>добавляется</em></em> к текущему основному описанию. </div>
</li>
<li class="level2"><div class="li"> В остальном аналогично <strong>GT</strong>/<strong>GOTO</strong>:</div>
<ul>
<li class="level3"><div class="li"> Список действия заменяется действиями новой локации</div>
</li>
<li class="level3"><div class="li"> Переданные параметры хранятся в массиве ARGS. Максимальное количество параметров - <strong>9</strong><sup><a href="#fn__2" id="fnt__2" class="fn_top">2)</a></sup>.</div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Смотри также:</div>
<ul>
<li class="level2"><div class="li"> <a href="/help/gosub" class="wikilink1" title="help:gosub">GS, GOSUB</a></div>
</li>
<li class="level2"><div class="li"> <a href="/help/func" class="wikilink1" title="help:func">FUNC</a></div>
</li>
</ul>
</li>
</ul>
<hr />

<p>
<a href="/help/variables" class="wikilink1" title="help:variables">Вперёд: переменные</a>
</p>

</div>
<!-- EDIT3 SECTION "Переходы" [3407-] --><div class="footnotes">
<div class="fn"><sup><a href="#fnt__1" id="fn__1" class="fn_bot">1)</a></sup> 
, <sup><a href="#fnt__2" id="fn__2" class="fn_bot">2)</a></sup> 
10 включая имя локации</div>
</div>
</div>
</body>
</html>
