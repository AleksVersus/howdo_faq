<!DOCTYPE html>
<html lang="ru" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>help:menu</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="help,menu"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Документация QSP"/>
<link rel="start" href="/"/>
<link rel="alternate" type="application/rss+xml" title="Недавние изменения" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Текущее пространство имён" href="/feed.php?mode=list&amp;ns=help"/>
<link rel="alternate" type="text/html" title="Простой HTML" href="/_export/xhtml/help/menu"/>
<link rel="canonical" href="http://wiki.qsp.su/help/menu"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=exportdokuwiki&amp;tseed=f78b359cebbc2738e83150069e877c7f"/>
<link rel="stylesheet" type="text/css" href="/lib/plugins/syntaxhighlighter3/sxh3/styles/shCore.css"/>
<link rel="stylesheet" type="text/css" href="/lib/plugins/syntaxhighlighter3/sxh3/styles/shThemeDefault.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='help';var JSINFO = {"id":"help:menu","namespace":"help"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?tseed=f78b359cebbc2738e83150069e877c7f&amp;template=exportdokuwiki"></script>
<script type="text/javascript" src="/lib/plugins/syntaxhighlighter3/sxh3/scripts/shCore.js"></script>
<script type="text/javascript" src="/lib/plugins/syntaxhighlighter3/sxh3/scripts/shAutoloader.js"></script>
<script type="text/javascript" src="/lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushXml.js"></script>
</head>
<body>
<div class="dokuwiki export">

<p>
<a href="/help/objs" class="wikilink1" title="help:objs">Назад: Предметы (инвентарь)</a>
</p>

<h2 class="sectionedit1" id="menju">Меню</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <strong>MENU</strong> <em>[$имя]</em> - вызов &quot;всплывающего&quot; меню из массива с именем <em>[$имя]</em></div>
</li>
</ul>

<p>
Меню - набор строковых значений массива, формат записи которых:<br/>

<em>$название</em><strong>:</strong><em>название локации</em><strong>:</strong><em>путь к файлу иконки</em>
</p>

<p>
Поиск символов &quot;:&quot; начинается с конца строки, то есть название пункта меню может содержать двоеточия.
</p>

<p>
Если путь к файлу иконки не указан или указанный файл недоступен, то пункт меню отобразится без иконки.
</p>

<p>
Пример создания меню:<pre class="brush: qsp">
$stone[0]=&#039;Взять камень:takestone&#039;
$stone[1]=&#039;Кинуть камень:throwstone&#039;
$stone[2]=&#039;Осмотреть камень:&#039; + $see_stone
</pre>
</p>

<p>
Здесь название массива (&quot;stone&quot;) - это название меню, а текстовые значения массива - действия, для которых указаны названия и названия локаций-обработчиков выбора пунктов меню. При выборе пункта &quot;Взять камень&quot; произойдёт обработка локации с названием &quot;takestone&quot;. Аналогично будет происходить с другими пунктами.
</p>

<p>
В локацию-обработчик выбора пункта меню передаётся аргумент (ARGS[0]) - позиция выбранного пункта. Позиции элементов меню нумеруются с 1.
</p>

<p>
Вызов меню производится с помощью оператора &quot;MENU&quot; из любого места кода игры. Пример: <pre class="brush: qsp">
menu &#039;stone&#039;
!или
menu &#039;$stone&#039;

!ссылка с вызовом меню
&#039;&lt;a href=&quot;EXEC: menu &#039;&#039;$stone&#039;&#039;&quot;&gt;Камень&lt;/a&gt;&#039;
</pre>
Этот оператор покажет меню с названием &quot;stone&quot;.
</p>

<p>
Пример создания меню с иконками:<pre class="brush: qsp">
! нет иконки
$usr_menu[0] = &#039;Взять предмет:take_item&#039;
! иконка задана gif-файлом
$usr_menu[1] = &#039;Положить предмет:put_item:images/put_item.gif&#039;
! иконка задана значением $icon_file
$usr_menu[2] = &#039;Осмотреть предмет:look_item:&lt;&lt;$icon_file&gt;&gt;&#039;
! пункт меню задан 3-мя переменными
$usr_menu[3] = &#039;&lt;&lt;$name&gt;&gt;:&lt;&lt;$loc&gt;&gt;:&lt;&lt;$file&gt;&gt;&#039;

menu &#039;usr_menu&#039; &amp;! покажет меню из 4-х пунктов
</pre>
</p>

<p>
PS:
</p>

<p>
1) Меню заканчивается на элементе массива со значением &#039;&#039; (пустая строка). Т.е. если массив меню состоит из элементов &#039;Взять&#039;,&#039;Осмотреть&#039;,&#039;&#039;,&#039;Бросить&#039;, то 2 последних пункта меню не будут созданы.
</p>

<p>
2) Чтобы вставить разделитель в меню, вместо соответствующего элемента массива напишите &quot;-:-&quot;. Т.е. если нужно поставить разделитель вместо 2-го элемента меню &quot;stone&quot;:
</p>

<p>
$stone[1]=&#039;-:-&#039;
</p>
<hr />

<p>
<a href="/help/sound" class="wikilink1" title="help:sound">Вперёд: Звук</a>
</p>

</div>
<!-- EDIT1 SECTION "Меню" [65-] --></div>
</body>
</html>
