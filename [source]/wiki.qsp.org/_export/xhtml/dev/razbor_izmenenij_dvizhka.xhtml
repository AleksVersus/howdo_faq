<!DOCTYPE html>
<html lang="ru" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>dev:razbor_izmenenij_dvizhka</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="dev,razbor_izmenenij_dvizhka"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Документация QSP"/>
<link rel="start" href="/"/>
<link rel="alternate" type="application/rss+xml" title="Недавние изменения" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Текущее пространство имён" href="/feed.php?mode=list&amp;ns=dev"/>
<link rel="alternate" type="text/html" title="Простой HTML" href="/_export/xhtml/dev/razbor_izmenenij_dvizhka"/>
<link rel="canonical" href="http://wiki.qsp.su/dev/razbor_izmenenij_dvizhka"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=exportdokuwiki&amp;tseed=f78b359cebbc2738e83150069e877c7f"/>
<link rel="stylesheet" type="text/css" href="/lib/plugins/syntaxhighlighter3/sxh3/styles/shCore.css"/>
<link rel="stylesheet" type="text/css" href="/lib/plugins/syntaxhighlighter3/sxh3/styles/shThemeDefault.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='dev';var JSINFO = {"id":"dev:razbor_izmenenij_dvizhka","namespace":"dev"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?tseed=f78b359cebbc2738e83150069e877c7f&amp;template=exportdokuwiki"></script>
<script type="text/javascript" src="/lib/plugins/syntaxhighlighter3/sxh3/scripts/shCore.js"></script>
<script type="text/javascript" src="/lib/plugins/syntaxhighlighter3/sxh3/scripts/shAutoloader.js"></script>
<script type="text/javascript" src="/lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushXml.js"></script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Содержание</h3>
<div>

<ul class="toc">
<li class="level2"><div class="li"><a href="#razbor_izmenenij_dvizhka">Разбор изменений движка</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#versii_pleerov">Версии плееров</a></div></li>
<li class="level3"><div class="li"><a href="#razobrannye_izmenenija">Разобранные изменения</a></div></li>
<li class="level3"><div class="li"><a href="#razobrat">Разобрать:</a></div></li>
<li class="level3"><div class="li"><a href="#local_variables">Local variables</a></div></li>
<li class="level3"><div class="li"><a href="#nemnogo_dopolnitelnoj_informacii">Немного дополнительной информации</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h2 class="sectionedit1" id="razbor_izmenenij_dvizhka">Разбор изменений движка</h2>
<div class="level2">

<p>
Позднее эта статья будет преобразована в changelog и встроена в справку, чтобы авторам проще было переделывать игры под новейшие версии.
</p>

</div>
<!-- EDIT1 SECTION "Разбор изменений движка" [1-300] -->
<h3 class="sectionedit2" id="versii_pleerov">Версии плееров</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> 409 - смена версии на <strong>5.6.4</strong></div>
</li>
<li class="level1"><div class="li"> 447 - смена версии на <strong>5.6.5</strong></div>
</li>
<li class="level1"><div class="li"> 529 - сборка версии <strong>5.7.0</strong> (текущая версия классического плеера от 06.06.2010)</div>
</li>
</ul>

</div>
<!-- EDIT2 SECTION "Версии плееров" [301-568] -->
<h3 class="sectionedit3" id="razobrannye_izmenenija">Разобранные изменения</h3>
<div class="level3">

<p>
Изменения, которые уже отражены в тексте справки, или это не требуется, выделены <em>курсивом</em>.
Изменения, которые, возможно, стоит отразить в справке, выделены <strong>жирным</strong>.
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://trac.assembla.com/qsp/changeset/430" class="urlextern" title="http://trac.assembla.com/qsp/changeset/430"  rel="nofollow">430</a> - <em>путь картинки передаётся в ONOBJADD</em></div>
</li>
<li class="level1"><div class="li"> 432 - <strong>игнорирование отрицательных индексов. Раньше приводились к 0.</strong></div>
</li>
<li class="level1"><div class="li"> <a href="http://trac.assembla.com/qsp/changeset/433" class="urlextern" title="http://trac.assembla.com/qsp/changeset/433"  rel="nofollow">433</a> - <strong>в ARRPOS и ARRCOMP минимальный индекс ограничен сверху размером массива (приводится к нему)</strong></div>
</li>
<li class="level1"><div class="li"> 444 - <em>индекс в ADDOBJ (индексация с единицы)</em></div>
</li>
<li class="level1"><div class="li"> 461-463 - <em>ELSEIF</em></div>
</li>
<li class="level1"><div class="li"> 478 - <em>необязательные параметры в COPYARR - начальный индекс и количество</em></div>
</li>
<li class="level1"><div class="li"> <a href="http://trac.assembla.com/qsp/changeset/490" class="urlextern" title="http://trac.assembla.com/qsp/changeset/490"  rel="nofollow">490</a> - <em>Небольшое изменение функции DYNEVAL: теперь она выполняет код, возвращая значение, указанное в переменной RESULT/$RESULT.</em></div>
</li>
<li class="level1"><div class="li"> 491 - <em>фигурные скобки как новый вид кавычек, допускающий вложенность</em></div>
</li>
<li class="level1"><div class="li"> 492 - <em>можно использовать числовые и текстовые индексы одновременно</em></div>
</li>
<li class="level1"><div class="li"> <a href="http://trac.assembla.com/qsp/changeset/495" class="urlextern" title="http://trac.assembla.com/qsp/changeset/495"  rel="nofollow">495</a> - <em>частичная прекомпиляция</em></div>
</li>
<li class="level1"><div class="li"> 497 - <strong>передача аргументов от GT/XGT в обработчик $ONNEWLOC.</strong></div>
</li>
<li class="level1"><div class="li"> 498 - <em>теперь подвыражения не срабатывают в {} (багфикс)</em></div>
</li>
<li class="level1"><div class="li"> 527 - <em>оператор &quot;LOC&quot;</em></div>
</li>
<li class="level1"><div class="li"> 552 - <em>ADDQST → ADDLIB, KILLQST → DELLIB</em></div>
</li>
<li class="level1"><div class="li"> 554 - <em>теперь в сохранении хранится название локации вместо индекса</em></div>
</li>
<li class="level1"><div class="li"> 559 - <strong>ELSE IF теперь воспринимается как ELSIF (не нужна куча END)</strong></div>
</li>
<li class="level1"><div class="li"> 560 - <strong>ELSE: IF не воспринимается как ELSEIF.</strong> </div>
</li>
<li class="level1"><div class="li"> 579 - <em>Сохраняется пробел при разбиении строки с помощью &quot; _&quot;</em></div>
</li>
<li class="level1"><div class="li"> 596 - <em>ADDLIB → INCLIB, DELLIB → FREELIB</em></div>
</li>
<li class="level1"><div class="li"> 618,619 - <em>Необязательные аргументы INSTR, ARRPOS, ARRCOMP переставлены в конец.</em></div>
</li>
<li class="level1"><div class="li"> 640 - <strong>DYNAMIC/DYNEVAL - теперь блок кода вместо верхнего уровня кода</strong></div>
</li>
<li class="level1"><div class="li"> 641 - <em>Save RESULT value for GS/DYNAMIC too - багфикс <a href="http://qsp.su/index.php?option=com_agora&amp;task=topic&amp;id=636&amp;Itemid=57#p14363" class="urlextern" title="http://qsp.su/index.php?option=com_agora&amp;task=topic&amp;id=636&amp;Itemid=57#p14363"  rel="nofollow">бага</a></em></div>
</li>
<li class="level1"><div class="li"> 651 - <em>Повышен приоритет операции &amp; (конкатенации), теперь она важнее сравнения.</em></div>
</li>
<li class="level1"><div class="li"> 669 - <em>RAND - второй параметр теперь по умолчанию 1 вместо 0</em></div>
</li>
<li class="level1"><div class="li"> 687 - <em>Переход на VS2012</em></div>
</li>
</ul>

</div>
<!-- EDIT3 SECTION "Разобранные изменения" [569-3713] -->
<h3 class="sectionedit4" id="razobrat">Разобрать:</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="http://trac.assembla.com/qsp/changeset/541" class="urlextern" title="http://trac.assembla.com/qsp/changeset/541"  rel="nofollow">541</a>,<a href="http://trac.assembla.com/qsp/changeset/542" class="urlextern" title="http://trac.assembla.com/qsp/changeset/542"  rel="nofollow">542</a> - <strong>&quot;Tuples&quot;</strong></div>
</li>
<li class="level1"><div class="li"> <a href="http://trac.assembla.com/qsp/changeset/545" class="urlextern" title="http://trac.assembla.com/qsp/changeset/545"  rel="nofollow">545</a>,<a href="http://trac.assembla.com/qsp/changeset/546" class="urlextern" title="http://trac.assembla.com/qsp/changeset/546"  rel="nofollow">546</a> - <strong>FOR</strong> (а ещё TO и STEP)</div>
</li>
<li class="level1"><div class="li"> <a href="https://trac.assembla.com/qsp/changeset/677" class="urlextern" title="https://trac.assembla.com/qsp/changeset/677"  rel="nofollow">667</a> - <strong>Cache compiled regular expressions</strong></div>
</li>
<li class="level1"><div class="li"> <a href="https://trac.assembla.com/qsp/changeset/692" class="urlextern" title="https://trac.assembla.com/qsp/changeset/692"  rel="nofollow">692</a> - Add lists parsing support for the assignment</div>
</li>
</ul>

</div>
<!-- EDIT4 SECTION "Разобрать:" [3714-4202] -->
<h3 class="sectionedit5" id="local_variables">Local variables</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="http://trac.assembla.com/qsp/changeset/555" class="urlextern" title="http://trac.assembla.com/qsp/changeset/555"  rel="nofollow">555</a> - <strong>LOCAL</strong></div>
</li>
<li class="level1"><div class="li"> <a href="https://trac.assembla.com/qsp/changeset/625" class="urlextern" title="https://trac.assembla.com/qsp/changeset/625"  rel="nofollow">625</a> - initial local vars implementation</div>
</li>
<li class="level1"><div class="li"> <a href="https://trac.assembla.com/qsp/changeset/644" class="urlextern" title="https://trac.assembla.com/qsp/changeset/644"  rel="nofollow">644</a> - Fix saving of the game status (hide local variables)</div>
</li>
<li class="level1"><div class="li"> <a href="https://trac.assembla.com/qsp/changeset/645" class="urlextern" title="https://trac.assembla.com/qsp/changeset/645"  rel="nofollow">645</a> - Complete local variables</div>
</li>
<li class="level1"><div class="li"> <a href="https://trac.assembla.com/qsp/changeset/646" class="urlextern" title="https://trac.assembla.com/qsp/changeset/646"  rel="nofollow">646</a> - Fix local vars </div>
</li>
<li class="level1"><div class="li"> <a href="https://trac.assembla.com/qsp/changeset/652" class="urlextern" title="https://trac.assembla.com/qsp/changeset/652"  rel="nofollow">652</a> - Fix bug with locals declarations</div>
</li>
<li class="level1"><div class="li"> <a href="https://trac.assembla.com/qsp/changeset/694" class="urlextern" title="https://trac.assembla.com/qsp/changeset/694"  rel="nofollow">694</a> - Support assignments in the local statement</div>
</li>
</ul>

</div>
<!-- EDIT5 SECTION "Local variables" [4203-4846] -->
<h3 class="sectionedit6" id="nemnogo_dopolnitelnoj_informacii">Немного дополнительной информации</h3>
<div class="level3">

<p>
Будут списки. Из-за них более удобное использование многомерных массивов: arr[1,2,3]=455
</p>

<p>
Локальные переменные: <del>local a=4,b=6,$c=&#039;qqq&#039;</del>
Локальны для текущего блока кода, при выходе восстанавливаются предыдущие значения.
Представленное выше объявление не работает в 5.8.0. Объявление локальных переменных через кортежи:
<pre class="brush: qsp">local a,b,$c=4,6,&#039;qqq&#039;</pre>
</p>

</div>
<!-- EDIT6 SECTION "Немного дополнительной информации" [4847-] --></div>
</body>
</html>
