<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
   <title>Выражения</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=Windows-1251" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />

<script type="text/javascript" src="helpman_topicinit.js"></script>
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#808080">
  <tr valign="middle">
    <td align="left">
      <p class="p_Heading1"><span class="f_Heading1">Выражения</span></p>

    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="about.htm">Top</a>&nbsp;
     <a href="opsfuncs_marks.htm">Previous</a>&nbsp;
     <a href="opsfuncs_mathops_arrays.htm">Next</a>
     </span>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<p>Выражение - набор <a href="dict.htm#constant">констант</a>, <a href="dict.htm#variable">переменных</a>, <a href="dict.htm#functions">функций</a>, связанных различными операциями. При записи выражений возможно использование скобок.</p>
<p>&nbsp;</p>
<p>Допустимые операции при записи выражений (в порядке возрастания приоритета; операции с одинаковым приоритетом находятся на одной строке):</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">&</span></p>
<p><span style="font-weight: bold;">OR</span></p>
<p><span style="font-weight: bold;">AND</span></p>
<p><span style="font-weight: bold;">OBJ</span>, <span style="font-weight: bold;">NO</span></p>
<p><span style="font-weight: bold;">=</span>, <span style="font-weight: bold;">&lt;</span>, <span style="font-weight: bold;">&gt;</span>, <span style="font-weight: bold;">!</span>, <span style="font-weight: bold;">&lt;&gt;</span>, <span style="font-weight: bold;">&lt;=</span>, <span style="font-weight: bold;">&gt;=</span>, <span style="font-weight: bold;">=&lt;</span>, <span style="font-weight: bold;">=&gt;</span></p>
<p><span style="font-weight: bold;">+</span>, <span style="font-weight: bold;">-</span></p>
<p><span style="font-weight: bold;">MOD</span></p>
<p><span style="font-weight: bold;">*</span>, <span style="font-weight: bold;">/</span></p>
<p><span style="font-weight: bold;">+</span>, <span style="font-weight: bold;">-</span> (унарные)</p>
<p>&nbsp;</p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><table cellspacing="0" cellpadding="0" border="0" style="border: none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="50" style="width:50px;"><p><span style="font-weight: bold;">PS:</span></p>
</td>
<td valign="top"><p>Выражения в скобках имеют наивысший приоритет.</p>
</td>
</tr>
</table>
</div>
<p>&nbsp;</p>
<p>Здесь (см. раздел <a href="opsfuncs_marks.htm">&quot;Обозначения&quot;</a>):</p>
<p>&nbsp;</p>
<p>[$выражение 1] <span style="font-weight: bold;">&</span> [$выражение 2] - операция объединения строковых выражений.</p>
<p>[#выражение 1] <span style="font-weight: bold;">OR</span> [#выражение 2] - операция &quot;или&quot;. Если хотя бы одно из рядом стоящих выражений верно, то верно и всё выражение.</p>
<p>[#выражение 1] <span style="font-weight: bold;">AND</span> [#выражение 2] - операция &quot;и&quot;. Если оба рядом стоящие выражения верны, то верно и всё выражение.</p>
<p>[#выражение 1] <span style="font-weight: bold;">MOD</span> [#выражение 2] - операция вычисления остатка от деления.</p>
<p><span style="font-weight: bold;">OBJ</span> [$выражение] - верно, если в рюкзаке есть предмет [$выражение].</p>
<p><span style="font-weight: bold;">NO</span> [#выражение] - отрицание. Верно, если [#выражение] ложно и наоборот (аналогично &quot;NOT&quot; в Basic).</p>
<p>[выражение 1] <span style="font-weight: bold;">=</span> [выражение 2] - верно, если значения рядом стоящих выражений равны.</p>
<p>[выражение 1] <span style="font-weight: bold;">&lt;</span> [выражение 2] - верно, если значение выражения слева меньше значения выражения справа.</p>
<p>[выражение 1] <span style="font-weight: bold;">&gt;</span> [выражение 2] - верно, если значение выражения слева больше значения выражения справа.</p>
<p>[выражение 1] <span style="font-weight: bold;">!</span> [выражение 2], [выражение 1] <span style="font-weight: bold;">&lt;&gt;</span> [выражение 2] - верно, если значения рядом стоящих выражений не равны.</p>
<p>[выражение 1] <span style="font-weight: bold;">&lt;=</span> [выражение 2], [выражение 1] <span style="font-weight: bold;">=&lt;</span> [выражение 2] - верно, если значение выражения слева меньше или равно значению выражения справа.</p>
<p>[выражение 1] <span style="font-weight: bold;">&gt;=</span> [выражение 2], [выражение 1] <span style="font-weight: bold;">=&gt;</span> [выражение 2] - верно, если значение выражения слева больше или равно значению выражения справа.</p>
<p><span style="font-weight: bold;">+</span> , <span style="font-weight: bold;">-</span> , <span style="font-weight: bold;">*</span>, <span style="font-weight: bold;">/</span> - сложение, вычитание, умножение, деление соответственно. Операции записываются как [#выражение 1] [операция] [#выражение 2].</p>
<p><span style="font-weight: bold;">+</span> [#выражение], <span style="font-weight: bold;">-</span> [#выражение] - унарные плюс / минус. Находятся перед числовым выражением и меняют знак у значения этого выражения (в случае &quot;-&quot;).</p>
<p>&nbsp;</p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><table cellspacing="0" cellpadding="0" border="0" style="border: none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="50" style="width:50px;"><p><span style="font-weight: bold;">PS:</span></p>
</td>
<td valign="top"><p>Верным считается числовое выражение, значение которого отлично от 0. При значении 0 выражение считается ложным. Для значения &quot;верно&quot; настоятельно рекомендуется использовать -1.</p>
</td>
</tr>
</table>
</div>
<p>&nbsp;</p>
<p>В QSP одна переменная / элемент <a href="dict.htm#array">массива</a> может содержать два значения: текстовое и числовое.</p>
<p>При использовании текстового значения перед названием переменной ставится символ &quot;<span style="font-weight: bold;">$</span>&quot; (&quot;$Player_Name&quot;). Для использования числового значения переменной пишется только её название. Например:</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;a=5 & $a='яблоко'</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$a</p>
<p>&nbsp;</p>
<p>Числовая константа записывается числом (например, 4535), а текстовая берётся с двух сторон в кавычки. Кавычками могут быть либо апострофы (<span style="font-weight: bold;">'</span>), либо прямые кавычки (<span style="font-weight: bold;">&quot;</span>). Две подряд идущие кавычки считаются кавычкой, включённой в текстовую константу. Т.е. после выполнения строк</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;*PL 'Byte Soft''s QSP'</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;*PL &quot;Byte Soft's &quot;&quot;QSP&quot;&quot;&quot;</p>
<p>&nbsp;</p>
<p>вы увидите строки</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;Byte Soft's QSP</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;Byte Soft's &quot;QSP&quot;</p>
<p>&nbsp;</p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><table cellspacing="0" cellpadding="0" border="0" style="border: none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="50" style="width:50px;"><p><span style="font-weight: bold;">PS:</span></p>
</td>
<td valign="top"><p>QSP поддерживает только целые числа. Числа с плавающей запятой (дробные) не поддерживаются.</p>
</td>
</tr>
</table>
</div>
<p>&nbsp;</p>
<p>Существует возможность использования преформатированных текстовых констант. Для таких констант сохраняются переносы строк и отступы. Примеры:</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;'Данный текст</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;будет расположен на</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;нескольких строках'</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$a='И этот</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;текст</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;также'</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;a=2 & act 'Многострочное</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;название':gt 'next'</p>
<p>&nbsp;</p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><table cellspacing="0" cellpadding="0" border="0" style="border: none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="50" style="width:50px;"><p><span style="font-weight: bold;">PS:</span></p>
</td>
<td valign="top"><p>Строки, содержащие преформатированную текстовую константу, считаются ОДНОЙ строкой (сообщения об ошибках также выводятся с учётом того, что это одна строка).</p>
</td>
</tr>
</table>
</div>
<p>&nbsp;</p>
<p>В зависимости от результата вычисления выражения могут быть либо строковыми, либо числовыми.</p>
<p>Примеры числовых выражений:</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;3+4*3*4</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;(val('25')*4)/(2*5)</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;был_в_комнате = 0</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$был_в_комнате = 'нет'</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;1 AND 1 OR 0</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;A=B AND (C&lt;&gt;D OR 2=E+3)</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$str1 = $str2 AND $str2 &lt;&gt; $str3</p>
<p>&nbsp;</p>
<p>Примеры строковых выражений:</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;'строка'</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;&quot;проверка&quot;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;&quot;преформатированная</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;текстовая</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;константа&quot;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;mid(&quot;строка&quot;,1,2)</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$VAR</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;$VAR + ' строка '</p>
<p>&nbsp;</p>
<p>Складывать с помощью &quot;<span style="font-weight: bold;">+</span>&quot; можно не только числа (значения числовых выражений), но и объединять текстовые константы (значения строковых выражений). Также для объединения строковых значений можно использовать символ &quot;<span style="font-weight: bold;">&</span>&quot;, при этом такое объединение должно быть заключено в скобки. Например,</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;*PL 'The '+'door '+'is closed.'</p>
<p>&nbsp;</p>
<p>и</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;*PL ('The '&'door '&'is closed.')</p>
<p>&nbsp;</p>
<p>выведут одно и то же: &quot;The door is closed.&quot;.</p>
<p>&nbsp;</p>
<p>Возможна ЛЮБАЯ комбинация констант, переменных, функций.</p>
<p>При вычислении значений выражений движок (по возможности) конвертирует типы данных автоматически.</p>
<p>&nbsp;</p>
<p>В строковые константы, в базовые описания <a href="dict.htm#location">локаций</a> и названия базовых действий существует возможность вставлять значения выражений.</p>
<p>Такие &quot;подвыражения&quot; должны находиться между двойных угловых скобок: &quot;<span style="font-weight: bold;">&lt;&lt;</span>&quot; и &quot;<span style="font-weight: bold;">&gt;&gt;</span>&quot;, до и после которых может идти любой текст, включая подобные &quot;подвыражения&quot;.</p>
<p>Например, вместо <a href="dict.htm#operator">оператора</a></p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;pl 'i='+str(i)</p>
<p>&nbsp;</p>
<p>можно написать</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;pl 'i=&lt;&lt;i&gt;&gt;'</p>
<p>&nbsp;</p>
<p>Ещё примеры:</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;число_гоблинов=5</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;'Тебя окружили &lt;&lt;число_гоблинов&gt;&gt; гоблинов!'</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;pl 'Вас зовут &lt;&lt;$PlayerName&gt;&gt;, вы находитесь в &lt;&lt;$curloc&gt;&gt;.'</p>
<p>&nbsp;</p>
<p>Примеры использования вложенных &quot;подвыражений&quot;:</p>
<p>&nbsp;</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;pl val('&lt;&lt;val(&quot;&lt;&lt;i&gt;&gt;&quot;)&gt;&gt;&lt;&lt;j&gt;&gt;')</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp;pl val('&lt;&lt;str(val(&quot;&lt;&lt;i&gt;&gt;&quot;))&gt;&gt;')</p>
<p>&nbsp;</p>
<p>Так как &quot;подвыражения&quot; вычисляются внутри строковых констант, то для вычисления вложенного &quot;подвыражения&quot; необходимо присутствие вложенной строковой константы.</p>
<p>&nbsp;</p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><table cellspacing="0" cellpadding="0" border="0" style="border: none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td valign="top" width="50" style="width:50px;"><p><span style="font-weight: bold;">PS:</span></p>
</td>
<td valign="top"><p>Смотрите раздел <a href="opsfuncs_mathops_arrays.htm">&quot;Использование массивов&quot;</a> этой части документации, чтобы получить дополнительную информацию о возможных выражениях.</p>
</td>
</tr>
</table>
</div>

</td></tr></table>

</body>
</html>
