<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <link id="favicon" rel="icon" type="image/x-icon" href="../res/favicon.ico" />
    <link type="text/css" rel="stylesheet" href="../res/css/easy.library.css" />
    <title>QSP: ИнформАрхив</title>
</head>
    
<body>
    <div class="avs-page-wrapper">
        <div class="easy-lib-page">
            <article class="e-block">
            <h1 class="avs-article-h1">ИнформАрхив QSP</h1>
            <!-- body start -->
<div class="avs-pages-button__wrapper"><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/informarch/otladchik_0021.html" class="avs-pages-button__link">&lt; Назад, к странице 23</a></div><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/informarch/shablony_oformlenija_dlja_igr_0032.html" class="avs-pages-button__link">Вперёд, к странице 25 &gt;</a></div></div>
<h5 id="informarch_randomizer" class="avs-article-h5">Выбор случайных вариантов - тянем карты из колоды [1.0]</h5><p>
Если требуется выбрать случайный вариант однократно, то используется оператор RAND. Но если стоит задача сделать последовательный выбор случайных вариантов из заранее сформированного массива значений, то одним только RAND не обойтись. При каждом последующем выборе нужно будет "помнить", какие значения были уже выбраны.
</p>
<p>
Эта задача схожа с последовательным вытягиванием карт из колоды.
</p>
<p>
Решение, оформленное в виде пользовательской функции:
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator"></span><span class="Monokai-Comment">!&nbsp;Запрашиваем&nbsp;длину&nbsp;массива</span><br/>
_length&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-Func">ARRSIZE</span><span class="Monokai-Operator">(</span><span class="Monokai-String">'$random'</span><span class="Monokai-Operator">)</span><span class="Monokai-Operator"><br/>
</span><span class="Monokai-Comment">!&nbsp;Если&nbsp;вариантов&nbsp;уже&nbsp;нет,&nbsp;возвращаем&nbsp;'ERROR'</span><br/>
<span class="Monokai-Koperator">IF</span>&nbsp;_length&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-Numeric">0</span><span class="Monokai-Operator">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-SysVar">$RESULT</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'ERROR'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">EXIT</span><br/>
<span class="Monokai-Koperator">END</span><span class="Monokai-Operator"><br/>
<br/>
</span><span class="Monokai-Comment">!&nbsp;Выбираем&nbsp;из&nbsp;массива&nbsp;случайный&nbsp;элемент,&nbsp;соотв.&nbsp;длине&nbsp;массива</span><br/>
_variant&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-Func">RAND</span><span class="Monokai-Operator">(</span><span class="Monokai-Numeric">0</span><span class="Monokai-Operator">,</span>&nbsp;_length<span class="Monokai-Operator">-</span><span class="Monokai-Numeric">1</span><span class="Monokai-Operator">)</span><span class="Monokai-Operator"><br/>
</span><span class="Monokai-Comment">!&nbsp;Запоминаем&nbsp;результат</span><br/>
<span class="Monokai-SysVar">$RESULT</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;$random<span class="Monokai-Operator">[</span>_variant<span class="Monokai-Operator">]</span><span class="Monokai-Operator"><br/>
<br/>
</span><span class="Monokai-Comment">!&nbsp;Удаляем&nbsp;отработанный&nbsp;элемент</span><br/>
<span class="Monokai-Operator">KILLVAR</span>&nbsp;<span class="Monokai-String">'$random'</span><span class="Monokai-Operator">,</span>&nbsp;_variant<br/>
</div>
<p>
Тестовый пример использования:
</p>
<div class="Monokai-Code">
$random<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">0</span><span class="Monokai-Operator">]</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'A'</span><br/>
$random<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">1</span><span class="Monokai-Operator">]</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'B'</span><br/>
$random<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">2</span><span class="Monokai-Operator">]</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'C'</span><br/>
$random<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">3</span><span class="Monokai-Operator">]</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'D'</span><br/>
$random<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">4</span><span class="Monokai-Operator">]</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'E'</span><br/>
$random<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">5</span><span class="Monokai-Operator">]</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'F'</span><br/>
$random<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">6</span><span class="Monokai-Operator">]</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'G'</span><br/>
<br/>
i&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-Numeric">1</span><span class="Monokai-Markup"><br/>
:loop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;$rand_&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-Func">FUNC</span><span class="Monokai-Operator">(</span><span class="Monokai-String">'Тянуть&nbsp;карту'</span><span class="Monokai-Operator">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-String">'Шаг&nbsp;№&lt;&lt;i&gt;&gt;.&nbsp;Значение:&nbsp;&lt;&lt;$rand_&gt;&gt;'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;i&nbsp;<span class="Monokai-Operator">=</span>&nbsp;i&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-Numeric">1</span><br/>
<span class="Monokai-Koperator">IF</span>&nbsp;i&nbsp;<span class="Monokai-Operator">&lt;=</span>&nbsp;<span class="Monokai-Numeric">7</span><span class="Monokai-Operator">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">JUMP</span>&nbsp;<span class="Monokai-String">'loop'</span><br/>
<span class="Monokai-Koperator">END</span><br/>
</div>
<p>
<a href="https://qsp.org/attachments/pullcard.qsp" style="text-decoration:none;" class="avs-page-external-link">pullcard.qsp</a>
</p>
<p>
Автор: <code>NEX</code>
</p>
<p>
29.05.2011 20:05
</p>
<div class="avs-pages-button__wrapper"><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/informarch/otladchik_0021.html" class="avs-pages-button__link">&lt; Назад, к странице 23</a></div><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/informarch/shablony_oformlenija_dlja_igr_0032.html" class="avs-pages-button__link">Вперёд, к странице 25 &gt;</a></div></div>
<!-- body end -->
            </article>
            <aside class="e-block">
                <div class="avs-page-stamp">
                    <p class="empty">Aleks Versus'HowDo-F.A.Q.'2021-<span class="subscribe-year">2022</span></p>
                    <p class="empty">Aleks Versus'Game Adventure Making'Really Unimaginable Stories'2013-<span class="subscribe-year">2022</span></p>
                </div>
            </aside>
            <aside class="em-btn">
                <div class="avs-pages-button__wrapper e-block">
                    <div class="avs-pages-button">
                        <a href="https://aleksversus.github.io/howdo_faq/" class="avs-pages-button__link">Главная</a>
                    </div>
                    <div class="avs-pages-button">
                        <a href="#"  class="avs-pages-button__link" id="section-content-open">Содержание</a>
                    </div>
                </div>
            </aside>
        </div><!-- easy-lib-page -->
    </div><!-- avs-page-wrapper -->
    <aside id="soderzhanije_outer">
        <div class="soderzhanije">
<header-header></header-header>
        </div>
    </aside>
    <script type="text/javascript" src="../res/js/text_replace.js"></script>
    <script type="text/javascript" src="../res/js/soderzhanie.js" ></script>
</body>
</html>
