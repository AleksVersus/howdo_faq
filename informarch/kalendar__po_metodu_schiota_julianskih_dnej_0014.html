<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <link id="favicon" rel="icon" type="image/x-icon" href="../res/favicon.ico" />
    <link type="text/css" rel="stylesheet" href="../res/css/easy.library.css" />
    <title>QSP: ИнформАрхив</title>
</head>
    
<body>
    <div class="avs-page-wrapper">
        <div class="easy-lib-page">
            <article class="e-block">
            <h1 class="avs-article-h1">ИнформАрхив QSP</h1>
            <!-- body start -->
<div class="avs-pages-button__wrapper"><div class="avs-pages-button__left-combine"><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/informarch/txt2gam_for_linux_0013.html" class="avs-pages-button__link">&lt; Назад, к странице 15</a></div></div><div class="avs-pages-button__right-combine"><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/informarch/game_time_0015.html" class="avs-pages-button__link">Вперёд, к странице 17 &gt;</a></div></div></div>
<h5 id="informarch_calend_jul" class="avs-article-h5">Календарь по методу счёта Юлианский дней</h5><p class="avs-article-p">
Календарь по рецепту <strong>evp</strong>. Синтетическая статья, основанная на <a href="https://qsp.org/index.php?option=com_agora&amp;task=topic&amp;id=956&amp;Itemid=57" style="text-decoration:none;" class="avs-page-external-link">серии сообщений</a>.
</p>
<p class="avs-article-p">
Давным-давно были разработаны формулы для вычисления точной календарной даты из Юлианской даты. Юлианская дата — это число, показывающее, сколько точно прошло дней, начиная с полудня понедельника 24 ноября 4714 года до нашей эры.
</p>
<p class="avs-article-p">
Для тех, кто интересуется теорией, на википедии есть замечательная <a href="https://ru.wikipedia.org/wiki/%D0%AE%D0%BB%D0%B8%D0%B0%D0%BD%D1%81%D0%BA%D0%B0%D1%8F_%D0%B4%D0%B0%D1%82%D0%B0" style="text-decoration:none;" class="avs-page-external-link">статья, всё подробно разъясняющая</a>. Нас же интересуют непосредственно формулы, и что мы из них можем получить.
</p>
<p class="avs-article-p">
<strong>evp</strong> уже переложил все необходимые расчёты на QSP. Следующий код достаточно просто скопировать на отдельную локацию, и его можно тут же начать использовать. Для примера, будем считать, что данный код находится на локации <code>"calendar"</code>.
</p>
<div class="Monokai-Code">
JDN&nbsp;<span class="Monokai-Operator">=</span>&nbsp;JDNStart&nbsp;<span class="Monokai-Operator">+</span>&nbsp;time<span class="Monokai-Operator">/</span><span class="Monokai-Numeric">1440</span><br/>
hour&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-Operator">(</span>time<span class="Monokai-Operator">/</span><span class="Monokai-Numeric">60</span><span class="Monokai-Operator">)</span>&nbsp;<span class="Monokai-Func">MOD</span>&nbsp;<span class="Monokai-Numeric">24</span><br/>
minut&nbsp;<span class="Monokai-Operator">=</span>&nbsp;time&nbsp;<span class="Monokai-Func">MOD</span>&nbsp;<span class="Monokai-Numeric">60</span><br/>
weekday&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-Operator">(</span>JDN&nbsp;<span class="Monokai-Func">MOD</span>&nbsp;<span class="Monokai-Numeric">7</span><span class="Monokai-Operator">)</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-Numeric">1</span><br/>
<br/>
JDa&nbsp;<span class="Monokai-Operator">=</span>&nbsp;JDN&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-Numeric">32044</span><br/>
JDb&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-Operator">(</span><span class="Monokai-Numeric">4</span><span class="Monokai-Operator">*</span>JDa&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-Numeric">3</span><span class="Monokai-Operator">)</span><span class="Monokai-Operator">/</span><span class="Monokai-Numeric">146097</span><br/>
JDc&nbsp;<span class="Monokai-Operator">=</span>&nbsp;JDa<span class="Monokai-EndLoc">&nbsp;-&nbsp;(146097*JDb/4)</span><br/>
JDd&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-Operator">(</span><span class="Monokai-Numeric">4</span><span class="Monokai-Operator">*</span>JDc&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-Numeric">3</span><span class="Monokai-Operator">)</span><span class="Monokai-Operator">/</span><span class="Monokai-Numeric">1461</span><br/>
JDe&nbsp;<span class="Monokai-Operator">=</span>&nbsp;JDc<span class="Monokai-EndLoc">&nbsp;-&nbsp;1461*JDd/4</span><br/>
JDm&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-Operator">(</span><span class="Monokai-Numeric">5</span><span class="Monokai-Operator">*</span>JDe&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-Numeric">2</span><span class="Monokai-Operator">)</span><span class="Monokai-Operator">/</span><span class="Monokai-Numeric">153</span><br/>
<br/>
day&nbsp;<span class="Monokai-Operator">=</span>&nbsp;JDe<span class="Monokai-EndLoc">&nbsp;-&nbsp;(153*JDm+2)/5&nbsp;+&nbsp;1</span><br/>
month&nbsp;<span class="Monokai-Operator">=</span>&nbsp;JDm&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-Numeric">3</span><span class="Monokai-EndLoc">&nbsp;-&nbsp;12*(JDm/10)</span><br/>
year&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-Numeric">100</span><span class="Monokai-Operator">*</span>JDb&nbsp;<span class="Monokai-Operator">+</span>&nbsp;JDd<span class="Monokai-EndLoc">&nbsp;-&nbsp;4800&nbsp;+&nbsp;JDm/10</span><br/>
$hour_text&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-Func">iif</span>&nbsp;<span class="Monokai-Operator">(</span>hour&nbsp;<span class="Monokai-Operator">&lt;</span>&nbsp;<span class="Monokai-Numeric">10</span><span class="Monokai-Operator">,</span>&nbsp;<span class="Monokai-String">'0&lt;&lt;hour&gt;&gt;'</span><span class="Monokai-Operator">,</span>&nbsp;<span class="Monokai-String">'&lt;&lt;hour&gt;&gt;'</span><span class="Monokai-Operator">)</span><br/>
$minut_text&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-Func">iif</span>&nbsp;<span class="Monokai-Operator">(</span>minut&nbsp;<span class="Monokai-Operator">&lt;</span>&nbsp;<span class="Monokai-Numeric">10</span><span class="Monokai-Operator">,</span>&nbsp;<span class="Monokai-String">'0&lt;&lt;minut&gt;&gt;'</span><span class="Monokai-Operator">,</span>&nbsp;<span class="Monokai-String">'&lt;&lt;minut&gt;&gt;'</span><span class="Monokai-Operator">)</span><br/>
</div>
<p class="avs-article-p">
В самом начале игры нам нужно задать переменные <code>JDNStart</code> и <code>time</code>. Именно эти переменные будут хранить точное значение времени в нашей игре.
</p>
<p class="avs-article-p">
<code>JDNStart</code> показывает, когда наша игра должна начаться. Эта переменная содержит число дней, прошедших с полудня понедельника 24 ноября 4714 года д.н.э и до начала нашей игры.
</p>
<p class="avs-article-p">
К примеру, наша игра должна начаться 7 ноября 1917 года, в среду. Открываем <a href="https://promenade.imcce.fr/en/pages2/278.html" style="text-decoration:none;" class="avs-page-external-link">калькулятор</a>. Подставляем в нужные поля дату 7 ноября 1917, а время пишем 12 часов 00 минут 00 секунд. Юлианский день начинается с полудня! И получаем число 2421540. Точное, без дробной части, число дней.
</p>
<p class="avs-article-p">
Это самое число и есть наш <code>JDNStart</code>, вот и записываем 2421540 в переменную.
</p>
<p class="avs-article-p">
А в переменную <code>time</code> мы записываем, соответственно, число минут, прошедших с начала стартового дня нашей игры (не от полудня, а от полуночи). Например, наша игра стартует в 15:37. Значит с начала дня прошло 15 часов 37 минут, и значит на старте игры мы должны в переменную <code>time</code> записать число <code>15*60+37</code>.
</p>
<p class="avs-article-p">
Итого мы будем иметь две строчки кода на самой первой локации в нашей игре, описывающие время:
</p>
<div class="Monokai-Code">
JDNStart<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">2421540</span><br/>
time<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">15</span><span class="Monokai-Operator">*</span><span class="Monokai-Numeric">60</span><span class="Monokai-Operator">+</span><span class="Monokai-Numeric">37</span><br/>
</div>
<p class="avs-article-p">
Помимо <code>JDNStart</code> и <code>time</code> на самой первой локации нужно ещё прописать в отдельные массивы текстовое представление для дней недели и месяцев:
</p>
<div class="Monokai-Code">
$weekday_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">1</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Понедельник'</span><br/>
$weekday_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">2</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Вторник'</span><br/>
$weekday_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">3</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Среда'</span><br/>
$weekday_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">4</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Четверг'</span><br/>
$weekday_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">5</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Пятница'</span><br/>
$weekday_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">6</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Суббота'</span><br/>
$weekday_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">7</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Воскресенье'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">1</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Январь'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">2</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Февраль'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">3</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Март'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">4</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Апрель'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">5</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Май'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">6</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Июнь'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">7</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Июль'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">8</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Август'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">9</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Сентябрь'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">10</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Октябрь'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">11</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Ноябрь'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">12</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Декабрь'</span><br/>
</div>
<p class="avs-article-p">
И вот теперь всё готово для того, чтобы мы могли пользоваться полноценным календарём в нашей игре.
</p>
<p class="avs-article-p">
Дальше всё просто. Каждый раз, когда мы совершаем действие, которое должно занять какое-то время, в коде этого действия необходимо предусмотреть изменение переменной <code>time</code>. Например:
</p>
<div class="Monokai-Code">
<span class="Monokai-Koperator">act</span>&nbsp;<span class="Monokai-String">'Ехать&nbsp;в&nbsp;Смольный'</span><span class="Monokai-Operator">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;<span class="Monokai-Operator">+=</span>&nbsp;<span class="Monokai-Numeric">45</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">gt</span>&nbsp;<span class="Monokai-String">'smolny'</span><br/>
<span class="Monokai-Koperator">end</span><br/>
</div>
<p class="avs-article-p">
Нажав на действие, мы изменим значение переменной <code>time</code>, т.е. переместимся во времени на 45 минут, и с помощью оператора <code>goto</code> переместимся на локацию <code>"smolny"</code>.
</p>
<p class="avs-article-p">
Чтобы увидеть то самое изменение времени на экране, мы должны просто вызвать код локации <code>"calendar"</code>, чтобы все значения пересчитались, а затем вывести нужные значения на экран. Например, так:
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator">gs</span>&nbsp;<span class="Monokai-String">'calendar'</span><br/>
<span class="Monokai-Operator">*</span><span class="Monokai-Operator">nl</span>&nbsp;$weekday_text<span class="Monokai-Operator">[</span>weekday<span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">','</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;day&nbsp;<span class="Monokai-Operator">+</span>&nbsp;$month_text<span class="Monokai-Operator">[</span>month<span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'&nbsp;'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;year&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'года'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'.&nbsp;'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;$hour_text&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">':'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;$minut_text<br/>
</div>
<p class="avs-article-p">
Этот алгоритм хорошо работает на датах от 1 г. н.э. и дальше. Но если мы хотим его использовать для отображения дат до нашей эры, то нужно добавить вот эту строчку в самый конец локации <code>"calendar"</code>:
</p>
<div class="Monokai-Code">
$year_text&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-Func">iif</span>&nbsp;<span class="Monokai-Operator">(</span>year&nbsp;<span class="Monokai-Operator">&lt;</span>&nbsp;<span class="Monokai-Numeric">1</span><span class="Monokai-Operator">,</span>&nbsp;<span class="Monokai-String">'&lt;&lt;-year+1&gt;&gt;&nbsp;г.&nbsp;до&nbsp;н.э.'</span><span class="Monokai-Operator">,</span>&nbsp;<span class="Monokai-String">'&lt;&lt;year&gt;&gt;&nbsp;г.'</span><span class="Monokai-Operator">)</span><span class="Monokai-Operator">)</span><br/>
</div>
<p class="avs-article-p">
Это становится необходимым, если вы действительно хотите, чтобы отображение дат полностью соответствовало Григорианскому календарю. Дело тут в том, что алгоритм вычисляет астрономический счет лет, при котором за -1-м годом следует нулевой год, а затем 1-й год. В Григорианском же календаре принято, что первому году н.э. предшествовал 1-й год до н.э. Нулевого года в Григорианском календаре нет.
</p>
<p class="avs-article-p">
Для закрепления понимания того, как это всё работает, напишите несколько локаций:
</p>
<p class="avs-article-p">
<code>Локация "smolny"</code>
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator">*</span><span class="Monokai-Operator">nl</span><span class="Monokai-String">'Смольный'</span><br/>
<span class="Monokai-Operator">*</span><span class="Monokai-Operator">nl</span>&nbsp;$weekday_text<span class="Monokai-Operator">[</span>weekday<span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">',&nbsp;'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;day&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'&nbsp;'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;$month_text<span class="Monokai-Operator">[</span>month<span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'&nbsp;'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;year&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'года'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'.&nbsp;&nbsp;'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;$hour_text&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">':'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;$minut_text<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">act</span>&nbsp;<span class="Monokai-String">'Ехать&nbsp;на&nbsp;вокзал'</span><span class="Monokai-Operator">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;<span class="Monokai-Operator">+=</span>&nbsp;<span class="Monokai-Numeric">45</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">gs</span>&nbsp;<span class="Monokai-String">'calendar'</span>&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">gt</span>&nbsp;<span class="Monokai-String">'station'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">end</span><br/>
</div>
<p class="avs-article-p">
<code>Локация "station"</code>
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator">*</span><span class="Monokai-Operator">nl</span><span class="Monokai-String">'Вокзал'</span><br/>
<span class="Monokai-Operator">*</span><span class="Monokai-Operator">nl</span>&nbsp;$weekday_text<span class="Monokai-Operator">[</span>weekday<span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">',&nbsp;'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;day&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'&nbsp;'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;$month_text<span class="Monokai-Operator">[</span>month<span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'&nbsp;'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;year&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'года'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'.&nbsp;&nbsp;'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;$hour_text&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">':'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;$minut_text<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">act</span>&nbsp;<span class="Monokai-String">'Ехать&nbsp;в&nbsp;Смольный'</span><span class="Monokai-Operator">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;<span class="Monokai-Operator">+=</span>&nbsp;<span class="Monokai-Numeric">45</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">gs</span>&nbsp;<span class="Monokai-String">'calendar'</span>&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">gt</span>&nbsp;<span class="Monokai-String">'smolny'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">act</span>&nbsp;<span class="Monokai-String">'Ехать&nbsp;в&nbsp;Москву&nbsp;(время&nbsp;в&nbsp;пути&nbsp;1&nbsp;сутки,&nbsp;3&nbsp;часа)'</span><span class="Monokai-Operator">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;<span class="Monokai-Operator">+=</span>&nbsp;<span class="Monokai-Numeric">1620</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">gs</span>&nbsp;<span class="Monokai-String">'calendar'</span>&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">gt</span>&nbsp;<span class="Monokai-String">'moscow'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">end</span><br/>
</div>
<p class="avs-article-p">
<code>Локация "moscow"</code>
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator">*</span><span class="Monokai-Operator">nl</span><span class="Monokai-String">'Москва'</span><br/>
<span class="Monokai-Operator">*</span><span class="Monokai-Operator">nl</span>&nbsp;$weekday_text<span class="Monokai-Operator">[</span>weekday<span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">',&nbsp;'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;day&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'&nbsp;'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;$month_text<span class="Monokai-Operator">[</span>month<span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'&nbsp;'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;year&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'года'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">'.&nbsp;&nbsp;'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;$hour_text&nbsp;<span class="Monokai-Operator">+</span>&nbsp;<span class="Monokai-String">':'</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;$minut_text<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">act</span>&nbsp;<span class="Monokai-String">'Ехать&nbsp;в&nbsp;Питер&nbsp;(время&nbsp;в&nbsp;пути&nbsp;1&nbsp;сутки,&nbsp;3&nbsp;часа&nbsp;45&nbsp;минут)'</span><span class="Monokai-Operator">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;<span class="Monokai-Operator">+=</span>&nbsp;<span class="Monokai-Numeric">1665</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">gs</span>&nbsp;<span class="Monokai-String">'calendar'</span>&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">gt</span>&nbsp;<span class="Monokai-String">'station'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">end</span><br/>
</div>
<p class="avs-article-p">
В стартовой локации напишите этот код:
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator"></span><span class="Monokai-Comment">!&nbsp;задаём&nbsp;начальное&nbsp;время</span><br/>
JDNStart<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">2421540</span><br/>
time<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">3</span><span class="Monokai-Operator">*</span><span class="Monokai-Numeric">60</span><span class="Monokai-Operator">+</span><span class="Monokai-Numeric">37</span><span class="Monokai-Operator"><br/>
</span><span class="Monokai-Comment">!&nbsp;прописываем&nbsp;в&nbsp;массив&nbsp;названия&nbsp;месяцев&nbsp;и&nbsp;дней&nbsp;недели</span><br/>
$weekday_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">1</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Понедельник'</span><br/>
$weekday_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">2</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Вторник'</span><br/>
$weekday_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">3</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Среда'</span><br/>
$weekday_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">4</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Четверг'</span><br/>
$weekday_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">5</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Пятница'</span><br/>
$weekday_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">6</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Суббота'</span><br/>
$weekday_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">7</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Воскресенье'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">1</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Январь'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">2</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Февраль'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">3</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Март'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">4</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Апрель'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">5</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Май'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">6</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Июнь'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">7</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Июль'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">8</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Август'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">9</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Сентябрь'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">10</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Октябрь'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">11</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Ноябрь'</span><br/>
$month_text<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">12</span><span class="Monokai-Operator">]</span>&nbsp;<span class="Monokai-Operator">=</span>&nbsp;<span class="Monokai-String">'Декабрь'</span><span class="Monokai-Operator"><br/>
</span><span class="Monokai-Comment">!&nbsp;пересчитываем&nbsp;значения&nbsp;времени</span><br/>
<span class="Monokai-Operator">gs</span>&nbsp;<span class="Monokai-String">'calendar'</span><span class="Monokai-Operator"><br/>
</span><span class="Monokai-Comment">!&nbsp;переносимся&nbsp;&nbsp;в&nbsp;Смольный</span><br/>
<span class="Monokai-Operator">gt</span>&nbsp;<span class="Monokai-String">'smolny'</span><br/>
</div>
<p class="avs-article-p">
Пробуйте запустить и следите за датой 🙂
</p>
<div class="avs-pages-button__wrapper"><div class="avs-pages-button__left-combine"><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/informarch/txt2gam_for_linux_0013.html" class="avs-pages-button__link">&lt; Назад, к странице 15</a></div></div><div class="avs-pages-button__right-combine"><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/informarch/game_time_0015.html" class="avs-pages-button__link">Вперёд, к странице 17 &gt;</a></div></div></div>
<!-- body end -->
            </article>
            <aside class="e-block">
                <div class="avs-page-stamp">
                    <p class="empty">Aleks Versus'HowDo-F.A.Q.'2021-<span class="subscribe-year">2022</span></p>
                    <p class="empty">Aleks Versus'Game Adventure Making'Really Unimaginable Stories'2013-<span class="subscribe-year">2022</span></p>
                </div>
            </aside>
            <aside class="em-btn">
                <div class="avs-pages-button__wrapper e-block">
                    <div class="avs-pages-button">
                        <a href="https://aleksversus.github.io/howdo_faq/" class="avs-pages-button__link">Главная</a>
                    </div>
                    <div class="avs-pages-button">
                        <a href="#"  class="avs-pages-button__link" id="section-content-open">Содержание</a>
                    </div>
                </div>
            </aside>
        </div><!-- easy-lib-page -->
    </div><!-- avs-page-wrapper -->
    <aside id="soderzhanije_outer">
        <div class="soderzhanije">
<header-header></header-header>
        </div>
    </aside>
    <script type="text/javascript" src="../res/js/text_replace.js"></script>
    <script type="text/javascript" src="../res/js/soderzhanie.js" ></script>
</body>
</html>
