[Назад: Краткое руководство по TXT2GAM](../txt2gam)

# Подключение утилиты к текстовому редактору

При разработке игр в текстовом редакторе, очень полезным может оказаться создание специального действия / кнопки для автоматической компиляции файла в "`.qsp`" и запуска плеера сразу с редактируемым файлом.

То есть пишете текст игры в редакторе, нажимаете некое сочетание клавиш и получаете запущенную в плеере игру.

Данное руководство, на примере **[EmEditor](http://www.emeditor.com)**'а , описывает, как это сделать.

Для начала, создайте папку (допустим, "`D:\Games\QSP`"), распаковав в неё базовый архив плеера ("`qspgui.exe`" + все **DLL**'ки) и архив утилиты **TXT2GAM**.

Далее, создайте в этой папке (рядом с "`qspgui.exe`", "`txt2gam.exe`") файл "`start.bat`" со следующим содержимым:

```plain
txt2gam %1 %2
start qspgui %2
```

Теперь нужно в редакторе добавить действие/кнопку, при нажатии на которую будет запущен файл "`start.bat`" с двумя аргументами - указанием исходного TXT-файла и конечного "`.qsp`"-файла.

1.  Запустите EmEditor, выберите в меню **Tools / External Tools / Customize Tools\...**
2.  В появившемся окошке нажмите кнопку **New**.
3.  В поле **Title** впишите название действия (например, "QSP").
4.  В поле **Command** строку `D:\Games\QSP\start.bat`
5.  В поле **Arguments** строку `"$(Path)" "$(Dir)\$(Filename).gam"` (сохраняя кавычки)
6.  В поле **Initial Directory** строчку `D:\Games\QSP`
7.  Затем поставьте флажок напротив **Save File**, и нажмите **OK**.
8.  На панели инструментов появится новая кнопка с подписью "QSP", при нажатии на которую будут произведены требуемые действия.

Теперь нужно назначить сочетание клавиш для кнопки.

1.  Выберите пункт меню **Help / Keyboard Map\...**. В категории **External Tools** найдите пункт **QSP** (обычно, в самом низу) и щелкните по нему 2 раза.
2.  Установите курсор в поле **Press New Shortcut Key** и нажмите желаемое сочетание клавиш (к примеру, F1). Станет доступной кнопка **Assign**. Нажимаем.
3.  Далее жмём **OK** и пишем игры в формате TXT2GAM :-)

Чтобы установить пароль на файл, создаваемый утилитой TXT2GAM, замените в файле **`start.bat`** строчку

```plain
txt2gam.exe %1 %2
```

на

```plain
txt2gam.exe %1 %2 pMyPassword
```

где `MyPassword` - устанавливаемый пароль. Для задания паролей с пробелами, строчка `pMyPassword` должна быть указана в кавычках:

```plain
txt2gam.exe %1 %2 "pMy Pass word"
```

[Назад: Краткое руководство по TXT2GAM](../txt2gam)