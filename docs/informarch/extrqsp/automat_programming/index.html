<!doctype html>
<html lang="ru" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-informarch/extrqsp/automat_programming/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Автоматное программирование в QSP | Справочник | F.A.Q.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://aleksversus.github.io/res/favicon.ico"><meta data-rh="true" name="twitter:image" content="https://aleksversus.github.io/res/favicon.ico"><meta data-rh="true" property="og:url" content="https://aleksversus.github.io/docs/informarch/extrqsp/automat_programming/"><meta data-rh="true" property="og:locale" content="ru"><meta data-rh="true" name="docusaurus_locale" content="ru"><meta data-rh="true" name="docsearch:language" content="ru"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Автоматное программирование в QSP | Справочник | F.A.Q."><meta data-rh="true" name="description" content="Всем привет,"><meta data-rh="true" property="og:description" content="Всем привет,"><link data-rh="true" rel="icon" href="/res/favicon.ico"><link data-rh="true" rel="canonical" href="https://aleksversus.github.io/docs/informarch/extrqsp/automat_programming/"><link data-rh="true" rel="alternate" href="https://aleksversus.github.io/docs/informarch/extrqsp/automat_programming/" hreflang="ru"><link data-rh="true" rel="alternate" href="https://aleksversus.github.io/docs/informarch/extrqsp/automat_programming/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a047e963.css">
<script src="/assets/js/runtime~main.b957bca7.js" defer="defer"></script>
<script src="/assets/js/main.5ecfe8f3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Перейти к основному содержимому"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Перейти к основному содержимому</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Переключить навигационную панель" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Главная</b></a><a class="navbar__item navbar__link" href="/docs/howdo/intro">Как сделать? F.A.Q.</a><a class="navbar__item navbar__link" href="/docs/articles/type_casting">Статьи</a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/informarch/intro">Информ-Архив</a><a href="https://aleksversus.github.io/howdo_faq/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub/HowDo_F.A.Q<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Переключение между темным и светлым режимом (сейчас используется Светлый режим)" aria-label="Переключение между темным и светлым режимом (сейчас используется Светлый режим)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Прокрутка к началу" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/informarch/intro">Оглавление</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/informarch/wii_qsp/short_faq">Что такое QSP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/informarch/general/qgen_dev_guide/">Общие вопросы</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/informarch/extrqsp/console_player">Продвинутый QSP</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/informarch/extrqsp/console_player">Простой консольный QSP-плеер</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/informarch/extrqsp/automat_programming/">Автоматное программирование в QSP</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/informarch/txtgam/txt2gam_help">Текст в QSP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/informarch/program/julian_calendar">Программирование на QSP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/informarch/updates/classic_to_570">История обновлений</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/informarch/navigator/layout_templates">Quest Navigator</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/informarch/aeroqsp/wit/">AeroQSP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/informarch/review/compo_2010">Обзоры игр</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/informarch/qspider/deleting_games">qSpider</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/informarch/bookmarks">Подборка ссылок на различные ресурсы, справки и статьи</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Навигационная цепочка текущей страницы"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Главная страница" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Продвинутый QSP</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Автоматное программирование в QSP</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Содержание этой страницы</button></div><div class="theme-doc-markdown markdown"><h1>Автоматное программирование в QSP</h1>
<p>Всем привет,</p>
<p>В этой статье хочу рассказать о новом подходе, структурировать программный код при написании игр на QSP.  Казалось бы, в QSP и так присутствует вполне логическая структура локации: описание локации, действия на локации, пользовательский код при посещении локации. Но так бывает, что для одной локации нужно выводить несколько различных описаний локации, тем более, если эта локация посещается не раз и в ней, по сюжету, происходят новые действия, появляются персонажи или меняются условия.</p>
<p>Какие могут быть варианты решения?</p>
<table><thead><tr><th>Вариант 1</th><th>Вариант 2</th></tr></thead><tbody><tr><td>В редакторе QSP нет ограничений по числу локаций, поэтому можно создать несколько вариантов одной и той же локаций на каждый новый случай. Получится список «комната1», «комната2», «комната3» и т.д. В каждой локации можно добавить уникальное действие, нового персонажа  или определенные условие при посещении.</td><td>В одной локации «комната» в условии при посещении писать программный код учитывающий все возможные варианты которые могут происходить в локации. За частую, появляется много условий, и логическая составляющая кода усложняется на столько, что найти ошибку становиться очень проблематично.</td></tr></tbody></table>
<p>У вас есть свое решение? Обязательно поделитесь. 😊</p>
<p>Рассмотрим плюсы и минусы этих вариантов.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="вариант-1">Вариант 1<a class="hash-link" aria-label="Прямая ссылка на Вариант 1" title="Прямая ссылка на Вариант 1" href="/docs/informarch/extrqsp/automat_programming/#вариант-1">​</a></h2>
<ul>
<li>Каждая локации подчиняется изначальной структуре заложенной в QSP. Описание локации в своем окне, действия в своем и код при посещении на месте.</li>
<li>Простота кода при посещении, только тот код который в данный момент нужен на локации, нет нагромождения условий.</li>
</ul>
<ul>
<li>Увеличение числа локаций в дереве игры затрудняет ориентирование в редакторе.</li>
<li>В каждой локации присутствуют однотипный (общий) код при посещении, действия на локации, что увеличивает размер игры. А также потребность исправления во всех локация однотипных участков, если вдруг потребуется их изменить или что-то добавить.</li>
<li>В каждой локации будут уникальные переходы в действиях на смежные локации, которые также имеют свои «версии локации», что затрудняет навигацию по переходам между локациями. Т.е. в локации «комната1» будет действие «Выйти из комнаты»: goto «коридор1»  в локации «комната2» будет действие «Выйти из комнаты»: goto «коридор2» или может быть другой вариант и т.д. Таким образом, появляются ошибки: переходы могут либо совпасть, либо действие перехода никуда не ведет, либо отсутствует необходимое действие перехода совсем.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="резюме-по-варианту-1">Резюме по варианту 1<a class="hash-link" aria-label="Прямая ссылка на Резюме по варианту 1" title="Прямая ссылка на Резюме по варианту 1" href="/docs/informarch/extrqsp/automat_programming/#резюме-по-варианту-1">​</a></h3>
<p>Неплохой подход при написании игры, но требует предварительной работы по разбивки всего сюжета на локации и в свою очередь действий внутри локации на серию локаций. А также необходимость в четком дереве (графе) переходов между локациями. Не наглядное представление, куда можно перейти из локации.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="вариант-2">Вариант 2<a class="hash-link" aria-label="Прямая ссылка на Вариант 2" title="Прямая ссылка на Вариант 2" href="/docs/informarch/extrqsp/automat_programming/#вариант-2">​</a></h2>
<ul>
<li>Число локаций соответствует задумке автора, и если комната одна в доме, то и локация «комната» одна.</li>
<li>Весь код на локации со всеми действиями, условиями и персонажами в одном месте.</li>
<li>Возможность «программировать на лету». Т.е. по мере появления потребности в переменных, условиях, персонажах и т.п. вставляется новый код или модифицируется код написанный.</li>
<li>Вытекает из предыдущего плюса - широкое поле творчества, так как буквально все находиться в окне выполнение при посещении и тут полет фантазии ограничен только самой фан тазией.</li>
</ul>
<ul>
<li>Нагромождение кода в одном месте.</li>
<li>И вытекающее из предыдущих плюсов и минусов, разобраться в коде, с каждым новым добавлением, становиться все сложнее, а вернуться к написанию игры через продолжительный перерыв - невозможно.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="резюме-по-варианту-2">Резюме по варианту 2<a class="hash-link" aria-label="Прямая ссылка на Резюме по варианту 2" title="Прямая ссылка на Резюме по варианту 2" href="/docs/informarch/extrqsp/automat_programming/#резюме-по-варианту-2">​</a></h3>
<p>Такой подход к написанию игр выбирается в большинстве случаев из-за «программирования на лету», годится лишь для написания небольших игр и за один подход, иначе игра просто остается недописанной.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="что-же-делать">Что же делать?<a class="hash-link" aria-label="Прямая ссылка на Что же делать?" title="Прямая ссылка на Что же делать?" href="/docs/informarch/extrqsp/automat_programming/#что-же-делать">​</a></h2>
<p>На просторах интернета я нашел интересный метод программирования, который как нельзя лучше подходит под наши нужды, красивого писания игр на QSP. Этот метод объединяет лучшие качества рассмотренных выше двух вариантов. Заключается он в дополнительной структуре программного кода, в результате чего программа выглядит сложенной из кирпичиков, однотипных блоков кода.</p>
<p>На рисунке изображено схематически что из чего следует.</p>
<p><img decoding="async" loading="lazy" alt="схема" src="/assets/images/shema-be813bee94c172fe1a6dd1ecb23382d1.png" width="920" height="394" class="img_ev3q"></p>
<p>Проведем аналогии с QSP терминологией:</p>
<p><strong>Табл. Автоматы</strong> – Перечень наших локаций то что мы видим в левой части QSP редактора.</p>
<p><strong>Табл. Описание автомата</strong> – Описание на локации обратите внимание, описание зависит от состояния, т.е. у одной локации может быть несколько описаний локации.</p>
<p><strong>Табл. Описание состояния</strong> – Состояния локации, где могу быть свой код при посещении см Процедура, Обратите внимание, переходы (переходы между состояниями или локациями или ещё точнее между стояниями локаций) в каждом состоянии индивидуальны.</p>
<p><strong>Табл. Описаний переходов</strong> – Наши действия с переходом goto «новая локация». Здесь могут быть условия перехода на картинке изображено блоком Булева функция, а так же номер нового состояние локации куда мы перейдем по выбора этого действия.</p>
<p>Пока выглядит немного запутано, н о рассмотрим программный код, написанный по этому методу на примере игры «Дом пустоты».</p>
<p><img decoding="async" loading="lazy" alt="красный" src="/assets/images/red-692b9dbe8869b7f5f2c6e76d9f0a8271.png" width="1022" height="711" class="img_ev3q"></p>
<p>В левой части мы видим перечень локаций. Каждая локация это наш автомат, который может иметь несколько состояний.</p>
<p>В окне выполнить при посещении мы видим некие блоки которые начинаются комментарием, затем идет <code>IF</code>, далее тело блока, и заканчивается <code>END</code>.</p>
<p>Так как локация спальня у нас одна, по сюжету ГГ может посещать её несколько раз, то в окне «Выполнить при посещении» пишем шаблон:</p>
<ol>
<li>Комментарий описывающий состояние автомата – для себя чтобы быстро найти нужное состояние локации.</li>
<li>Условие входа в локацию, здесь переменная sp будет отражать состояния локации спальня. Значение <code>sp = 0</code> первое появление ГГ в спальне, значение <code>=1</code> – ГГ вышел из спальни и сразу же вернулся, обратите внимание описание с первым посещением спальни поменялось.</li>
<li>Описание локации в нужном состоянии локации</li>
<li>Действия на входе в состояние локации, это может быть переопределение переменных, или другие функции которые должны выполниться при посещении, я для удобства разделили переопределение переменных и вынес их в верх тела шаблона над описанием локаций, а все функции идут ниже описания, но это не принципиально.</li>
<li>Переходы из локации. Здесь можно писать уникальные переходы или переходы появляющиеся по условию, а также если в локации есть стандартный набор действий то его можно вынести в соответствующее место и этот набор действий будет общим для всех состояний локации.</li>
</ol>
<p>Для удобства и наглядности может потребоваться ( и я настоятельно рекомендую применять) графическое представление.</p>
<p>На листке бумаги нужно нарисовать граф нашей игры. Где узлы обозначим их точками или кружочками будут означать состояния локации, а линии со стрелками между узлами будут означать переходы между состояниями локаций. В интернете полно программ позволяющих упростить рисование таких графов,  одна из подобных программ которой пользуюсь я Explain. Программка очень маленькая 1Мб, с минимальным, но вполне достаточным набором инструментов для наших целей.</p>
<p>Вот такой получился у меня граф для игры «Дом пустоты», (это только часть)</p>
<p><img decoding="async" loading="lazy" alt="graf" src="/assets/images/graf-7a58a43231529692fbd534bc20690f4d.png" width="1024" height="768" class="img_ev3q"></p>
<p>Хочу дать несколько советов.</p>
<ol>
<li>Посмотрите на мой пример, все состояния одной локации идут в столбик. Для локация «спальня» sp0, sp1,sp2 …, для локации «коридор» kor0, kor1, kor2 и.т.д. При таком расположении узлов можно сразу найти нужную локацию и все её состояния. Здесь sp0, sp1 это наше состояние  в коде можно увидеть if sp=0… if sp=1.</li>
<li>У переходов есть направление, обозначается стрелочкой, если переход возможен обратно в исходное состояние, то нужно соединить 2 узла 2 раза сначала в одну сторону, а потом в другую.
Переходы лучше писать в теле шаблона сразу после условия входа в состояние:<!-- -->
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token user-variable">sp</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&amp; ! - те кущее состояние локации спальня</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token user-variable">kor</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&amp; ! - переменная отвечающая за состояние локации коридор</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">*p</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ………&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  ! …</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">Exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Скопировать в буфер обмена" title="Скопировать" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->А ниже в списке действий на локации всегда есть возможность выйти в коридор безусловным переходом <code>gt «коридор»</code>.
В локации коридор мы попадает сразу в блок- состояния коридора со значением <code>0</code>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token user-variable">kor</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&amp; ! - текущее состояние локации коридор</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token user-variable">sp</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&amp; ! - переменная отвечающая за состояние локации спальня</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token user-variable">zal</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">&amp; ! - состояние локации зал</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">*p</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ………&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  !     …</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">Exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Скопировать в буфер обмена" title="Скопировать" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Если в локации ГГ находит  предмет или при переходе предмет теряется то удобно обозначать в тексте узла или перехода «+ Имя предмета» предмет добавлен в инвентарь  или «– Имя предмета» предмет удален из инвентаря. А также при использовании предмета «исп. Имя предмета»</li>
</ol>
<p>Графом может пользоваться и сценарист без знания принципов программирования, так как будет наглядно видеть все цепочки сюжета, и не запутаться откуда и куда ГГ должен попасть в данный конкретный момент.</p>
<p>Какие ещё выгоды при таком системном подходе можно получить, например можно не особо сложно локализовать игру на другие языки.</p>
<p>Если весь текст  вынесен за пределы шаблона в отдельную локацию, по одной локации для каждого языка.</p>
<ul>
<li>URL на программу Explain <a href="http://www.bestfree.ru/soft/graph/mindmap.php" target="_blank" rel="noopener noreferrer">http://www.bestfree.ru/soft/graph/mindmap.php</a></li>
<li>Загрузить Explain с моей странички <a href="http://day0.narod.ru/stat/Explain.zip" target="_blank" rel="noopener noreferrer">http://day0.narod.ru/stat/Explain.zip</a></li>
<li>URL картинки схема <a href="http://day0.narod.ru/stat/shema.PNG" target="_blank" rel="noopener noreferrer">http://day0.narod.ru/stat/shema.PNG</a></li>
<li>URL картинки редактор   <a href="http://day0.narod.ru/stat/red.PNG" target="_blank" rel="noopener noreferrer">http://day0.narod.ru/stat/red.PNG</a></li>
<li>URL картинки граф  <a href="http://day0.narod.ru/stat/graf.PNG" target="_blank" rel="noopener noreferrer">http://day0.narod.ru/stat/graf.PNG</a></li>
<li>URL граф игры &quot;Дом пустоты&quot; для программы Explain  <a href="http://day0.narod.ru/stat/dom8.txt" target="_blank" rel="noopener noreferrer">http://day0.narod.ru/stat/dom8.txt</a></li>
<li>URL игры &quot;Дом пустоты&quot; <a href="http://day0.narod.ru/stat/b26.qsp" target="_blank" rel="noopener noreferrer">http://day0.narod.ru/stat/b26.qsp</a></li>
</ul>
<p>Автор: <strong>HIMAN</strong>
11.09.2011 21:06</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Страница документа"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/informarch/extrqsp/console_player"><div class="pagination-nav__sublabel">Предыдущая страница</div><div class="pagination-nav__label">Простой консольный QSP-плеер</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/informarch/txtgam/txt2gam_help"><div class="pagination-nav__sublabel">Следующая страница</div><div class="pagination-nav__label">TXT2GAM. Краткое руководство</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/informarch/extrqsp/automat_programming/#вариант-1">Вариант 1</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/informarch/extrqsp/automat_programming/#резюме-по-варианту-1">Резюме по варианту 1</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/informarch/extrqsp/automat_programming/#вариант-2">Вариант 2</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/informarch/extrqsp/automat_programming/#резюме-по- варианту-2">Резюме по варианту 2</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/informarch/extrqsp/automat_programming/#что-же-делать">Что же делать?</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright"><aside class="footerBlock">
<div class="eBlock">
<div class="avsPageStamp">
    <p class="emptyP">Aleks Versus'HowDo-F.A.Q'2019-2024. Built with Docusaurus.<br></p>
    <p class="emptyP">Aleks Versus'Game Adventure Making'Really Unimaginable Stories'2019-2024</p>
</div></div>
</aside></div></div></div></footer></div>
</body>
</html>