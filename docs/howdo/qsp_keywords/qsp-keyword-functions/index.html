<!doctype html>
<html lang="ru" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-howdo/qsp_keywords/qsp-keyword-functions" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Функции | Справочник | F.A.Q.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://aleksversus.github.io/howdo_faq/res/favicon.ico"><meta data-rh="true" name="twitter:image" content="https://aleksversus.github.io/howdo_faq/res/favicon.ico"><meta data-rh="true" property="og:url" content="https://aleksversus.github.io/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-functions"><meta data-rh="true" property="og:locale" content="ru"><meta data-rh="true" name="docusaurus_locale" content="ru"><meta data-rh="true" name="docsearch:language" content="ru"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Функции | Справочник | F.A.Q."><meta data-rh="true" name="description" content="$CURACTS"><meta data-rh="true" property="og:description" content="$CURACTS"><link data-rh="true" rel="icon" href="/howdo_faq/res/favicon.ico"><link data-rh="true" rel="canonical" href="https://aleksversus.github.io/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-functions"><link data-rh="true" rel="alternate" href="https://aleksversus.github.io/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-functions" hreflang="ru"><link data-rh="true" rel="alternate" href="https://aleksversus.github.io/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-functions" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Функции","item":"https://aleksversus.github.io/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-functions"}]}</script><link rel="stylesheet" href="/howdo_faq/assets/css/styles.6556fb06.css">
<script src="/howdo_faq/assets/js/runtime~main.70a0a106.js" defer="defer"></script>
<script src="/howdo_faq/assets/js/main.ae4c95f8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Перейти к основному содержимому"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Перейти к основному содержимому</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Переключить навигационную панель" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/howdo_faq/"><b class="navbar__title text--truncate">Главная</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/howdo_faq/docs/howdo/intro">Как сделать? F.A.Q.</a><a class="navbar__item navbar__link" href="/howdo_faq/docs/news/news_content">Новости QSP</a><a class="navbar__item navbar__link" href="/howdo_faq/docs/articles/type_casting">Статьи</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/howdo_faq/docs/informarch/intro">Информ-Архив</a><a class="navbar__item navbar__link" href="/howdo_faq/docs/wiki/start">QSP-wiki</a><a href="https://github.com/AleksVersus/howdo_faq" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub/HowDo_F.A.Q<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Переключение между темным и светлым режимом (сейчас используется system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Прокрутка к началу" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/howdo_faq/docs/howdo/intro"><span title="Важное предисловие" class="linkLabel_WmDU">Важное предисловие</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-operacion"><span title="Зарезервированные слова, системные переменные, спецсимволы" class="categoryLinkLabel_W154">Зарезервированные слова, системные переменные, спецсимволы</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-operacion"><span title="Операции" class="linkLabel_WmDU">Операции</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-operators"><span title="Операторы" class="linkLabel_WmDU">Операторы</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-functions"><span title="Функции" class="linkLabel_WmDU">Функции</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-sys-var"><span title="Системные переменные" class="linkLabel_WmDU">Системные переменные</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-syntaxems"><span title="Синтаксемы и спецсимволы" class="linkLabel_WmDU">Синтаксемы и спецсимволы</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-pointer"><span title="Указатель" class="linkLabel_WmDU">Указатель</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/howdo_faq/docs/howdo/contents/what_dif/set_let"><span title="Содержание" class="categoryLinkLabel_W154">Содержание</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/howdo_faq/docs/howdo/links"><span title="Источники и дополнительные материалы" class="linkLabel_WmDU">Источники и дополнительные материалы</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/howdo_faq/docs/howdo/history"><span title="История версий" class="linkLabel_WmDU">История версий</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Навигационная цепочка текущей страницы"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Главная страница" class="breadcrumbs__link" href="/howdo_faq/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Зарезервированные слова, системные переменные, спецсимволы</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Функции</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Содержание этой страницы</button></div><div class="theme-doc-markdown markdown"><header><h1>Функции</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="curacts"><code>$CURACTS</code><a href="#curacts" class="hash-link" aria-label="Прямая ссылка на curacts" title="Прямая ссылка на curacts" translate="no">​</a></h2>
<p><code>$CURACTS</code> —  данная функция возвращает выведенные на экран действия в виде кода QSP, как текстовое значение.</p>
<p>Действия сохраняются в виде набора операторов <code>act</code> с cответствующими параметрами и операциями.</p>
<p>Записав возвращённое функцией значение в переменную, можно восстановить действия с помощью оператора <code>dynamic</code>. Пример:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! записываем текущие действия в переменную</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$actlist</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">$curacts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! восстанавливаем действия из переменной</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">dynamic</span><span class="token plain"> </span><span class="token user-variable">$actlist</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="curloc"><code>$CURLOC</code><a href="#curloc" class="hash-link" aria-label="Прямая ссылка на curloc" title="Прямая ссылка на curloc" translate="no">​</a></h2>
<p><code>$CURLOC</code> —  функция возвращает название текущей локации, т.е. локации, в которой &quot;находится&quot; игрок.</p>
<p>Технически это следует понимать так. В момент запуска игры плеер начинает выполнять код самой первой локации в игре, а когда код выполнен, плеер &quot;останавливается&quot; и ждёт участия игрока. Игрок может нажимать различные кнопки в игре, ссылки и выбирать пункты меню, что приводит к выполнению других блоков кода (например, действий) и переходам на новые локации по <code>goto</code> или <code>xgoto</code>. При таких переходах плеер вновь выполняет код других локаций и, когда код выполнен, &quot;останавливается&quot;.</p>
<p>Так вот, когда на локацию осуществлён непосредственный переход (т.е. по <code>goto</code> или <code>xgoto</code>, либо это самая первая локация в игре), <code>$curloc</code> начинает возвращать название этой локации, — во всё время, пока выполняется код, и когда плеер &quot;останавливается&quot;. Если после остановки не происходит переход по <code>goto</code>/<code>xgoto</code>, значение, которое возвращает <code>$curloc</code>, не меняется.</p>
<p>Пример использования:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token builtin">$curloc</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! выводим название текущей локации в Окно основного описания</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Сколько раз перезашли: &lt;&lt;перезашёл&gt;&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">act</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Перезайти на текущую локацию&quot;</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token user-variable">перезаш</span><span class="token plain">ё</span><span class="token user-variable">л</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">goto</span><span class="token plain"> </span><span class="token builtin">$curloc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="curobjs"><code>$CUROBJS</code><a href="#curobjs" class="hash-link" aria-label="Прямая ссылка на curobjs" title="Прямая ссылка на curobjs" translate="no">​</a></h2>
<p><code>$CUROBJS</code> - данная функция возвращает список выведенных на экран предметов в виде QSP-кода.
Предметы сохраняются в виде набора операторов <code>ADDOBJ</code> с ответствующими параметрами и операциями.</p>
<p>Записав воз вращённое функцией значение в переменную, можно восстановить предметы с помощью оператора <code>DYNAMIC</code>. Пример:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! сохраняем список предметов как код QSP:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$old_objects</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">$CUROBJS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! удаляем все предметы из окна предметов:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">KILLOBJ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! восстанавливаем все предметы в окне предметов:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">DYNAMIC</span><span class="token plain"> </span><span class="token user-variable">$old_objects</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="desc"><code>$DESC</code><a href="#desc" class="hash-link" aria-label="Прямая ссылка на desc" title="Прямая ссылка на desc" translate="no">​</a></h2>
<p><code>$DESC</code> —  возвращает текст базового описания локации с заданным названием. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$DESC</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$локация</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$локация]</code> — это название интересующей нас локации. Например:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! возвращаем базовое описание локации &quot;каморка_под_лестницей&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$desc</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;каморка_под_лестницей&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">!возвращаем базовое описание текущей локации</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$desc</span><span class="token sign-punctuation">(</span><span class="token builtin">$curloc</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>Если в базовом описании присутствуют подвыражения, функция автоматически раскрывает их.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Обратите внимание!</div><div class="admonitionContent_BuS1"><p>Функция возвращает текст, написанный только в поле &quot;Описание&quot; (<strong>Базовое описание</strong>) редактора <strong>Quest Generator</strong>. При работе в текстовом редакторе данное поле вам недоступно и функция будет всегда возвращать пустую строку.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="dyneval"><code>$DYNEVAL</code><a href="#dyneval" class="hash-link" aria-label="Прямая ссылка на dyneval" title="Прямая ссылка на dyneval" translate="no">​</a></h2>
<p><code>DYNEVAL</code> —  выполняет код, переданный в виде строки текста, и возвращает результат, если он есть. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$DYNEVAL</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$код</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">аргумент</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">аргумент</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> ... </span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">аргумент</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">DYNEVAL</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$код</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">аргумент</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">аргумент</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> ... </span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">аргумент</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$код]</code> — это обычный код QSP, записанный в виде текста. Выполнение такого кода аналогично выполнению кода функции <code>FUNC</code>. Аргументы <code>[аргумент 0]</code>, <code>[аргумент 1]</code> и т.д. могут использоваться внутри <code>[$код]</code>, их значения автоматически помещаются в переменн ые <code>args[0]</code>, <code>args[1]</code>, и т.д. соответственно.</p>
<p>Внутри выполняемого кода <code>dyneval</code> используется свой собственный массив <code>ARGS</code>, его значения не пересекаются со значениями <code>ARGS</code> на локации, из которой <code>dyneval</code> была вызвана.</p>
<p>После выполнения кода, переданного функции <code>dyneval</code>, продолжается вычисление выражения, в котором расположена функция <code>dyneval</code>.</p>
<p>Чтобы <code>dyneval</code> возвращала результат, необходимо внутри <code>[$код]</code> присвоить этот результат переменной <code>result</code>.</p>
<p>Примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">dyneval</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;result = 3 + 4&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token builtin">$dyneval</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$result = mid(&quot;abcd&quot;, 2, 1) + &quot;qwerty&quot;&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">проход</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">dyneval</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&quot;result = ($args[0] &lt;&gt; &#x27;текст&#x27;)&quot;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;строка&#x27;</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<ul>
<li class="">Чтобы <code>DYNEVAL</code> вернула несколько значений, результат должен быть записан в <code>%RESULT</code>.</li>
<li class="">Чтобы <code>DYNEVAL</code> вернула строковое значение, результат должен быть записан в <code>$RESULT</code>.</li>
<li class="">Чтобы <code>DYNEVAL</code> вернула числовое значение, результат должен быть записан в <code>RESULT</code>.</li>
<li class=""><code>%RESULT</code>, <code>$RESULT</code> и <code>RESULT</code> — это одна и та же переменная, но с разными типами данных. Следует помнить, что новая запись значения затирает предыдущее, какого бы типа данных не было это значение.</li>
</ul>
<p>Если при выполнении <code>dyneval</code> она не возвращает значения (<code>result</code> не инициализируется), и является единственным элементом выражения, передаваемого неявному оператору, плеер ничего не выведет на экран. Т.е. <code>dyneval</code> будет работать, как <code>DYNAMIC</code>. Пример:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! неявный оператор выведет на экран 123:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! код в dyneval выполнится, но на экране</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! мы ничего не увидим:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">dyneval</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&quot;code = 123 + 890&quot;</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! неявный оператор выведет на экран 1013:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">code</span><br></span></code></pre></div></div>
<p>См. также <a class="" href="/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-operators#dynamic">оператор <code>DYNAMIC</code></a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="func"><code>$FUNC</code><a href="#func" class="hash-link" aria-label="Прямая ссылка на func" title="Прямая ссылка на func" translate="no">​</a></h2>
<p><code>FUNC</code> —  выполнение кода указанной локации без непосредственного перехода на неё с возвращением значения.</p>
<p>Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">FUNC</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$локация</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">аргумент</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">аргумент</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> ... </span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">аргумент</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$FUNC</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$локация</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">аргумент</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">аргумент</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> ... </span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">аргумент</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$локация]</code> — это название локации, код которой мы хотим выполнить без непосредственного перехода на неё. Аргументы <code>[а ргумент 0]</code>, <code>[аргумент 1]</code> и т.д. могут использоваться на этой локации, их значения автоматически помещаются в переменные <code>args[0]</code>, <code>args[1]</code>, и т.д. соответственно.</p>
<p>Чтобы <code>FUNC</code> вернула:</p>
<ul>
<li class="">несколько значений или кортеж, на указанной локации нужно присвоить результат переменной <code>%RESULT</code>;</li>
<li class="">строковый результат, на указанной локации нужно присвоить этот результат переменной <code>$RESULT</code>;</li>
<li class="">для возвращения числового результата, он должен быть присвоен переменной <code>RESULT</code>.</li>
</ul>
<p>Следует помнить, что <code>%RESULT</code>, <code>$RESULT</code> и <code>RESULT</code> — это одна и та же переменная, но разных типов, поэтому если вы определили на локации и <code>%RESULT</code>, и <code>$RESULT</code>, и <code>RESULT</code>, функция вернёт то значение, которое было записано в эту переменную последним.</p>
<p>Если переменной <code>RESULT</code> не было присвоено значение, функция ничего не вернёт. И тут есть два варианта поведения плеера.</p>
<ul>
<li class="">Если функция <code>FUNC</code> стоит в каком либо выражении, вместо функции будет подставлено значение по умолчанию (пустой кортеж, пустая строка или ноль в зависимости от типа самого выражения).</li>
<li class="">Если функция <code>FUNC</code> стоит сразу после неявного оператора, такой оператор будет проигнорирован, и на экран ничего выводиться не будет. Пример:</li>
</ul>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">локация_Н</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">N</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! ни одно значение не присваивается переменной result</span><br></span></code></pre></div></div>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Другая локация</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">&#x27;строка 1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">func</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;локация_Н&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! ничего не выведется на экран</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token string" style="color:#e3116c">&#x27;строка 2&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">56</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">func</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;локация_Н&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! функция стоит в выражении. Её значение = 0</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Рекомендация:</div><div class="admonitionContent_BuS1"><p>Не обязательно, но рекомендуется, использовать префикс типа (<code>$</code> или <code>%</code>) с ключевым словом <code>FUNC</code>, если функция должна вернуть строковое значение или кортеж, и — без префикса типа, если функция должна вернуть числовое значение:</p><div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$func</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;срез_строки&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Мы вышли из дома, когда во всех окнах погасли огни.&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">func</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;возвести_в_степень&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div></div></div>
<p><strong>Порядок работы.</strong></p>
<p>При вызове указанной локации с помощью  <code>FUNC</code> происходит следующее:</p>
<ul>
<li class="">Плеер прерывает выполнение текущего кода (например, кода текущей локации), и обращается к указанной локации.</li>
<li class="">Базовое описание и список действий указанной локации добавляются к описанию и действиям текущей локации.</li>
<li class="">Выполненяется код из поля <strong>Выполнить при посещении</strong></li>
<li class="">Затем плеер возвращается к выполнению кода, который прервал. То есть к вычислению выражения, в котором стоит данная функция.</li>
</ul>
<p>На каждой локации автоматически создаются свои собственные уникальные массивы  <code>ARGS</code> и  <code>RESULT</code>, поэтому значения в этих массивах для каждой локации будут свои собственные. После выполнения кода локации, вызванной по  <code>FUNC</code>, массивы  <code>ARGS</code> и  <code>RESULT</code> этой локации уничтожаются.</p>
<p>Другие примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token quoted-comment comment" style="color:#999988;font-style:italic">!Обработка локации &quot;функция&quot; как функции. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">!Массив ARGS пуст.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">яблоки</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">FUNC</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;функция&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">!обработка локации с названием лежащим в переменной $name как функции. ARGS[0] равен 1.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">pl</span><span class="token plain"> </span><span class="token builtin">func</span><span class="token sign-punctuation">(</span><span class="token user-variable">$name</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">78</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">!обработка локации с названием в $name как функции. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">!$ARGS[0] содержит строку &quot;строка&quot;, ARGS[1] равен 2.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">msg</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;text&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">func</span><span class="token sign-punctuation">(</span><span class="token user-variable">$name</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;строка&quot;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! код локации для функции, получающей сумму ряда чисел от единицы до указанного значения</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token start-location"># summ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! в args[0] будет помещено число, которое мы укажем в качестве [аргумента 0]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">loop</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token sys-variable">args</span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">step</span><span class="token plain"> </span><span class="token sys-variable">args</span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token sys-variable">result</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token sys-variable">args</span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token end-location">---summ---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! пример вызова локации &quot;summ&quot;, как функции</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token builtin">func</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&quot;summ&quot;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">19</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! выведет на экран 190</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! пример вызова с записью названия локации в переменную</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$name_loc</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;summ&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token builtin">func</span><span class="token sign-punctuation">(</span><span class="token user-variable">$name_loc</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! выведет на экран 276</span><br></span></code></pre></div></div>
<p>Также см. <a class="" href="/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-syntaxems#%D1%81%D0%B8%D0%BC%D0%B2%D0%BE%D0%BB-%D0%BA%D0%BE%D0%BC%D0%BC%D0%B5%D1%80%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5-%D1%8D%D1%82-">&quot;Неявный вызов функции <code>FUNC</code>&quot;</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="getobj"><code>$GETOBJ</code><a href="#getobj" class="hash-link" aria-label="Прямая ссылка на getobj" title="Прямая ссылка на getobj" translate="no">​</a></h2>
<p><code>$GETOBJ</code> —  возвращает название предмета в <em>Окне предметов</em>, расположенного в заданной позиции. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$GETOBJ</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">номер</span><span class="token plain"> </span><span class="token user-variable">предмета</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>Индексация (нумерация) предметов в <em>Окне предметов</em> ведётся с 1. Если предмета с индексом <code>[#номер предмета]</code> не существует, возвращается пустая строка (<code>&#x27;&#x27;</code>).</p>
<p>Примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$getobj</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт название первого предмета в рюкзаке</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$getobj</span><span class="token sign-punctuation">(</span><span class="token builtin">countobj</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт название последнего добавленного предмета</span><br></span></code></pre></div></div>
<p>Код, подсчитывающий в массиве <code>OBJECTS</code> число предметов с одинаковым названием:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">loop</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> </span><span class="token user-variable">i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token user-variable">i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token builtin">countobj</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">step</span><span class="token plain"> </span><span class="token user-variable">i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token user-variable">objects</span><span class="token sign-punctuation">[</span><span class="token builtin">$getobj</span><span class="token sign-punctuation">(</span><span class="token user-variable">i</span><span class="token sign-punctuation">)</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="iif"><code>$IIF</code><a href="#iif" class="hash-link" aria-label="Прямая ссылка на iif" title="Прямая ссылка на iif" translate="no">​</a></h2>
<p><code>IIF</code> —  возвращает значение в зависимости от верности выражения.</p>
<p>Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">IIF</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">выражение</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">выражение_да</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">выражение_нет</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$IIF</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">выражение</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$выражение_да</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$выражение_нет</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>Если <code>[#выражение]</code> верно, возвращает значение выражения <code>[выражение_да]</code>, в противном случае возвращает значение выражения <code>[выражение_нет]</code>.</p>
<p>Из выражений <code>[выраажение_да]</code> и <code>[выражение_нет]</code> будет вычислено только одно, в зависимости от того, будет ли выполнено условие.</p>
<p>Примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">!Модуль числа</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">abs_x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">iif</span><span class="token sign-punctuation">(</span><span class="token user-variable">x</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">x</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token user-variable">x</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">!А следующая конструкция НЕ вызовет ошибку деления на ноль:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">y</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">iif</span><span class="token sign-punctuation">(</span><span class="token user-variable">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">/</span><span class="token user-variable">x</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! типичное решение для вывода времени, чтобы не терять ноль на часах:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$iif</span><span class="token sign-punctuation">(</span><span class="token user-variable">hour</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">9</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token builtin">$str</span><span class="token sign-punctuation">(</span><span class="token user-variable">hour</span><span class="token sign-punctuation">)</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token builtin">$str</span><span class="token sign-punctuation">(</span><span class="token user-variable">hour</span><span class="token sign-punctuation">)</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token builtin">$iif</span><span class="token sign-punctuation">(</span><span class="token user-variable">minute</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">9</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token builtin">$str</span><span class="token sign-punctuation">(</span><span class="token user-variable">minute</span><span class="token sign-punctuation">)</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token builtin">$str</span><span class="token sign-punctuation">(</span><span class="token user-variable">minute</span><span class="token sign-punctuation">)</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>Эквивалентность конструкций условия с оператором <code>IF</code> и функции <code>IIF</code>:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token user-variable">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">mod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Число чётное&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Число нечётное&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! эквивалентно</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token builtin">$iif</span><span class="token sign-punctuation">(</span><span class="token user-variable">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">mod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">,</span><span class="token string" style="color:#e3116c">&quot;Число чётное&quot;</span><span class="token sign-punctuation">,</span><span class="token string" style="color:#e3116c">&quot;Число не чётное&quot;</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="input"><code>$INPUT</code><a href="#input" class="hash-link" aria-label="Прямая ссылка на input" title="Прямая ссылка на input" translate="no">​</a></h2>
<p><code>$INPUT</code> —  возвращает инт ерпретатору введённый игроком текст, либо <code>&#x27;&#x27;</code> (пустая строка), если была нажата кнопка &quot;Отмена&quot;. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$INPUT</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$текст</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$текст]</code> — это приглашение в диалоговом окне, которое видит игрок. Например:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">$name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">$input</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;Как звать тебя, герой?&#x27;</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>При выполнении данной команды на экране появится диалоговое окно с текстом &quot;Как звать тебя, герой?&quot;, а выполнение остального кода приостановится, пока игрок не провзаимодействует с диалоговым окном.</p>
<p>Игрок может ввести или не ввести текст, и нажать кнопку &quot;ОК&quot; или &quot;Отмена&quot;. Если игрок ввёл текст и нажал кнопку &quot;ОК&quot;, функция <code>$input</code> вернёт переменной <code>$text</code> введённый игроком текст. Во всех остальных случаях после закрытия диалогового окна функция вернёт пустую строку (<code>&#x27;&#x27;</code>).</p>
<p>Другие примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! Вопрос с одним правильным ответом. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">$input</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;Что приходит после тьмы?&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;свет&#x27;</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">msg</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Все верно.&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">msg</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Ответ не верный.&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! Пример реализации вопроса с несколькими вариантами ответа из которых любой будет правильным.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$answer</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">$trim</span><span class="token sign-punctuation">(</span><span class="token builtin">$lcase</span><span class="token sign-punctuation">(</span><span class="token builtin">$input</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;Ответить&#x27;</span><span class="token sign-punctuation">)</span><span class="token sign-punctuation">)</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">instr</span><span class="token sign-punctuation">(</span><span class="token user-variable">$answer</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;красный&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">or</span><span class="token plain"> </span><span class="token builtin">instr</span><span class="token sign-punctuation">(</span><span class="token user-variable">$answer</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;желтый&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">or</span><span class="token plain"> </span><span class="token builtin">instr</span><span class="token sign-punctuation">(</span><span class="token user-variable">$answer</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;зеленый&#x27;</span><span class="token sign-punctuation">)</span><span class="token sign-punctuation">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">gt</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;win&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! Введя красный или зеленый ил желтый произойдет переход на локацию &#x27;win&#x27;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Будьте внимательны!</div><div class="admonitionContent_BuS1"><p>Допустимо, но не одобряется, использовать функцию для возвращения числовых значений:</p><div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">INPUT</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$приглашение</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div><p>Это может привести к различным ошибкам в игре, если игрок введёт в диалоговом окне не только цифры. Например:</p><div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">age</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token user-variable">input</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;Сколько вам лет?&#x27;</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div><p>Если игрок введёт вместо числа строку &quot;24 года&quot;, плеер выдаст ошибку <strong>101</strong> &quot;Несоответствие типов данных&quot;.</p><p>Подобные ситуации должен предусматривать автор игры, а значит правильно будет озаботиться проверкой введённого значения уже после того, как функция <code>$input</code> будет выполнена.</p><div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">loop</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> </span><span class="token user-variable">$text</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">! предлагаем игроку ответить на вопрос</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">! и присваиваем введённый текст переменной</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token user-variable">$text</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">$input</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;Сколько вам лет?&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">! если во введённом тексте содержатся не только цифры</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">! либо игрок не ввёл ответ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">isnum</span><span class="token sign-punctuation">(</span><span class="token user-variable">$text</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> </span><span class="token user-variable">$text</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">! игрок ввёл число</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token user-variable">age</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">val</span><span class="token sign-punctuation">(</span><span class="token user-variable">$text</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! устанавливаем возраст</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">jump</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;break&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! прерываем цикл</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">! игрок ничего не ввёл или ввёл некорректное значение</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">! цикл продолжается</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label">:break</span><br></span></code></pre></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="lcase"><code>$LCASE</code><a href="#lcase" class="hash-link" aria-label="Прямая ссылка на lcase" title="Прямая ссылка на lcase" translate="no">​</a></h2>
<p><code>$LCASE</code> —  возвращает строку маленьких букв, полученную изменением регистра букв исходной строки. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$LCASE</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$текст</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$текст]</code> — любая строка текста.</p>
<p>Примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$lcase</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;TExT#&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;text#&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$lcase</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;Привет, Алиса!&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;привет, алиса!&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$lcase</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;Я НЕ ХОЧУ НА ВАС ОРАТЬ.&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;я не хочу на вас орать.&#x27;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="maintxt"><code>$MAINTXT</code><a href="#maintxt" class="hash-link" aria-label="Прямая ссылка на maintxt" title="Прямая ссылка на maintxt" translate="no">​</a></h2>
<p><code>$MAINTXT</code> —  возвращает текст, выведенный в окно основного описания.</p>
<p>Данная функция может быть полезна для замены части текста в окне основного описания, либо иной обработке текста. Пример:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! изначально мы вывели строку</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Мы вывели на экран строку и в этой строке есть кусок, который мы хотим удалить.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! получаем текст из окна основного описания</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$text</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">$maintxt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! вырезаем лишний кусок</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$text_new</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">$replace</span><span class="token sign-punctuation">(</span><span class="token user-variable">$text</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; и в этой строке есть кусок, который мы хотим удалить&quot;</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! очищаем окно основного описания</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">*clr</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! выводим новый текст</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">*p</span><span class="token plain"> </span><span class="token user-variable">$text_new</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="max"><code>$MAX</code><a href="#max" class="hash-link" aria-label="Прямая ссылка на max" title="Прямая ссылка на max" translate="no">​</a></h2>
<p><code>MAX</code> —  возвращает максимальное из значений выражений-аргументов. Можно передавать от одного до двадцати значений/аргументов. Если передан один аргумент, то считается, что указано имя массива. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">MAX</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">выражение</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">выражение</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> ... </span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">выражение</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$MAX</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$выражение</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$выражение</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> ... </span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$выражение</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">MAX</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$название</span><span class="token plain"> </span><span class="token user-variable">массива</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$MAX</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$название</span><span class="token plain"> </span><span class="token user-variable">массива</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>Обратите внимание, при передаче одного аргумента поиск максимального элемента происходит среди строковых (если название массива указано со знаком <code>$</code>) или среди числовых значений элементов массива. Например:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">max</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт максимальное из числовых значений элементов массива &quot;a&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$max</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$b&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт максимальное из строковых значений элементов массива &quot;b&quot;</span><br></span></code></pre></div></div>
<p>Нельзя писать так и надеяться, что произойдёт поиск среди значений массива <code>a</code>:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">max</span><span class="token sign-punctuation">(</span><span class="token user-variable">a</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>Можно так:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">$b</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">max</span><span class="token sign-punctuation">(</span><span class="token user-variable">$b</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! произойдёт поиск максимального значения среди элементов массива &quot;a&quot;</span><br></span></code></pre></div></div>
<p>Другие примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">max</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">max</span><span class="token sign-punctuation">(</span><span class="token user-variable">a</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">b</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">c</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! вернёт максимальное из значений переменных a,b,c</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$max</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;aa&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ab&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;zz&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;zz&#x27;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="mid"><code>$MID</code><a href="#mid" class="hash-link" aria-label="Прямая ссылка на mid" title="Прямая ссылка на mid" translate="no">​</a></h2>
<p><code>$MID</code> —  позволяет вырезать из строки её часть. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$MID</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$строка</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">начало</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">длина</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$строка]</code> — это строка текста, именно из неё функция вырезает часть, начиная с символа номер <code>[#начало]</code>, и длиной в <code>[#длина]</code> символов. Нумерация символов начинается с 1.</p>
<ul>
<li class="">Если отсутствует параметр <code>[#длина]</code>, вырезается часть до конца строки.</li>
<li class="">Параметр <code>[#начало]</code> обязателен, и может в принципе принимать любые значения.</li>
<li class="">Если значение <code>[#начало]</code> превышает длину строки, возвращается пустая строка.</li>
</ul>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$mid</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;abcdef&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">)</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">    </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! &#x27;ab&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$mid</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;abcdef&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token sign-punctuation">)</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">    </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! &#x27;bcd&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$mid</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;abcdef&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">)</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">    </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! &#x27;bcdef&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$mid</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;abcdef&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain">        </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">    </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! &#x27;ошибка [120] — неверное число аргументов оператора/функции&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$mid</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;abcdef&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">)</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">    </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! &#x27;abcdef&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$mid</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;abcdef&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token sign-punctuation">)</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">    </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! &#x27;&#x27;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="min"><code>$MIN</code><a href="#min" class="hash-link" aria-label="Прямая ссылка на min" title="Прямая ссылка на min" translate="no">​</a></h2>
<p><code>MIN</code> —  возвращает минимальное из значений выражений-аргументов. Можно передавать от одного до двадцати значений/аргументов. Если передан один аргумент, то считается, что указано имя массива. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">MIN</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">выражение</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">выражение</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> ... </span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">выражение</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$MIN</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$выражение</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$выражение</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> ... </span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$выражение</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">MIN</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$название</span><span class="token plain"> </span><span class="token user-variable">массива</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$MIN</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$название</span><span class="token plain"> </span><span class="token user-variable">массива</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>Обратите внимание, при передаче одного аргумента поиск минимального элемента происходит среди строковых (если название массива указано со знаком <code>$</code>) или среди числовых значений элементов массива. Например:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">min</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт минимальное из числовых значений элементов массива &quot;a&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$min</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$b&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт минимальное из строковых значений элементов массива &quot;b&quot;</span><br></span></code></pre></div></div>
<p>Нельзя писать так:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">min</span><span class="token sign-punctuation">(</span><span class="token user-variable">a</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>Можно так:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">$b</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">min</span><span class="token sign-punctuation">(</span><span class="token user-variable">$b</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! произойдёт поиск максимального значения среди элементов массива &quot;a&quot;</span><br></span></code></pre></div></div>
<p>Другие примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">min</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">)</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">min</span><span class="token sign-punctuation">(</span><span class="token user-variable">a</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">b</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">c</span><span class="token sign-punctuation">)</span><span class="token plain">        </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт минимальное из значений переменных a,b,c</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$min</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;aa&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ab&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;zz&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;aa&#x27;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="qspver"><code>$QSPVER</code><a href="#qspver" class="hash-link" aria-label="Прямая ссылка на qspver" title="Прямая ссылка на qspver" translate="no">​</a></h2>
<p><code>$QSPVER</code> - возвращает версию интерпретатора в формате &quot;X.Y.Z Player&quot;. Например, классический плеер версии 5.8.0. возвращает значение &quot;5.8.0 (classic)&quot;, а qSpider просто &quot;5.8.0&quot;. Пример использования:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">$qspver</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5.8.0&quot;</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Ваша версия плеера не подходит для этой игры.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Установите плеер версии 5.8.0 или выше.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre></div></div>
<p>Так же данная функция может возвращать платформу, на которой запущена игра, если указать аргументом значение &quot;platform&quot;:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$qspver</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;platform&#x27;</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>5.7.0</div><div class="admonitionContent_BuS1"><p>В старых версиях плееров функция возвращала только версию интерпретатора (библиотеки libqsp).</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="replace"><code>$REPLACE</code><a href="#replace" class="hash-link" aria-label="Прямая ссылка на replace" title="Прямая ссылка на replace" translate="no">​</a></h2>
<p><code>$REPLACE</code> —  общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$REPLACE</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$строка</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$поиск</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$замена</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">число_замен</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>Данная функция заменяет в строке <code>[$строка]</code> несколько вхождений строки <code>[$поиск]</code> строкой <code>[$замена]</code> и возвращает результат. Замена производится слева-направо и только для непересекающихся вхождений. Параметр <code>[#число_замен]</code> показывает, сколько вхождений должно быть заменено. Если параметр не указан, производится замена всех вхождений. Если <code>[$замена]</code> отсутствует или указана пустая строка, то удаляет в исходной строке все вхождения искомой строки. Примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$replace</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;test&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;12&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;4&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! выведет на экран &#x27;test&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$replace</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;test&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;e&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;s&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! выведет на экран &#x27;tsst&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$replace</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;test&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;t&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;34&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! выведет на экран &#x27;34es34&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$replace</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;test&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;t&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain">        </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! выведет на экран &#x27;es&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$replace</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;test&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;t&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;qu&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! &#x27;quest&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$replace</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;test my test&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;t&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;q&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! &#x27;qesq my qest&#x27;</span><br></span></code></pre></div></div>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! можно присвоить значение переменной</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$text</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Строка текста с разными буквами.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! а новое значение вписать в другую переменную</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$text_new</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">$replace</span><span class="token sign-punctuation">(</span><span class="token user-variable">$text</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ст&quot;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;st&quot;</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token user-variable">$text</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token user-variable">$text_new</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="selact"><code>$SELACT</code><a href="#selact" class="hash-link" aria-label="Прямая ссылка на selact" title="Прямая ссылка на selact" translate="no">​</a></h2>
<p><code>$SELACT</code> —  возвращает название выделенного действия в любом месте игры.</p>
<p>Следует помнить, что выделение действия происходит при наведении на него указателя мыши, а не при непосредственном нажатии.</p>
<p>Наиболее часто эту функцию используют, чтобы удалить текущее действие:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">act</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Съесть яблоко&quot;</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Это было очень вкусное яблоко. Жаль, что червивое.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token user-variable">здоровье</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">delact</span><span class="token plain"> </span><span class="token builtin">$selact</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre></div></div>
<p>Так же смотрите примеры использования в разделе <a class="" href="/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-sys-var#onactsel"><code>$onactsel</code></a></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="selobj"><code>$SELOBJ</code><a href="#selobj" class="hash-link" aria-label="Прямая ссылка на selobj" title="Прямая ссылка на selobj" translate="no">​</a></h2>
<p><code>$SELOBJ</code> —  возвращает название выделенного предмета в любом месте игры. Выделение предмета происходит в момент нажатия (щелчка мышью по предмету) и не снимается до применения команды <code>unselect</code>.</p>
<p>Пример использования можно посмотреть в разделе <a class="" href="/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-sys-var#onobjsel"><code>$onobjsel</code></a></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="stattxt"><code>$STATTXT</code><a href="#stattxt" class="hash-link" aria-label="Прямая ссылка на stattxt" title="Прямая ссылка на stattxt" translate="no">​</a></h2>
<p><code>$STATTXT</code> —  возвращает текст, выведенный в окно дополнительного описания. Может быть полезна для замены части текста в окне дополнительного описания.</p>
<p>Пример:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">p</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Вёз Корабль Карамель&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">nl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Наскочил Корабль На Мель&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$string</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">$stattxt</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="str"><code>$STR</code><a href="#str" class="hash-link" aria-label="Прямая ссылка на str" title="Прямая ссылка на str" translate="no">​</a></h2>
<p><code>$STR</code> —  возвращает строку текста, полученную переводом числа в строку. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$STR</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">число</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>Пример:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$str</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">56</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! превратит число 56 в строку &quot;56&quot; и выведет на экран</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="strfind"><code>$STRFIND</code><a href="#strfind" class="hash-link" aria-label="Прямая ссылка на strfind" title="Прямая ссылка на strfind" translate="no">​</a></h2>
<p><code>$STRFIND</code> —  возвращает подстроку, соответствующую регулярному выражению, из указанной строки. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$STRFIND</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$строка</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$шаблон</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">номер</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$строка]</code> — исходная строка, в которой производим поиск вхождения, соответствующего регулярному выражению <code>[$шаблон]</code>, или группе номер <code>[#номер]</code> в регулярном выражении. Если подстрока с указанным номером отсутствует, то возвращается пустая строка. Нумерация групп подстрок начинается с 1. Если параметр <code>[#номер]</code> отсутствует, или равен 0, то возвращается подстрока, соответствующая всему регулярному выражению <code>[$шаблон]</code>.</p>
<p>Например, возьмём регулярное выражение:</p>
<div class="language-regex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-regex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token anchor function" style="color:#d73a49">^</span><span class="token group punctuation" style="color:#393A34">(</span><span class="token char-set class-name">\S</span><span class="token quantifier number" style="color:#36acaa">+</span><span class="token group punctuation" style="color:#393A34">)</span><span class="token char-set class-name">\s</span><span class="token group punctuation" style="color:#393A34">(</span><span class="token char-set class-name">\S</span><span class="token quantifier number" style="color:#36acaa">+</span><span class="token group punctuation" style="color:#393A34">)</span><span class="token char-set class-name">\s</span><span class="token group punctuation" style="color:#393A34">(</span><span class="token char-set class-name">\S</span><span class="token quantifier number" style="color:#36acaa">+</span><span class="token group punctuation" style="color:#393A34">)</span><span class="token anchor function" style="color:#d73a49">$</span><br></span></code></pre></div></div>
<p>Метасимвол <code>\S</code> означает любой непробельный символ, а квантификатор <code>+</code> указывает, что непробельные символы должны присутствовать один или более раз. Таким образом запись <code>\S+</code> можно условно сопоставить слову. Каждое слово с помощью скобок <code>()</code> выделено в отдельную группу, а между группами присутствуют пробельные символы <code>\s</code>. Метасимволы <code>^</code> и <code>$</code> означают соответственно начало и конец строки. Таким образом наше регулярное выражение соответствует любой строке из трёх слов, разделённых пробелами.</p>
<p>Тогда:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! в этом случае строка не соответствует регулярному выражению</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! потому что согласно регулярному выражению строка должна начинаться</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! с группы непробельных символов. Команда вернёт пустую строку &#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27; идти к пещере&#x27;</span><span class="token sign-punctuation">,</span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)\s(\S+)$&#x27;</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! в данном случае строка полностью соответствует регулярному выражению</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! а значит команда вернёт строку полностью &#x27;идти к пещере&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к пещере&#x27;</span><span class="token sign-punctuation">,</span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)\s(\S+)$&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><br></span></code></pre></div></div>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! в следующих трёх примерах строка соответствует регулярному выражению</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! однако третий аргумент указывает, какую именно группу из этого</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! регулярного выражения мы хотим получить, поэтому каждая команда вернёт</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! соответственно первое, второе и третье слова из строки</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к пещере&#x27;</span><span class="token sign-punctuation">,</span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)\s(\S+)$&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;идти&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к пещере&#x27;</span><span class="token sign-punctuation">,</span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)\s(\S+)$&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;к&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к пещере&#x27;</span><span class="token sign-punctuation">,</span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)\s(\S+)$&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;пещере&#x27;</span><br></span></code></pre></div></div>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! здесь последняя группа непробельных символов объединена в одну</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! группу с последним пробельным символом. Квантификатор &quot;?&quot; указывает,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! что эта группа может как присутствовать в строке, так и отсутствовать:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к пещере&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)(\s(\S+))?$&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;пещере&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к пещере&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)(\s(\S+))?$&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27; пещере&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! этому же регулярному выражению соответствует и такая строка</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;искать ключ&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)(\s(\S+))?$&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;искать&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! а вот эта строка уже не соответствует регулярному выражению</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;искать&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)(\s(\S+))?$&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;&#x27;</span><br></span></code></pre></div></div>
<p>Следующие примеры показывают, как <code>$strfind</code> возвращает часть строки, соответствующую регулярному выражению:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к дому&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;к\s(\S+)&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;к дому&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к дому&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;к\s(\S+)&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;дому&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к своему дому&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;к\s(\S+)&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;своему&#x27;</span><br></span></code></pre></div></div>
<p>Другие примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">слово из четырёх букв</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к пещере&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\b\w{4}\b&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! на экране увидим &#x27;идти&#x27;</span><br></span></code></pre></div></div>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Выборка с вложенными группами</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;+33-671-190-23-999&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\+\d{1,2}-(\d{3})((-\d+)+)&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! на экране увидим &#x27;671&#x27; </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;+33-671-190-23-999&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\+\d{1,2}-(\d{3})((-\d+)+)&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! на экране увидим &#x27;-190-23-999&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;+33-671-190-23-999&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\+\d{1,2}-(\d{3})((-\d+)+)&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! на экране увидим &#x27;-999&#x27;</span><br></span></code></pre></div></div>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">ищем числа в строке без чисел</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$strfind</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;Восемь зелёных яблок в корзине&#x27;</span><span class="token sign-punctuation">,</span><span class="token string" style="color:#e3116c">&#x27;\d+&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! на экране будет пустая строка</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="trim"><code>$TRIM</code><a href="#trim" class="hash-link" aria-label="Прямая ссылка на trim" title="Прямая ссылка на trim" translate="no">​</a></h2>
<p><code>$TRIM</code> —  возвращает указанную строку без прилегающих символов табуляции и пробелов. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$TRIM</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$выражение</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>Например:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$trim</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;     trim test        &#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;trim test&#x27;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="ucase"><code>$UCASE</code><a href="#ucase" class="hash-link" aria-label="Прямая ссылка на ucase" title="Прямая ссылка на ucase" translate="no">​</a></h2>
<p><code>$UCASE</code> —  возвращает строку больших букв, полученную изменением регистра букв исходной строки. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$UCASE</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$текст</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$текст]</code> — любая строка текста.</p>
<p>Примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$ucase</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;TExT#&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;TEXT#&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$ucase</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;Привет, Алиса!&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;ПРИВЕТ, АЛИСА!&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">$ucase</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;Я хочу на вас орать.&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! вернёт &#x27;Я ХОЧУ НА ВАС ОРАТЬ.&#x27;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="user_text"><code>$USER_TEXT</code><a href="#user_text" class="hash-link" aria-label="Прямая ссылка на user_text" title="Прямая ссылка на user_text" translate="no">​</a></h2>
<p><code>$USER_TEXT</code> —  в любом месте игры возвращает текст, который находится в строке ввода (поле ввода). Имеет краткую форму <code>$usrtxt</code>.</p>
<p>Пример действия, по нажатию на которое в окно дополнительного описания будет выводиться текст, введённый в строку ввода:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">act</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Что я написал?&quot;</span><span class="token sign-punctuation">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">pl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Я написал: &quot;&lt;&lt;$user_text&gt;&gt;&quot;.&#x27;</span><br></span></code></pre></div></div>
<p>Более распространённый пример представлен в разделе <a class="" href="/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-sys-var#usercom"><code>$usercom</code></a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="arrcomp">ARRCOMP<a href="#arrcomp" class="hash-link" aria-label="Прямая ссылка на ARRCOMP" title="Прямая ссылка на ARRCOMP" translate="no">​</a></h2>
<p><code>ARRCOMP</code> —  возвращает индекс элемента массива, соответствующего регулярному выражению. Поиск начинается с элемента с заданным номером; индексация элементов массива ведётся с нуля. Если указанное значение не найдено, функция возвращает -1. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">ARRCOMP</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$имя_массива</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$шаблон</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">начало</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[#начало]</code> — номер элемента массива, с которого следует начать поиск, <code>[$имя_массива]</code> — название массива, по которому нужно произвести поиск, <code>[$шаблон]</code> — регулярное выражение, с которым будет сравниваться искомый элемент.</p>
<ul>
<li class="">Параметр <code>[#начало]</code> может отсутствовать, при этом его значение принимается равным 0.</li>
<li class="">Поиск работает только по текстовым массивам (символ <code>$</code> в названии массива можно опустить).</li>
</ul>
<p>Для примера возьмём вот такой массив:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">$mass</span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;топаю вперёд&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$mass</span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; иду в пещеру&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$mass</span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;не иду  в пещеру&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$mass</span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">3</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;топаю к дому&quot;</span><br></span></code></pre></div></div>
<p>Нам нужно найти элемент, значение которого состоит из трёх слов. В грубом приближении слово — это набор из одного или более непробельных символов <code>\S+</code>, по бокам от которого могут стоять или не стоять символы пробела <code>\s</code>, отсюда мы можем составить вот такое регулярное выражение:</p>
<div class="language-regex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-regex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token char-set class-name">\s</span><span class="token quantifier number" style="color:#36acaa">?</span><span class="token char-set class-name">\S</span><span class="token quantifier number" style="color:#36acaa">+</span><span class="token char-set class-name">\s</span><span class="token char-set class-name">\S</span><span class="token quantifier number" style="color:#36acaa">+</span><span class="token char-set class-name">\s</span><span class="token char-set class-name">\S</span><span class="token quantifier number" style="color:#36acaa">+</span><span class="token char-set class-name">\s</span><span class="token quantifier number" style="color:#36acaa">?</span><br></span></code></pre></div></div>
<p>Остаётся только выяснить какой элемент массива соответсвует шаблону:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">arrcomp</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$mass&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\s?\S+\s\S+\s\S+\s?&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! этому выражению соответствует первый элемент</span><br></span></code></pre></div></div>
<p>Если мы хотим проигнорировать первый элемент и начать поиск со второго:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">arrcomp</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$mass&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\s?\S+\s\S+\s\S+\s?&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! этому выражению соответствует третий элемент</span><br></span></code></pre></div></div>
<p>А вот так мы можем вывести на экран значения всех элементов, содержащих слово &quot;иду&quot;:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">loop</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> </span><span class="token user-variable">pos</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">index</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token user-variable">index</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">arrcomp</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$mass&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;(.*\s|^)иду(\s.*|$)&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">pos</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token user-variable">index</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token user-variable">$mass</span><span class="token sign-punctuation">[</span><span class="token user-variable">index</span><span class="token sign-punctuation">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token user-variable">pos</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token user-variable">index</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">jump</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;break&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label">:break</span><br></span></code></pre></div></div>
<p>Другие примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! Поиск строки &#x27;This&#x27; среди элементов массива &quot;$A&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">arrcomp</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$A&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;This&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! Поиск строки, соответствующей регулярному выражению &quot;abc\d+&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! (первые два элемента массива игнорируются)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">arrcomp</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$A&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;abc\d+&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! аналогично предыдущему примеру,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! но поиск осуществляется по всем элементам массива</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">arrcomp</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$A&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;.*string.*&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">arrcomp</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$A&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;This&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! эквивалентно 1му варианту</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Внимание!</div><div class="admonitionContent_BuS1"><p>Функция возвращает только числовой индекс элемента. Строковый или многомерный индекс с помощью данной функции получить нельзя.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="arritem">ARRITEM<a href="#arritem" class="hash-link" aria-label="Прямая ссылка на ARRITEM" title="Прямая ссылка на ARRITEM" translate="no">​</a></h2>
<p><code>ARRITEM</code> — возвращает значение элемента массива под указанным индексом. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">ARRITEM</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$имя_массива</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">индекс_элемента</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$имя_массива]</code> — это название массива, элемент которого мы хотим получить, а <code>[индекс_элемента]</code> — числовой, текстовый или многомерный индекс.</p>
<p>Иными словами функция извлекает значение из указанной ячейки массива. Примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! выводим значение элемента с индексом 3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token builtin">$arritem</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$mass&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! выводим значение элемента с текстовым индексом</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token builtin">$arritem</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$mass&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Петя&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! выводим значение элемента с многомерным индексом</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token builtin">$arritem</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$mass&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>Эта функция может быть полезна для извлечения значений, если имя массива заранее не известно. Пример:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Выводим содержимое нескольких массивов без использования DYNAMIC</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">$array_name</span><span class="token sign-punctuation">[</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;mass_1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$array_name</span><span class="token sign-punctuation">[</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;mass_2&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$array_name</span><span class="token sign-punctuation">[</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;mass_3&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$array_name</span><span class="token sign-punctuation">[</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;mass_4&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$array_name</span><span class="token sign-punctuation">[</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;mass_5&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! внешний цикл перебирает имена массивов</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">loop</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> </span><span class="token user-variable">j</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token user-variable">j</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token builtin">arrsize</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$array_name&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">step</span><span class="token plain"> </span><span class="token user-variable">j</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">! внутренний цикл выводит содержимое массивов</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">loop</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> </span><span class="token user-variable">i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token user-variable">i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token builtin">arrsize</span><span class="token sign-punctuation">(</span><span class="token user-variable">$array_name</span><span class="token sign-punctuation">[</span><span class="token user-variable">j</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">step</span><span class="token plain"> </span><span class="token user-variable">i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token builtin">arritem</span><span class="token sign-punctuation">(</span><span class="token user-variable">$array_name</span><span class="token sign-punctuation">[</span><span class="token user-variable">j</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">i</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="arrpack">ARRPACK<a href="#arrpack" class="hash-link" aria-label="Прямая ссылка на ARRPACK" title="Прямая ссылка на ARRPACK" translate="no">​</a></h2>
<p><code>ARRPACK</code> — возвращает кортеж, в который упакованы значения из указанного массива.</p>
<p>Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">ARRPACK</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$имя_массива</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">начальный_индекс</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">количество</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[#начальный_индекс]</code> - это номер элемента массива <code>[$имя_массива]</code>, с которого нужно начать отбор элементов для упаковки; <code>[#количество]</code> — это число элементов, которое будет упаковано в кортеж.</p>
<p>Данная функция позволяет сократить команду извлечения аргументов из <code>args</code>:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! вместо:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> </span><span class="token user-variable">type</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token sys-variable">args</span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sys-variable">args</span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! можно написать так:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> </span><span class="token user-variable">type</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token user-variable">arrpack</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;args&#x27;</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>Ещё она может быть удобна, если нужно быстро просмотреть содержимое массива или его части:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! просматриваем значения в массиве без использования цикла:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token user-variable">arrpack</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;massive&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! увидим на экране десять элементов, начиная с 11-го, в виде кортежа</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="arrpos">ARRPOS<a href="#arrpos" class="hash-link" aria-label="Прямая ссылка на ARRPOS" title="Прямая ссылка на ARRPOS" translate="no">​</a></h2>
<p><code>ARRPOS</code> — возвращает индекс элемента массива, равного указанному значению. Поиск начинается с элемента с заданным номером; индексация элементов массива ведётся с нуля. Если указанное значение не найдено, функция возвращает -1.</p>
<p>Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">ARRPOS</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$имя_массива</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">значение</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">начало</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[#начало]</code> — номер элемента массива, с которого следует начать поиск, <code>[$имя_массива]</code> — название массива, по которому нужно произвести поиск, <code>[значение]</code> — число, или строка (в зависимости от типа массива), которое нужно найти в массиве.</p>
<p>Для примера возьмём такой массив:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">$color</span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;красный&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$color</span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;жёлтый&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$color</span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;зелёный&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$color</span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">3</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;синий&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$color</span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">4</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;жёлтый&#x27;</span><br></span></code></pre></div></div>
<p>Нам нужно найти элемент со значением &quot;жёлтый&quot;:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">arrpos</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$color&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;жёлтый&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт значение 1</span><br></span></code></pre></div></div>
<p>Если мы хотим проигнорировать первые два элемента:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">arrpos</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$color&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;жёлтый&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт значение 4</span><br></span></code></pre></div></div>
<p>Если мы хотим найти элемент со значением, которого нет в массиве:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">arrpos</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$color&#x27;</span><span class="token sign-punctuation">,</span><span class="token string" style="color:#e3116c">&#x27;голубой&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт значение -1</span><br></span></code></pre></div></div>
<p>Другие примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! поиск строки &#x27;this&#x27; в текстовом массиве &quot;$a&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">arrpos</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$a&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;this&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! поиск числа 65 в массиве &quot;a&quot; (два элемента массива игнорируются)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">arrpos</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">65</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! поиск строки &#x27;test&#x27; среди значений массива &quot;$b&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">arrpos</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$b&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;test&#x27;</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Внимание!</div><div class="admonitionContent_BuS1"><p>Функция возвращает только числовой индекс элемента. Строковый или многомерный индекс с помощью данной функции получить нельзя.</p></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>5.7.0</div><div class="admonitionContent_BuS1"><p>В более старых версиях плеера параметр <code>[#начало]</code> указывался первым:</p><div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">ARRPOS</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">начало</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$имя_массива</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$шаблон</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="arrtype">ARRTYPE<a href="#arrtype" class="hash-link" aria-label="Прямая ссылка на ARRTYPE" title="Прямая ссылка на ARRTYPE" translate="no">​</a></h2>
<p><code>ARRTYPE</code> — возвращает тип значения, хранящегося в переменной, или указанной ячейке массива. Тип возвращается в виде одного из следующих значений:</p>
<ul>
<li class=""><code>&#x27;&#x27;</code> (пустая строка) — значение не определено (например, для неинициализированных переменных);</li>
<li class=""><code>&#x27;#&#x27;</code> — переменная содержит число;</li>
<li class=""><code>&#x27;$&#x27;</code> — переменная содержит строку;</li>
<li class=""><code>&#x27;%&#x27;</code> — переменная содержит кортеж.</li>
</ul>
<p>Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">ARRTYPE</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$имя_массива</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">индекс</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$имя_массива]</code> — название массива (префикс типа роли не играет, лучше не указывать); <code>[индекс]</code> — индекс ячейки, тип значения которой мы хотим получить.</p>
<p>Примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">$ddd</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;text&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">arrtype</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;ddd&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! &#x27;$&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$g</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;text&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token user-variable">g</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">arrtype</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;g&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! &#x27;#&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">%tuple</span><span class="token sign-punctuation">[</span><span class="token string" style="color:#e3116c">&#x27;index&#x27;</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token number" style="color:#36acaa">12</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token sign-punctuation">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">arrtype</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;tuple&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;index&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! &#x27;%&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! $empty not exist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">arrtype</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$empty&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token quoted-comment comment" style="color:#999988;font-style:italic">! &#x27;&#x27;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="arrsize">ARRSIZE<a href="#arrsize" class="hash-link" aria-label="Прямая ссылка на ARRSIZE" title="Прямая ссылка на ARRSIZE" translate="no">​</a></h2>
<p><code>ARRSIZE</code> —  функция возвращает число элементов массива. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">ARRSIZE</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$имя_массива</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$имя_массива]</code> — название массива, размер которого хотим получить.</p>
<p>Не имеет значения, указываете ли вы <strong><code>$</code></strong> перед названием массива или нет. Подсчитывается общее число ячеек и со строковыми, и с числовыми значениями. Для примера:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">n</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">ARRSIZE</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;a&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">n</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">ARRSIZE</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;$a&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! Результат будет одинаковый</span><br></span></code></pre></div></div>
<p>:::[warning] Внимание!</p>
<p>Если массив был объявлен с помощью оператора <code>LOCAL</code>, но ни одному элементу массива не было присвоено значение, <code>ARRSIZE</code> такого массива вернёт <code>0</code>.</p>
<p>:::</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="countobj">COUNTOBJ<a href="#countobj" class="hash-link" aria-label="Прямая ссылка на COUNTOBJ" title="Прямая ссылка на COUNTOBJ" translate="no">​</a></h2>
<p><code>COUNTOBJ</code> —  возвращает количество предметов в инвентаре.</p>
<p>Номер последнего предмета в списке численно совпадает с количеством предметов, поэтому всегда можно получить название последнего предмета так:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">$getobj</span><span class="token sign-punctuation">(</span><span class="token builtin">countobj</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="instr">INSTR<a href="#instr" class="hash-link" aria-label="Прямая ссылка на INSTR" title="Прямая ссылка на INSTR" translate="no">​</a></h2>
<p><code>INSTR</code> —  возвращает номер символа, с которого начинается вхождение подстроки в строку. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">INSTR</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$строка</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$подстрока</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">начало</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[#начало]</code> — это номер символа, с которого нужно начинать поиск, <code>[$строка]</code> — это текстовое значение (строка), по которому нужно производить поиск, а <code>[$подстрока]</code> — значение, которое мы ищем в указанной строке. Нумерация символов начинается с <code>1</code>. Параметр <code>[#начало]</code> может отсутствовать, при этом он принимается равным <code>1</code>.</p>
<p>Примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">instr</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;abcdefabcdef&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;bc&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token sign-punctuation">)</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт число 8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">instr</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;abcdefghijklm&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;abc&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт число 1</span><br></span></code></pre></div></div>
<p>Если ни одного вхождения указанной подстроки в строке нет, <code>instr</code> возвращает <code>0</code>.</p>
<p>Пример:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">instr</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;В ася вышел из дома.&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;идти&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 0</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>5.7.0</div><div class="admonitionContent_BuS1"><p>В более старых версиях плеера параметр <code>[#начало]</code> указывался первым:</p><div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">INSTR</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">начало</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$строка</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$подстрока</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="isnum">ISNUM<a href="#isnum" class="hash-link" aria-label="Прямая ссылка на ISNUM" title="Прямая ссылка на ISNUM" translate="no">​</a></h2>
<p><code>ISNUM</code> —  функция возвращает <code>1</code> (истина), если переданная строка является числом, и  — <code>0</code>, если строка не является числом. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">ISNUM</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$строка</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$строка]</code> — любая строка текста.</p>
<p>При проверке учитываются знак <code>-</code> в начале, прилегающие пробелы и символы табуляции, но кроме того, ес ли хотя бы один символ окажется не цифрой, функция вернёт <code>0</code> (ложь).</p>
<p>Примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">isnum</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27; 9999 &#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">isnum</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27; -888&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">isnum</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;777a6&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! верн ёт 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">isnum</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain">       </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 0, т.к. пустая строка не содержит числа</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="isplay">ISPLAY<a href="#isplay" class="hash-link" aria-label="Прямая ссылка на ISPLAY" title="Прямая ссылка на ISPLAY" translate="no">​</a></h2>
<p><code>ISPLAY</code> —  функция проверяет, проигрывается ли в данный момент файл с указанным названием, и если проигрывается, возвращает <code>1</code>. В противном случае функция возвращает <code>0</code>. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">ISPLAY</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$путь_к_файлу</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$путь_к_файлу]</code> — путь к звуковому  файлу относительно файла игры.</p>
<p>Пример:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">isplay</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;music/mountsound.mp3&#x27;</span><span class="token sign-punctuation">)</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Проигрывается музыка.&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">*pl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Музыка не проигрывается.&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="len">LEN<a href="#len" class="hash-link" aria-label="Прям ая ссылка на LEN" title="Прямая ссылка на LEN" translate="no">​</a></h2>
<p><code>LEN</code> —  возвращает длину указанной строки текста (количество символов). Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">LEN</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$текст</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$текст]</code> — любое текстовое значение.</p>
<p>Примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">len</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&quot;abc&quot;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт значение 3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">len</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&quot;тысячадевятьсотвосьмидесятидевятимиллиметровый&quot;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт значение 46</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">len</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт значение 0</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="msecscount">MSECSCOUNT<a href="#msecscount" class="hash-link" aria-label="Прямая ссылка на MSECSCOUNT" title="Прямая ссылка на MSECSCOUNT" translate="no">​</a></h2>
<p><code>MSECSCOUNT</code> —  возвращает количество миллисекунд, прошедших с момента начала игры. Данная функция при использовании на локации-счётчике позволяет организовывать различные события, происходящие в реальном времени. Так же, с помощью этой функции можно делать замеры быстродействия различных участков кода в вашей игре:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">old_time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">msecscount</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token label">:for</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token user-variable">i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100000</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token user-variable">d</span><span class="token sign-punctuation">[</span><span class="token user-variable">i</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token user-variable">i</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token user-variable">i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">jump</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;for&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">new_time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">msecscount</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">pl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Скорость работы старого цикла: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">$str</span><span class="token sign-punctuation">(</span><span class="token user-variable">new_time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token user-variable">old_time</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">old_time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">msecscount</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">loop</span><span class="token plain"> </span><span class="token user-variable">i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token user-variable">i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100000</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">step</span><span class="token plain"> </span><span class="token user-variable">i</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token user-variable">b</span><span class="token sign-punctuation">[</span><span class="token user-variable">i</span><span class="token sign-punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token user-variable">i</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">new_time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">msecscount</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">pl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Скорость работы нового цикла: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">$str</span><span class="token sign-punctuation">(</span><span class="token user-variable">new_time</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token user-variable">old_time</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>примечание</div><div class="admonitionContent_BuS1"><p>Максимальное число, которое может вернуть данная функция, это <code>2147483647</code>. Не трудно посчитать, что этого хватит более, чем на <strong>550</strong> часов игры.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="rand">RAND<a href="#rand" class="hash-link" aria-label="Прямая ссылка на RAND" title="Прямая ссылка на RAND" translate="no">​</a></h2>
<p><code>RAND</code> —  возвращает случайное число между двумя указанными числами. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">RAND</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">выражение</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">выражение</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">мода</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[#выражение 1]</code> и <code>[#выражение 2]</code> — два любых числа или числовых выражения.</p>
<p>Параметр <code>[#мода]</code> позволяет указать число, которое должно выпадать более часто, чем остальные. При этом распределение частоты выпадения будет плавно изменяться для всех остальных чисел, уменьшаясь от моды к пределам выбранного интервала. Если 3й параметр не указан, то функция возвращает случайное число в заданном диапазоне с равномерным/равновероятным распределением чисел.</p>
<p>Параметр <code>[#выражение 2]</code> может отсутствовать, при этом он принимается равным <code>1</code>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>5.7.0</div><div class="admonitionContent_BuS1"><p>В более старых версиях плеера, данный параметр по умолчанию равен нулю.</p></div></div>
<p>Примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">rand</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! вернёт случайное значение от 1 до 4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">rand</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">4</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! вернёт случайное значение от 1 до 4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">rand</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! вернёт случайное значение от 1 до 1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">rand</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! вернёт случайное значение от 1 до 1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">RAND</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! чаще будет выпадать 500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">RAND</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! чаще будет выпадать 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">RAND</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! чаще будет выпадать 1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">RAND</span><span class="token sign-punctuation">(</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1000</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">500</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! чаще будет выпадать -500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">RAND</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! чаще будет выпадать 1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">x</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">RAND</span><span class="token sign-punctuation">(</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1000</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">100</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">5000</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! чаще будет выпадать -1000</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="rgb">RGB<a href="#rgb" class="hash-link" aria-label="Прямая ссылка на RGB" title="Прямая ссылка на RGB" translate="no">​</a></h2>
<p><code>RGB</code> —  возвращает числовой код цвета на основе трёх числовых аргумнтов, каждый из которых соответствует составляющей требуемого цвета. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">RGB</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">красный</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">зел</span><span class="token plain">ё</span><span class="token user-variable">ный</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">синий</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">альфа</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[#красный]</code>,<code>[#зелёный]</code> и <code>[#синий]</code> — числовое выражение трёх составляющих цвета соответственно красной, зелёной и синей; <code>[#альфа]</code> — составляющая прозрачности; должны принимать значения от 0 до 255.</p>
<p>Данная функция обычно используется совместно с системными переменными <code>bcolor</code>, <code>fcolor</code>, <code>lcolor</code>. Пример:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! гиперссылки светло-жёлтого цвета</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token sys-variable">lcolor</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">rgb</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">255</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">255</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! фон тёмно-серого цвета</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token sys-variable">bcolor</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">rgb</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">25</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">25</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">25</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">! текст светло-зелёного цвета</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token sys-variable">fcolor</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">rgb</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">100</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">255</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>Пример полупрозрачного цвета ссылок:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token sys-variable">lcolor</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">rgb</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">255</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">255</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">128</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Примечание.</div><div class="admonitionContent_BuS1"><p>Не стоит полагаться на параметр <code>[#альфа]</code> так как многие плееры его не поддерживают.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="rnd">RND<a href="#rnd" class="hash-link" aria-label="Прямая ссылка на RND" title="Прямая ссылка на RND" translate="no">​</a></h2>
<p><code>RND</code> - возвращает случайное значение от <code>1</code> до <code>1000</code>. Аналогично команде:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">rand</span><span class="token sign-punctuation">(</span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="strcomp">STRCOMP<a href="#strcomp" class="hash-link" aria-label="Прямая ссылка на STRCOMP" title="Прямая ссылка на STRCOMP" translate="no">​</a></h2>
<p><code>STRCOMP</code> —  проводит сравнение строки с регулярным выражением и, если строка соответствует регулярному выражению, возвращает <code>1</code> (истина), а если не соответствует — <code>0</code> (ложь). Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">STRCOMP</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$строка</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$шаблон</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$строка]</code> — любое текстовое значение, <code>[$шаблон]</code> — регулярное выражение, с которым производится сравнение.</p>
<p>Например, нам нужно проверить, состоит ли указанная строка из трёх слов. Каждое слово, в грубом виде, это набор непробельных символов, значит мы можем воспользоваться метасимволом <code>\S</code> с квантификатором <code>+</code>. Слова обычно разделены пробельными символами, для чего мы используем метасимвол <code>\s</code>. Получается вот такое регулярное выражение:</p>
<div class="language-regex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-regex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token char-set class-name">\s</span><span class="token quantifier number" style="color:#36acaa">?</span><span class="token char-set class-name">\S</span><span class="token quantifier number" style="color:#36acaa">+</span><span class="token char-set class-name">\s</span><span class="token quantifier number" style="color:#36acaa">+</span><span class="token char-set class-name">\S</span><span class="token quantifier number" style="color:#36acaa">+</span><span class="token char-set class-name">\s</span><span class="token quantifier number" style="color:#36acaa">+</span><span class="token char-set class-name">\S</span><span class="token quantifier number" style="color:#36acaa">+</span><span class="token char-set class-name">\s</span><span class="token quantifier number" style="color:#36acaa">?</span><br></span></code></pre></div></div>
<p>Теперь мы можем проверить, какие строки соответствуют этому регулярному выражению:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">strcomp</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;иду по дороге&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\s?\S+\s+\S+\s+\S+\s?&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">strcomp</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27; иду домой&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\s?\S+\s+\S+\s+\S+\s?&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">strcomp</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27; иду в лес &#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\s?\S+\s+\S+\s+\S+\s?&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">strcomp</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;однословие&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\s?\S+\s+\S+\s+\S+\s?&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 0</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="strpos">STRPOS<a href="#strpos" class="hash-link" aria-label="Прямая ссылка на STRPOS" title="Прямая ссылка на STRPOS" translate="no">​</a></h2>
<p><code>STRPOS</code> —  возвращает позицию символа, с которого начинается вхождение подстроки, соответствующей регулярному выражению, в указанную строку. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$строка</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token user-variable">$шаблон</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token sign-punctuation">[</span><span class="token plain">#</span><span class="token user-variable">номер</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$строка]</code> — исходная строка, в которой производим поиск вхождения, соответствующего регулярному выражению <code>[$шаблон]</code>, или группе номер <code>[#номер]</code> в регулярном выражении. Нумерация групп в регулярном выражении начинается с 1. Если подстрока с указанным номером отсутствует, то возвращается <code>0</code>.</p>
<p>Если параметр <code>[#номер]</code> отсутствует или равен <code>0</code>, то возвращается позиция символа, с которого начинается вхождение подстроки, соответствующей всему регулярному выражению.</p>
<p>Например, нам нужно выяснить, в какой части текста встречается словосочетание &quot;зелёное яблоко&quot;, однако при этом не должно быть важно, в каком падеже записано это прилагательное.</p>
<p>Чтобы написать регулярное выражение для этой задачи, нам нужно предусмотреть все падежи:</p>
<div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">зелёное яблоко</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">зелёного яблока</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">зелёному яблоку</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">зелёное яблоко</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">зелёным яблоком</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">зелёном яблоке</span><br></span></code></pre></div></div>
<p>Как видим, во всех формах меняются только окончания слов. Поэтому мы можем составить вот такое регулярное выражение:</p>
<div class="language-regex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-regex codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">зелён</span><span class="token group punctuation" style="color:#393A34">(</span><span class="token plain">ое</span><span class="token alternation keyword" style="color:#00009f">|</span><span class="token plain">ого</span><span class="token alternation keyword" style="color:#00009f">|</span><span class="token plain">ому</span><span class="token alternation keyword" style="color:#00009f">|</span><span class="token plain">ым</span><span class="token alternation keyword" style="color:#00009f">|</span><span class="token plain">ом</span><span class="token group punctuation" style="color:#393A34">)</span><span class="token char-set class-name">\s</span><span class="token quantifier number" style="color:#36acaa">+</span><span class="token plain">яблок</span><span class="token group punctuation" style="color:#393A34">(</span><span class="token plain">о</span><span class="token alternation keyword" style="color:#00009f">|</span><span class="token plain">а</span><span class="token alternation keyword" style="color:#00009f">|</span><span class="token plain">у</span><span class="token alternation keyword" style="color:#00009f">|</span><span class="token plain">ом</span><span class="token alternation keyword" style="color:#00009f">|</span><span class="token plain">е</span><span class="token group punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Через прямую черту в скобках перечисленны возможные варианты окончаний. А теперь выясним, с какого символа в строке начинается возможное слвовосочетание &quot;зелёное яблоко&quot;:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">! для удобства регулярное выражение помещаем в переменную</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token user-variable">$regexp</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;зелён(ое|ого|ому|ым|ом)\s+яблок(о|а|у|ом|е)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">strpos</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&quot;У меня есть зелёное яблоко&quot;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">$regexp</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">strpos</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&quot;Ты швырнул в него зелёным яблоком!&quot;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">$regexp</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 19</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">strpos</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&quot;полный ящик зелёных яблок&quot;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">$regexp</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 0, потому что такую форму мы не учли</span><br></span></code></pre></div></div>
<p>Если мы не просто хотим узнать, с какого символа начинается вхождение в строку словосочетания, а конкретно где начинается вхождение слова &quot;яблоко&quot; из этого словосочетания, нам нужно выделить слово &quot;яблоко&quot; с вариантами окончаний в отдельную группу и воспользоваться параметром <code>[#номер]</code>:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">$regexp</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;зелён(ое|ого|ому|ым|ом)\s+(яблок(о|а|у|ом|е))&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">strpos</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&quot;У меня есть зелёное яблоко&quot;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">$regexp</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 21</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">strpos</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&quot;Ты швырнул в него зелёным яблоком!&quot;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">$regexp</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 27</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">strpos</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&quot;полный ящик зелёных яблок&quot;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token user-variable">$regexp</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! вернёт 0, потому что мы не учли форму</span><br></span></code></pre></div></div>
<p>Другие примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Работа с группами</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token quoted-comment comment" style="color:#999988;font-style:italic">!------&#x27;----5--8------15--&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;+33-671-190-23-999&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\+\d{1,2}-(\d{3})((-\d+)+)&#x27;</span><span class="token sign-punctuation">,</span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! на экране увидим 5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;+33-671-190-23-999&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\+\d{1,2}-(\d{3})((-\d+)+)&#x27;</span><span class="token sign-punctuation">,</span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! на экране увидим 8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;+33-671-190-23-999&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\+\d{1,2}-(\d{3})((-\d+)+)&#x27;</span><span class="token sign-punctuation">,</span><span class="token number" style="color:#36acaa">3</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! на экране увидим 15</span><br></span></code></pre></div></div>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Поиск числа в строке без числа</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;Восемь зелёных яблок в корзине&#x27;</span><span class="token sign-punctuation">,</span><span class="token string" style="color:#e3116c">&#x27;\d+&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! на экране будет 0</span><br></span></code></pre></div></div>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к пещере&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)\s(\S+)$&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27; идти к пещере&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)\s(\S+)$&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к пещере&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)\s(\S+)$&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к пещере&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)\s(\S+)$&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token sign-punctuation">)</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! 6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к пещере&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)\s(\S+)$&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token sign-punctuation">)</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! 8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к пещере&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;^(\S+)\s(\S+)(\s(\S+))?$&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! 8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к дому&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;к\s(\S+)&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! 6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к дому&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;к\s(\S+)&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! 6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к дому&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;к\s(\S+)&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! 8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">STRPOS</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;идти к своему дому&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;к\s(\S+)&#x27;</span><span class="token sign-punctuation">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token comment" style="color:#999988;font-style:italic">! 8</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="val">VAL<a href="#val" class="hash-link" aria-label="Прямая ссылка на VAL" title="Прямая ссылка на VAL" translate="no">​</a></h2>
<p><code>VAL</code> —  переводит указанную строку цифр в соответствующее число. Общая запись:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin">VAL</span><span class="token sign-punctuation">(</span><span class="token sign-punctuation">[</span><span class="token user-variable">$выражение</span><span class="token sign-punctuation">]</span><span class="token sign-punctuation">)</span><br></span></code></pre></div></div>
<p>, где <code>[$выражение]</code> — любая строка текста.</p>
<p>При проверке учитываются знак <code>-</code> в начале, прилегающие пробелы и символы табуляции, но кроме того, если хотя бы один символ окажется не цифрой, функция вернёт <code>0</code>. Так же если <code>[$выражение]</code> равно <code>&#x27;&#x27;</code> (пустая строка), то возвращается <code>0</code>.</p>
<p>Примеры:</p>
<div class="language-qsp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-qsp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token user-variable">яблоки</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">val</span><span class="token sign-punctuation">(</span><span class="token user-variable">$яблоки</span><span class="token sign-punctuation">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">val</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;123&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! увидим 123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">val</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! увидим 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">val</span><span class="token sign-punctuation">(</span><span class="token string" style="color:#e3116c">&#x27;sand&#x27;</span><span class="token sign-punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">! увидим 0</span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Страница документа"><a class="pagination-nav__link pagination-nav__link--prev" href="/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-operators"><div class="pagination-nav__sublabel">Предыдущая страница</div><div class="pagination-nav__label">Операторы</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/howdo_faq/docs/howdo/qsp_keywords/qsp-keyword-sys-var"><div class="pagination-nav__sublabel">Следующая страница</div><div class="pagination-nav__label">Системные переменные</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#curacts" class="table-of-contents__link toc-highlight"><code>$CURACTS</code></a></li><li><a href="#curloc" class="table-of-contents__link toc-highlight"><code>$CURLOC</code></a></li><li><a href="#curobjs" class="table-of-contents__link toc-highlight"><code>$CUROBJS</code></a></li><li><a href="#desc" class="table-of-contents__link toc-highlight"><code>$DESC</code></a></li><li><a href="#dyneval" class="table-of-contents__link toc-highlight"><code>$DYNEVAL</code></a></li><li><a href="#func" class="table-of-contents__link toc-highlight"><code>$FUNC</code></a></li><li><a href="#getobj" class="table-of-contents__link toc-highlight"><code>$GETOBJ</code></a></li><li><a href="#iif" class="table-of-contents__link toc-highlight"><code>$IIF</code></a></li><li><a href="#input" class="table-of-contents__link toc-highlight"><code>$INPUT</code></a></li><li><a href="#lcase" class="table-of-contents__link toc-highlight"><code>$LCASE</code></a></li><li><a href="#maintxt" class="table-of-contents__link toc-highlight"><code>$MAINTXT</code></a></li><li><a href="#max" class="table-of-contents__link toc-highlight"><code>$MAX</code></a></li><li><a href="#mid" class="table-of-contents__link toc-highlight"><code>$MID</code></a></li><li><a href="#min" class="table-of-contents__link toc-highlight"><code>$MIN</code></a></li><li><a href="#qspver" class="table-of-contents__link toc-highlight"><code>$QSPVER</code></a></li><li><a href="#replace" class="table-of-contents__link toc-highlight"><code>$REPLACE</code></a></li><li><a href="#selact" class="table-of-contents__link toc-highlight"><code>$SELACT</code></a></li><li><a href="#selobj" class="table-of-contents__link toc-highlight"><code>$SELOBJ</code></a></li><li><a href="#stattxt" class="table-of-contents__link toc-highlight"><code>$STATTXT</code></a></li><li><a href="#str" class="table-of-contents__link toc-highlight"><code>$STR</code></a></li><li><a href="#strfind" class="table-of-contents__link toc-highlight"><code>$STRFIND</code></a></li><li><a href="#trim" class="table-of-contents__link toc-highlight"><code>$TRIM</code></a></li><li><a href="#ucase" class="table-of-contents__link toc-highlight"><code>$UCASE</code></a></li><li><a href="#user_text" class="table-of-contents__link toc-highlight"><code>$USER_TEXT</code></a></li><li><a href="#arrcomp" class="table-of-contents__link toc-highlight">ARRCOMP</a></li><li><a href="#arritem" class="table-of-contents__link toc-highlight">ARRITEM</a></li><li><a href="#arrpack" class="table-of-contents__link toc-highlight">ARRPACK</a></li><li><a href="#arrpos" class="table-of-contents__link toc-highlight">ARRPOS</a></li><li><a href="#arrtype" class="table-of-contents__link toc-highlight">ARRTYPE</a></li><li><a href="#arrsize" class="table-of-contents__link toc-highlight">ARRSIZE</a></li><li><a href="#countobj" class="table-of-contents__link toc-highlight">COUNTOBJ</a></li><li><a href="#instr" class="table-of-contents__link toc-highlight">INSTR</a></li><li><a href="#isnum" class="table-of-contents__link toc-highlight">ISNUM</a></li><li><a href="#isplay" class="table-of-contents__link toc-highlight">ISPLAY</a></li><li><a href="#len" class="table-of-contents__link toc-highlight">LEN</a></li><li><a href="#msecscount" class="table-of-contents__link toc-highlight">MSECSCOUNT</a></li><li><a href="#rand" class="table-of-contents__link toc-highlight">RAND</a></li><li><a href="#rgb" class="table-of-contents__link toc-highlight">RGB</a></li><li><a href="#rnd" class="table-of-contents__link toc-highlight">RND</a></li><li><a href="#strcomp" class="table-of-contents__link toc-highlight">STRCOMP</a></li><li><a href="#strpos" class="table-of-contents__link toc-highlight">STRPOS</a></li><li><a href="#val" class="table-of-contents__link toc-highlight">VAL</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright"><aside class="footerBlock">
<div class="eBlock">
<div class="avsPageStamp">
    <p class="emptyP">Aleks Versus'HowDo-F.A.Q'2019-2026. Built with Docusaurus.<br></p>
    <p class="emptyP">Aleks Versus'Game Adventure Making'Really Unimaginable Stories'2019-2026</p>
</div></div>
</aside></div></div></div></footer></div>
</body>
</html>