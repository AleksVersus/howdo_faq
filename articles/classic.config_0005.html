<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link id="favicon" rel="icon" type="image/x-icon" href="../res/favicon.ico" />
    <link type="text/css" rel="stylesheet" href="../res/css/easy.library.css" />
    <link type="text/css" rel="stylesheet" href="../res/css/offline.window.css" />
    <link type="text/css" rel="stylesheet" href="../res/css/qsp_code.css" />
    <link type="text/css" rel="stylesheet" href="../res/css/qsp_code.css" />
    <title>QSP: Статьи</title>
</head>
    
<body>
    <div class="em_Main">
        <div class="em_AROUND">
            <h1>Статьи по разработке игр на QSP</h1>
            <!-- body start -->
<div style="display:flex;justify-content:space-between;"><div><a href="https://aleksversus.github.io/howdo_faq/articles/qspider_0004.html" class="emHREFTT">&lt; Назад, к странице 4</a></div><div><a href="https://aleksversus.github.io/howdo_faq/articles/operatory_funktsii_argumenty_0006.html" class="emHREFTT">Вперёд, к странице 6 &gt;</a></div></div>
<a id="classic_cfg"></a><h2>Структура конфигурационного файла классического плеера версии 5.7.0</h2>
<p>
Классический плеер QSP версии 5.7.0 хранит все настройки отображения и расположения окон в файле <span class="em_BLCK">qspgui.cfg</span>. Данный файл создаётся автоматически при первом запуске плеера и перезаписывается всякий раз, когда игрок плеер закрывает. Таким образом, чтобы сбросить настройки плеера, нужно просто удалить файл <span class="em_BLCK">qspgui.cfg</span> из папки с плеером.

</p>
<p>
Если файл <span class="em_BLCK">qspgui.cfg</span> найден в папке с игрой, то применяются настройки из него. Если в папке с игрой такой файл не найден, применяются настройки из файла, который лежит рядом с плеером.

</p>
<p>
Это позволяет для каждой отдельной игры задавать собственные настройки оформления.

</p>
<p>
Официального, задокументированного способа сделать это — нет. Но есть небольшой трюк, позволяющий добиться нужного эффекта:

</p>
<ol>
<li>
Запускаем в плеере свою игру.
</li>
<li>
Вручную "расставляем" окна так, как нам нужно, в том числе задавая размер.
</li>
<li>
Закрываем плеер.
</li>
<li>
Открываем папку плеера (где находится <span class="em_BLCK">qspgui.exe</span>) и копируем оттуда файл <span class="em_BLCK">qspgui.cfg</span> в папку с игрой.
</li>
<li>
Ставим на файле <span class="em_BLCK">qspgui.cfg</span> в папке с игрой атрибут "только для чтения".
</li>
</ol>
<p>
Теперь игра будет открываться с нужным расположением и размером окон.

</p>
<p>
Если не выполнить пункт <span class="em_BLCK"><span class="emNUM">5</span></span>, то игрок сможет изменить расположение и размер окон, и новые настройки сохранятся у него для текущей игры после закрытия плеера.

</p>
<p>
Некоторых особо хитрых комбинаций расположения окон можно добиться только самостоятельным редактированием <span class="em_BLCK">qspgui.cfg</span>. И опять же, нет никакой подробной официальной документации по этому файлу. Все сведения, приведённые в данной статье, получены экспериментальным путём.

</p>
<p>
Конфигурационный файл <span class="em_BLCK">qspgui.cfg</span> состоит из нескольких секций настроек. Каждая секция объявляется заголовком, заключённым в квадратные скобки.

</p>
<p>
Настройки представляют собой пары типа <span class="em_BLCK">Переменная=Значение</span>. Если какую-то из настроек удалить, при запуске плеера будет применена настройка по-умолчанию, после чего эта настройка будет восстановлена в конфигурационном файле.

</p>
<p>
На каждую игру можно создать собственный конфигурационный файл, который будет иметь приоритет перед основным конфигурационным файлом плеера.

</p>
<p>
Если на конфигурационном файле не стоит атрибут "только для чтения", после закрытия плеера все данные в конфигурационном файле будут перезаписаны в соответствии с новыми настройками плеера.

</p>
<a id="йqЙГ"></a><h3>Секция настроек цвета [Colors]</h3>
<p>
Данная секция объявляется заголовком <span class="em_BLCK"><span class="emTEXT">[Colors]</span></span>. В неё помещаются три настройки, каждая из которых должна располагаться на отдельной строке:

</p>
<p>
<strong>BackColor</strong> — цвет фона плеера.

</p>
<p>
<strong>FontColor</strong> — цвет шрифта плеера.

</p>
<p>
<strong>LinkColor</strong> — цвет ссылок плеера.

</p>
<p>
Цвет задаётся целочисленным цветовым кодом, который вычисляется из трёх цветовых составляющих: <span class="em_BLCK">RED</span> (красная), <span class="em_BLCK">GREEN</span> (зелёная) и <span class="em_BLCK">BLUE</span> (синяя). Вычислить необходимый цветовой код можно по формуле:

</p>
<div class="Monokai-Code">
RED&nbsp;<span class="Monokai-Operator">+</span>&nbsp;GREEN<span class="Monokai-Operator">*</span><span class="Monokai-Numeric">256</span>&nbsp;<span class="Monokai-Operator">+</span>&nbsp;BLUE<span class="Monokai-Operator">*</span><span class="Monokai-Numeric">256</span><span class="Monokai-Operator">*</span><span class="Monokai-Numeric">256</span><br>


</div>
<p>
Пример настроек цветов для плеера (стандартные):

</p>
<div class="Monokai-Code">
<span class="Monokai-Operator">[</span>Colors<span class="Monokai-Operator">]</span><br>
BackColor<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">14737632</span><br>
FontColor<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">0</span><br>
LinkColor<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">16711680</span><br>


</div>
<a id="ОДыz"></a><h3>Секция настроек шрифта [Font]</h3>
<p>
Данная секция объявляется заголовком <span class="em_BLCK"><span class="emTEXT">[Font]</span></span>. В неё помещаются три настройки, каждая на отдельной строке:

</p>
<p>
<strong>FontSize</strong> — утанавливает предпочтительный размер шрифта в плеере. Это основной размер шрифта так же и для HTML-разметки. Может принимать значения от 1 до 72 (или сколько позволит система). Если выставить число ноль, то будет применён размер шрифта по-умолчанию, т.е. 12.

</p>
<p>
<strong>FontName</strong> — устанавливает имя предпочтительного шрифта в плеере. Можно указывать названия шрифтов, установленных в системе. Если указать несуществующий в системе шрифт, будет восстановлена настройка по-умолчанию, шрифт <span class="em_BLCK">Segoe UI</span>.

</p>
<p>
<strong>UseFontSize</strong> — эта настройка запрещает использовать иной размер шрифта, кроме указанного в секции настроек. Т.е. переменная fsize в игре перестаёт действовать. Можно указывать значение 0 — отключает принудительное использование системного размера шрифта, 1 — включает принудительное использование системного размера шрифта.

</p>
<p>
Пример настроек шрифта для плеера (стандартный):

</p>
<div class="Monokai-Code">
<span class="Monokai-Operator">[</span>Font<span class="Monokai-Operator">]</span><br>
FontSize<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">12</span><br>
FontName<span class="Monokai-Operator">=</span>Segoe&nbsp;UI<br>
UseFontSize<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">0</span><br>


</div>
<a id="ёТeh"></a><h3>Секция основных настроек [General]</h3>
<p>
Данная секция объявляется заголовком <span class="em_BLCK"><span class="emTEXT">[General]</span></span>. В неё помещается множество настроек.

</p>
<p>
<strong>Volume</strong> — данная настройка выставляет уровень громкости звуков в плеере. Принимает значения от 0 до 100 (проценты громкости). Пишется отдельной строкой.

</p>
<p>
<strong>ShowHotkeys</strong> — данная настройка отвечает за отображение подсказок по горячим клавишам действий. Принимает значения: 0 — горячие клавиши действий не отображаются, 1 — горячие клавиши действий отображаются. Пишется отдельной строкой

</p>
<p>
<strong>Language</strong> — данная настройка отвечает за выбор языка локализации плеера. Можно выбрать один из пяти языков: <span class="em_BLCK">de_DE</span> - немецкий, <span class="em_BLCK">en_GB</span> — английский, ru_RU — русский, uk_UA — украинский, eo — эсперанто. Можно заменить один из языков на свой собственный, используя инструкцию отсюда: <a href="https://qsp.org/index.php?option=com_agora&task=topic&id=164&Itemid=57" style="text-decoration:none;" class="emFOLD">Локализация классического плеера QSP</a>.

</p>
<p>
Далее следуют настройки, перечисляемые в одну строку. Лучше всего их записывать по порядку, как есть, без лишних пробелов. Данные настройки разделяются на группы. Каждая группа закрывается вертикальной чертой <span class="em_BLCK">|</span>. Последняя группа так же должна быть закрыта вертикальной чертой. Внутри группы настройки закрываются точкой с запятой <span class="em_BLCK">;</span>.

</p>
<a id="ЬKчy"></a><h5>Panels</h5>
<p>
Первая группа состоит из одной настройки Panels. Её значение всегда сбрасывается к <span class="em_BLCK">layout<span class="emNUM">2</span></span>, поэтому особого смысла менять её нет. Но если всё же измените на другую, пропорции панелей сбросятся к виду с приоритетом площади у окна основного описания.

</p>
<div class="Monokai-Code">
Panels<span class="Monokai-Operator">=</span>layout2|<br>


</div>
<p>
Следующие шесть групп настроек определяют размещение шести разных окон плеера. У всех окон настройки одинаковые, поэтому рассмотрим их вне привязки к какой либо группе. Если поведение окна будет отличаться от прочих при изменении какой либо настройки, об этом будет сказано отдельно.

</p>
<a id="тIЧщ"></a><h5>name</h5>
<p>
Первая переменная служебная и не относится непосредственно к настройкам плеера. Она нужна, чтобы плеер понимал для какого окна ему применить все последующие настройки. Это системное название окна:

</p>
<div class="Monokai-Code">
name<span class="Monokai-Operator">=</span>imgview;<br>


</div>
<p>
Данной переменной можно передавать только шесть значений — системные названия окон плеера. Это значения: <span class="em_BLCK">imgview</span> (окно предпросмотра изображений), <span class="em_BLCK"><span class="emFUNC">desc</span></span> (окно основного описания), <span class="em_BLCK">objs</span> (окно предметов), <span class="em_BLCK">acts</span> (окно действий), <span class="em_BLCK">vars</span> (окно дополнительного описания), <span class="em_BLCK"><span class="emFUNC">input</span></span> (окно пользовательского ввода, поле ввода). Именно по значению в этой переменной вы можете понять, к настройкам какого окна относится данная группа настроек.

</p>
<a id="KуBz"></a><h5>caption</h5>
<p>
Следующей переменной бесполезно прописывать какие-либо настройки, так как значения в неё подтягиваются из текущей локализации. Это названия окон. Поэтому значения могут быть любыми в зависимости от локализации. Вот так выглядит эта "настройка" для окна предметов в английской локализации:

</p>
<div class="Monokai-Code">
caption<span class="Monokai-Operator">=</span>Objects;<br>


</div>
<p>
У окна основного описания нет своей подписи, поэтому и значение в данную переменную прописывается пустое:

</p>
<div class="Monokai-Code">
caption<span class="Monokai-Operator">=</span>;<br>


</div>
<a id="йiЮТ"></a><h5>state</h5>
<p>
Переменная <span class="em_BLCK">state</span> отвечает за внешний вид и поведение окна. Можете поэкспериментировать с этой настройкой, задавая разные значения, но по-умолчанию всеми окнами используются лишь несколько значений, определяющих поведение:

</p>
<p>
<strong>768</strong> — это значение предопределяет поведение окна, как у окна основного описания по-умолчанию. Например, при этом значении отсутствует заголовок окна.

</p>
<p>
<strong>6293500</strong> — это значение предопределяет поведение окна, как у окон действий, предметов и дополнительного описания по-умолчанию. При этом значении обязательно присутствует заголовок окна.

</p>
<p>
<strong>2099196</strong> — это значение предопределяет поведение окна, как у окна ввода по-умолчанию. Заголовок окна присутствует.

</p>
<p>
<strong>1080035324</strong> — это значение предопределяет поведение окна, как у окна предпросмотра по-умолчанию.

</p>
<p>
Увеличение любого из этих значений на единицу сделает любое из окон независимым от основного окна плеера, то есть плавающим. Например окно основного описания можно сделать плавающим, прописав такую настройку:

</p>
<div class="Monokai-Code">
state<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">769</span>;<br>


</div>
<p>
Увеличение любого из этих значений на 2 — скрывает окно, однако его можно вернуть обратно через меню плеера.

</p>
<a id="CsюЮ"></a><h5>dir</h5>
<p>
Переменная <span class="em_BLCK">dir</span> отвечает за расположение и поведение окна. Можете так же поэкспериментировать с этой настройкой, задавая разные значения. Всего таких значений можно указать шесть: от 0 до 5. Если указать иное значение, окно появится в верхнем левом углу плеера в нерабочем виде. Название пременной очевидно происходит от слова "direction" — т.е. "направление". В зависимости от выбранного направления выстраиваются и прочие блоки.

</p>
<p>
<strong>0</strong> — полностью скрывает окно из виду, а вернее сворачивает до небольшой полоски в левом верхнем углу.

</p>
<p>
<strong>1</strong> — окно располагается в подвижный блок <span class="em_BLCK">Top</span> (то есть типа <span class="em_BLCK">верх</span>). При выборе данного направления, слои (<span class="em_BLCK">layer</span>) располагаются и нумеруются снизу вверх. В одном слое ряды (<span class="em_BLCK">row</span>) располагаются и нумеруются сверху вниз. В одном ряду (или слое) позиции (<span class="em_BLCK">pos</span>) располагаются и нумеруются слева направо.

</p>
<p>
<strong>2</strong> — окно располагается в подвижный блок <span class="em_BLCK">Right</span> (то есть типа <span class="em_BLCK">право</span>). При выборе данного направления, слои (<span class="em_BLCK">layer</span>) располагаются и нумеруются слева направо. В одном слое ряды (<span class="em_BLCK">row</span>) располагаются и нумеруются справа налево. В одном ряду (или слое) позиции (<span class="em_BLCK">pos</span>) располагаются и нумеруются сверху вниз.

</p>
<p>
<strong>3</strong> — окно располагается в подвижный блок <span class="em_BLCK">Bottom</span> (то есть типа <span class="em_BLCK">низ</span>). При выборе данного направления, слои (<span class="em_BLCK">layer</span>) располагаются и нумеруются сверху вниз. В одном слое ряды (<span class="em_BLCK">row</span>) располагаются и нумеруются снизу вверх. В одном ряду (или слое) позиции (<span class="em_BLCK">pos</span>) располагаются и нумеруются слева направо.

</p>
<p>
<strong>4</strong> — окно располагается в подвижный блок <span class="em_BLCK">Left</span> (то есть типа <span class="em_BLCK">лево</span>). При выборе данного направления, слои (<span class="em_BLCK">layer</span>) располагаются и нумеруются справа налево. В одном слое ряды (<span class="em_BLCK">row</span>) располагаются и нумеруются слева направо. В одном ряду (или слое) позиции (<span class="em_BLCK">pos</span>) располагаются и нумеруются сверху вниз.

</p>
<p>
<strong>5</strong> — окно располагается в неподвижный блок <span class="em_BLCK">Center</span>. При выборе данного направления, слои (<span class="em_BLCK">layer</span>) располагаются и нумеруются слева направа. В одном слое ряды (<span class="em_BLCK">row</span>) располагаются и нумеруются слева направо. В одном ряду (или слое) позиции (<span class="em_BLCK">pos</span>) располагаются и нумеруются сверху вниз.

</p>
<p>
Можно разместить все окна в одном блоке, однако при этом нужно учитывать, как ведут себя окна в соответствии с другими настройками.

</p>
<a id="ыяzi"></a><h5>layer</h5>
<p>
Значение переменной <span class="em_BLCK">layer</span> определяет номер слоя, в котором будет располагаться окно. Может принимать значения от 0 до 5. Слои выстравиваются в определённом порядке в зависимости от выбранного направления (переменная <span class="em_BLCK">dir</span>).

</p>
<a id="Ыцhз"></a><h5>raw</h5>
<p>
Значения переменной <span class="em_BLCK">raw</span> определяет номер ряда, в котором будет располагаться окно. Ряды выстравиваются в определённом порядке внутри слоя (переменная <span class="em_BLCK">layer</span>), в зависимости от выбранного направления (переменная <span class="em_BLCK">dir</span>).

</p>
<a id="РЙiЩ"></a><h5>pos</h5>
<p>
Значения переменной <span class="em_BLCK">pos</span> определяет номер позиции, в которой будет располагаться окно. Позиции располагаются определённым образом внутри ряда или слоя, в зависимости от выбранного направления (переменная <span class="em_BLCK">dir</span>).

</p>
<a id="RяЯы"></a><h5>prop</h5>
<p>
Переменная <span class="em_BLCK">prop</span> устанавливает пропорции между окнами внутри ряда. Значения указываются от 100000 в одну или другую сторону.

</p>
<a id="mёЗЙ"></a><h5>bestw, besth, minw, minh, maxw, maxh</h5>
<p>
Переменные <span class="em_BLCK">bestw</span> и <span class="em_BLCK">besth</span> — это предпочтительные ширина и высота окна соответственно. Эти параметры будут применяться в зависимости от того, в каком направлении размещено окно, и как изменено значение переменной <span class="em_BLCK">prop</span>.

</p>
<p>
Переменные <span class="em_BLCK">maxw</span> и <span class="em_BLCK">maxh</span> — это максимальные ширина и высота окна соответственно. Эти параметры могут не работать, в зависимости от того, как скомбинированы окна. 

</p>
<p>
Переменные <span class="em_BLCK">minw</span> и <span class="em_BLCK">minh</span> — это минимальные ширина и высота окна соответственно. Эти параметры могут не работать, в зависимости от того, как скомбинированы окна.

</p>
<a id="юqсi"></a><h5>floatx, floaty, floatw, floath</h5>
<p>
Переменные <span class="em_BLCK">floatx</span>, <span class="em_BLCK">floaty</span>, <span class="em_BLCK">floatw</span>, <span class="em_BLCK">floath</span> отвечают за расположение и размеры окна, когда окно откреплено от окна плеера, т.е. когда оно переключено в режим плавающего окошка. <span class="em_BLCK">floatx</span> — отступ от левой границы экрана, <span class="em_BLCK">floaty</span> — отступ от верхней границы экрана, <span class="em_BLCK">floatw</span> — ширина плавающего окна, <span class="em_BLCK">floath</span> — высота плавающего окна.

</p>
<a id="EOщК"></a><h5>dock_size</h5>
<p>
В конце секции основных настроек прописываются несколько групп <span class="em_BLCK">dock_size</span>, количество которых совпадает с числом окон, размещённых в направлениях top, right, bottom и left. Изменение значений этих настроек не влияют на отображение окон, это служебные значения.

</p>
<a id="NHdЬ"></a><h3>Секция настроек окна плеера [Pos]</h3>
<p>
Данная секция объявляется заголовком <span class="em_BLCK"><span class="emTEXT">[Pos]</span></span>. Здесь расположены пять настроек, каждая из которых записывается отдельной строкой.

</p>
<p>
<strong>Left</strong> и <span class="em_BLCK">Top</span> — определяют отступ от левой и верхней границ экрана.

</p>
<p>
<strong>Width</strong> и <span class="em_BLCK">Height</span> — определяют ширину и высоту окна соответственно.

</p>
<p>
<strong>Maximize</strong> — определяет развернётся ли окно плеера на всю свободную ширину и высоту экрана, или откроется в окне с размерами, указанными в настройках Left, Top, Width, Height. Может принимать значения 0 (окно с указанными размерами) и 1 (развёрнутое окно).

</p>
<p>
Пример настроек окна плеера (стандартные):

</p>
<div class="Monokai-Code">
<span class="Monokai-Operator">[</span>Pos<span class="Monokai-Operator">]</span><br>
Left<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">10</span><br>
Top<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">10</span><br>
Width<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">850</span><br>
Height<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">650</span><br>
Maximize<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">0</span><br>


</div>
<a id="YЛQФ"></a><h3>Post Scriptum</h3>
<p>
Для более полного понимания работы настроек рекомендуется ознакомиться с документацией по <a href="https://ru.wikipedia.org/wiki/WxWidgets" style="text-decoration:none;" class="emFOLD">wxWidgets</a>.

</p>
<p>
Вводная часть статьи взята из инструкции за авторством <strong>Nex</strong>'а в теме <a href="https://qsp.org/index.php?option=com_agora&task=topic&id=861&Itemid=57" style="text-decoration:none;" class="emFOLD">Настройка окошек классического плеера с помощью qspgui.cfg</a>

</p>
<div style="display:flex;justify-content:space-between;"><div><a href="https://aleksversus.github.io/howdo_faq/articles/qspider_0004.html" class="emHREFTT">&lt; Назад, к странице 4</a></div><div><a href="https://aleksversus.github.io/howdo_faq/articles/operatory_funktsii_argumenty_0006.html" class="emHREFTT">Вперёд, к странице 6 &gt;</a></div></div>
<!-- body end -->
            <div class="em_Epigraph">
                <div class="em_subText">
                    <p>Aleks Versus'HowDo-F.A.Q.'2021-<span id="date_stamp_faq">2022</span></p>
                    <p>Aleks Versus'Game Adventure Making'Really Unimaginable Stories'2013-<span id="date_stamp_gamrus">2022</span></p>
                </div>
            </div>
            <div class="em_btn">
                <div>
                    <a href="https://aleksversus.github.io/howdo_faq/" class="emHREFTT">Главная</a>
                </div>
                <div>
                    <a href="#" class="emHREFTT" id="section_content_open">Содержание</a>
                </div>
            </div>
        </div>
        <div class="stub">
            &nbsp;
        </div>
    </div>
    <div id="soderzhanije_outer">
        <div class="soderzhanije">
<a id="soderzhanije"></a><h2>Содержание</h2>
<ul>
<li>
<a href="https://aleksversus.github.io/howdo_faq/articles/preobrazovanie_tipov_v_qsp_0001.html#preobrazovanije_tipov_qsp" style="text-decoration:none;" class="emFOLD">Преобразование типов в QSP</a>
</li>
<li>
<a href="https://aleksversus.github.io/howdo_faq/articles/novoe_v_rabote_massivov_v_5.8.0_0002.html#novoje_v_rabote_massivov" style="text-decoration:none;" class="emFOLD">Новое в работе массивов в QSP 5.8.0</a>
</li>
<li>
<a href="https://aleksversus.github.io/howdo_faq/articles/chto_novogo_v_qsp_0003.html#whats_news" style="text-decoration:none;" class="emFOLD">Что нового в QSP 5.8.0</a>
</li>
<li>
<a href="https://aleksversus.github.io/howdo_faq/articles/qspider_0004.html#qspider_0120" style="text-decoration:none;" class="emFOLD">qSpider 0.12.0</a>
</li>
<li>
<a href="https://aleksversus.github.io/howdo_faq/articles/classic.config_0005.html#classic_cfg" style="text-decoration:none;" class="emFOLD">Содержимое qspgui.cfg для QSP v.5.7.0</a>
</li>
<li>
<a href="https://aleksversus.github.io/howdo_faq/articles/operatory_funktsii_argumenty_0006.html#gosub_func_args" style="text-decoration:none;" class="emFOLD">Операторы, функции, аргументы. GOSUB, FUNC, ARGS</a>
</li>
</ul>
        </div>
    </div>
    <script src="../res/js/stamp.js"></script>
    <script type="text/javascript" src="../res/js/soderzhanie.js" ></script>
</body>
</html>
