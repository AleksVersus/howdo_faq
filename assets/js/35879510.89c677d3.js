"use strict";(globalThis.webpackChunkhowdo_faq=globalThis.webpackChunkhowdo_faq||[]).push([[3081],{404:(n,S,e)=>{e.r(S),e.d(S,{assets:()=>r,contentTitle:()=>i,default:()=>o,frontMatter:()=>P,metadata:()=>a,toc:()=>Q});const a=JSON.parse('{"id":"informarch/extrqsp/console_player","title":"\u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u044b\u0439 QSP-\u043f\u043b\u0435\u0435\u0440","description":"qsp.h.txt","source":"@site/docs/informarch/extrqsp/console_player.md","sourceDirName":"informarch/extrqsp","slug":"/informarch/extrqsp/console_player","permalink":"/howdo_faq/docs/informarch/extrqsp/console_player","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"informArchSidebar","previous":{"title":"\u041a\u0430\u043a \u0441\u0434\u0435\u043b\u0430\u0442\u044c StandAlone-\u0441\u0431\u043e\u0440\u043a\u0443 \u043d\u0430 \u043a\u043b\u0430\u0441\u0441\u0438\u0447\u0435\u0441\u043a\u043e\u043c \u043f\u043b\u0435\u0435\u0440\u0435?","permalink":"/howdo_faq/docs/informarch/general/standalone_classic"},"next":{"title":"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u043d\u043e\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 QSP","permalink":"/howdo_faq/docs/informarch/extrqsp/automat_programming/"}}');var t=e(4848),_=e(8453);const P={sidebar_position:1},i="\u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u044b\u0439 QSP-\u043f\u043b\u0435\u0435\u0440",r={},Q=[{value:"qsp.h.txt",id:"qsphtxt",level:3}];function s(n){const S={code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,_.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.header,{children:(0,t.jsx)(S.h1,{id:"\u043f\u0440\u043e\u0441\u0442\u043e\u0439-\u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u044b\u0439-qsp-\u043f\u043b\u0435\u0435\u0440",children:"\u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043d\u044b\u0439 QSP-\u043f\u043b\u0435\u0435\u0440"})}),"\n",(0,t.jsx)(S.pre,{children:(0,t.jsx)(S.code,{className:"language-js",children:'/* Copyright (C) 2005-2010 Valeriy Argunov (nporep AT mail DOT ru) */\n\n#include "qsp.h"\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\nvoid refresh_int(QSP_BOOL isRedraw)\n{\n    long i;\n    QSP_CHAR *strVal, *imgPath;\n    const QSP_CHAR *mainDesc = QSPGetMainDesc();\n    const QSP_CHAR *varsDesc = QSPGetVarsDesc();\n    // -------------------------------\n    if (QSPIsMainDescChanged()) printf("%s\\n", mainDesc);\n    if (QSPIsVarsDescChanged()) printf("%s\\n", varsDesc);\n    if (QSPIsActionsChanged())\n    {\n        long actionsCount = QSPGetActionsCount();\n        for (i = 0; i < actionsCount; ++i)\n        {\n            QSPGetActionData(i, &imgPath, &strVal);\n            printf("%d. %s\\n", i + 1, strVal);\n        }\n    }\n}\n\nvoid msg(const QSP_CHAR *str)\n{\n    printf("%s\\n", str);\n}\n\nvoid init_callbacks()\n{\n    QSPSetCallBack(QSP_CALL_REFRESHINT, (QSP_CALLBACK)&refresh_int);\n    QSPSetCallBack(QSP_CALL_SHOWMSGSTR, (QSP_CALLBACK)&msg);\n}\n\nint main()\n{\n    QSPInit();\n    char str[1000];\n\n    init_callbacks();\n\n    QSPLoadGameWorld((const char *)"chukcha.gam");\n    QSPRestartGame(QSP_TRUE);\n\n    while (1)\n    {\n        scanf("%s", str);\n        if (!strcmp(str, "quit"))\n            break;\n        int ind = atoi(str) - 1;\n        if (ind >= 0 && ind < QSPGetActionsCount())\n        {\n            QSPSetSelActionIndex(ind, QSP_FALSE);\n            QSPExecuteSelActionCode(QSP_TRUE);\n        }\n    }\n\n    QSPDeInit();\n    return 0;\n}\n'})}),"\n",(0,t.jsx)(S.h3,{id:"qsphtxt",children:"qsp.h.txt"}),"\n",(0,t.jsx)(S.pre,{children:(0,t.jsx)(S.code,{className:"language-js",children:'\n/* Copyright (C) 2005-2010 Valeriy Argunov (nporep AT mail DOT ru) */\n/*\n* This library is free software; you can redistribute it and/or modify\n* it under the terms of the GNU Lesser General Public License as published by\n* the Free Software Foundation; either version 2.1 of the License, or\n* (at your option) any later version.\n*\n* This library is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n* GNU Lesser General Public License for more details.\n*\n* You should have received a copy of the GNU Lesser General Public License\n* along with this library; if not, write to the Free Software\n* Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.\n*/\n\n#ifndef QSP_H\n    #define QSP_H\n\n    #ifdef _FLASH\n        #include <AS3.h>\n    #endif\n\n    #ifdef EXPORT\n        #ifdef _WIN\n            #define QSP_EXTERN __declspec(dllexport)\n        #else\n            #define QSP_EXTERN extern\n        #endif\n    #else\n        #define QSP_EXTERN\n    #endif\n\n    enum\n    {\n        QSP_ERR_DIVBYZERO = 100,\n        QSP_ERR_TYPEMISMATCH,\n        QSP_ERR_STACKOVERFLOW,\n        QSP_ERR_TOOMANYITEMS,\n        QSP_ERR_FILENOTFOUND,\n        QSP_ERR_CANTLOADFILE,\n        QSP_ERR_GAMENOTLOADED,\n        QSP_ERR_COLONNOTFOUND,\n        QSP_ERR_CANTINCFILE,\n        QSP_ERR_CANTADDACTION,\n        QSP_ERR_EQNOTFOUND,\n        QSP_ERR_LOCNOTFOUND,\n        QSP_ERR_ENDNOTFOUND,\n        QSP_ERR_LABELNOTFOUND,\n        QSP_ERR_NOTCORRECTNAME,\n        QSP_ERR_QUOTNOTFOUND,\n        QSP_ERR_BRACKNOTFOUND,\n        QSP_ERR_BRACKSNOTFOUND,\n        QSP_ERR_SYNTAX,\n        QSP_ERR_UNKNOWNACTION,\n        QSP_ERR_ARGSCOUNT,\n        QSP_ERR_CANTADDOBJECT,\n        QSP_ERR_CANTADDMENUITEM,\n        QSP_ERR_TOOMANYVARS,\n        QSP_ERR_INCORRECTREGEXP,\n        QSP_ERR_CODENOTFOUND\n    };\n\n    enum\n    {\n        QSP_WIN_ACTS,\n        QSP_WIN_OBJS,\n        QSP_WIN_VARS,\n        QSP_WIN_INPUT\n    };\n\n    enum\n    {\n        QSP_CALL_DEBUG, /* void func(const QSP_CHAR *str) */\n        QSP_CALL_ISPLAYINGFILE, /* QSP_BOOL func(const QSP_CHAR *file) */\n        QSP_CALL_PLAYFILE, /* void func(const QSP_CHAR *file, int volume) */\n        QSP_CALL_CLOSEFILE, /* void func(const QSP_CHAR *file) */\n        QSP_CALL_SHOWIMAGE, /* void func(const QSP_CHAR *file) */\n        QSP_CALL_SHOWWINDOW, /* void func(int type, QSP_BOOL isShow) */\n        QSP_CALL_DELETEMENU, /* void func() */\n        QSP_CALL_ADDMENUITEM, /* void func(const QSP_CHAR *name, const QSP_CHAR *imgPath) */\n        QSP_CALL_SHOWMENU, /* void func() */\n        QSP_CALL_SHOWMSGSTR, /* void func(const QSP_CHAR *str) */\n        QSP_CALL_REFRESHINT, /* void func(QSP_BOOL isRedraw) */\n        QSP_CALL_SETTIMER, /* void func(int msecs) */\n        QSP_CALL_SETINPUTSTRTEXT, /* void func(const QSP_CHAR *text) */\n        QSP_CALL_SYSTEM, /* void func(const QSP_CHAR *str) */\n        QSP_CALL_OPENGAMESTATUS, /* void func(const QSP_CHAR *file) */\n        QSP_CALL_SAVEGAMESTATUS, /* void func(const QSP_CHAR *file) */\n        QSP_CALL_SLEEP, /* void func(int msecs) */\n        QSP_CALL_GETMSCOUNT, /* int func() */\n        QSP_CALL_INPUTBOX, /* void func(const QSP_CHAR *text, QSP_CHAR *buffer, int maxLen) */\n        QSP_CALL_DUMMY\n    };\n\n    #ifdef _UNICODE\n        #ifndef _FLASH\n            typedef wchar_t QSP_CHAR;\n        #else\n            typedef unsigned short QSP_CHAR;\n        #endif\n        #define QSP_FMT2(x) L##x\n        #define QSP_FMT(x) QSP_FMT2(x)\n    #else\n        typedef char QSP_CHAR;\n        #define QSP_FMT(x) x\n    #endif\n\n    typedef int QSP_BOOL;\n\n    #define QSP_TRUE 1\n    #define QSP_FALSE 0\n\n    #ifndef _FLASH\n        #ifdef __cplusplus\n            typedef int (*QSP_CALLBACK)(...);\n        #else\n            typedef int (*QSP_CALLBACK)();\n        #endif\n    #else\n        typedef struct\n        {\n            QSP_BOOL IsSet;\n            AS3_Val ThisVal;\n            AS3_Val FuncVal;\n        } QSP_CALLBACK;\n    #endif\n\n    #ifdef __cplusplus\n    extern "C"\n    {\n    #endif\n\n    #ifndef _FLASH\n\n        QSP_EXTERN QSP_BOOL QSPIsInCallBack();\n        QSP_EXTERN void QSPEnableDebugMode(QSP_BOOL isDebug);\n        QSP_EXTERN void QSPGetCurStateData(QSP_CHAR **loc, int *actIndex, int *line);\n        QSP_EXTERN const QSP_CHAR *QSPGetVersion();\n        QSP_EXTERN const QSP_CHAR *QSPGetCompiledDateTime();\n        QSP_EXTERN int QSPGetFullRefreshCount();\n        QSP_EXTERN const QSP_CHAR *QSPGetQstFullPath();\n        QSP_EXTERN const QSP_CHAR *QSPGetCurLoc();\n        QSP_EXTERN const QSP_CHAR *QSPGetMainDesc();\n        QSP_EXTERN QSP_BOOL QSPIsMainDescChanged();\n        QSP_EXTERN const QSP_CHAR *QSPGetVarsDesc();\n        QSP_EXTERN QSP_BOOL QSPIsVarsDescChanged();\n        QSP_EXTERN QSP_BOOL QSPGetExprValue(const QSP_CHAR *str, QSP_BOOL *isString, int *numVal, QSP_CHAR *strVal, int strValBufSize);\n        QSP_EXTERN void QSPSetInputStrText(const QSP_CHAR *str);\n        QSP_EXTERN int QSPGetActionsCount();\n        QSP_EXTERN void QSPGetActionData(int ind, QSP_CHAR **imgPath, QSP_CHAR **desc);\n        QSP_EXTERN QSP_BOOL QSPExecuteSelActionCode(QSP_BOOL isRefresh);\n        QSP_EXTERN QSP_BOOL QSPSetSelActionIndex(int ind, QSP_BOOL isRefresh);\n        QSP_EXTERN int QSPGetSelActionIndex();\n        QSP_EXTERN QSP_BOOL QSPIsActionsChanged();\n        QSP_EXTERN int QSPGetObjectsCount();\n        QSP_EXTERN void QSPGetObjectData(int ind, QSP_CHAR **imgPath, QSP_CHAR **desc);\n        QSP_EXTERN QSP_BOOL QSPSetSelObjectIndex(int ind, QSP_BOOL isRefresh);\n        QSP_EXTERN int QSPGetSelObjectIndex();\n        QSP_EXTERN QSP_BOOL QSPIsObjectsChanged();\n        QSP_EXTERN void QSPShowWindow(int type, QSP_BOOL isShow);\n        QSP_EXTERN QSP_BOOL QSPGetVarValuesCount(const QSP_CHAR *name, int *count);\n        QSP_EXTERN QSP_BOOL QSPGetVarValues(const QSP_CHAR *name, int ind, int *numVal, QSP_CHAR **strVal);\n        QSP_EXTERN int QSPGetMaxVarsCount();\n        QSP_EXTERN QSP_BOOL QSPGetVarNameByIndex(int ind, QSP_CHAR **name);\n        QSP_EXTERN QSP_BOOL QSPExecString(const QSP_CHAR *str, QSP_BOOL isRefresh);\n        QSP_EXTERN QSP_BOOL QSPExecCounter(QSP_BOOL isRefresh);\n        QSP_EXTERN QSP_BOOL QSPExecUserInput(QSP_BOOL isRefresh);\n        QSP_EXTERN QSP_BOOL QSPExecLocationCode(const QSP_CHAR *name, QSP_BOOL isRefresh);\n        QSP_EXTERN void QSPGetLastErrorData(int *errorNum, QSP_CHAR **errorLoc, int *errorActIndex, int *errorLine);\n        QSP_EXTERN const QSP_CHAR *QSPGetErrorDesc(int errorNum);\n        QSP_EXTERN QSP_BOOL QSPLoadGameWorld(const QSP_CHAR *file);\n        QSP_EXTERN QSP_BOOL QSPLoadGameWorldFromData(const char *data, int dataSize, const QSP_CHAR *file);\n        QSP_EXTERN QSP_BOOL QSPSaveGame(const QSP_CHAR *file, QSP_BOOL isRefresh);\n        QSP_EXTERN QSP_BOOL QSPSaveGameAsString(QSP_CHAR *strBuf, int strBufSize, int *realSize, QSP_BOOL isRefresh);\n        QSP_EXTERN QSP_BOOL QSPOpenSavedGame(const QSP_CHAR *file, QSP_BOOL isRefresh);\n        QSP_EXTERN QSP_BOOL QSPOpenSavedGameFromString(const QSP_CHAR *str, QSP_BOOL isRefresh);\n        QSP_EXTERN QSP_BOOL QSPRestartGame(QSP_BOOL isRefresh);\n        QSP_EXTERN void QSPSelectMenuItem(int ind);\n        QSP_EXTERN void QSPSetCallBack(int type, QSP_CALLBACK func);\n        QSP_EXTERN void QSPInit();\n        QSP_EXTERN void QSPDeInit();\n\n    #else\n\n        QSP_EXTERN AS3_Val QSPIsInCallBack(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPEnableDebugMode(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetCurStateData(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetVersion(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetCompiledDateTime(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetFullRefreshCount(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetQstFullPath(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetCurLoc(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetMainDesc(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPIsMainDescChanged(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetVarsDesc(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPIsVarsDescChanged(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetExprValue(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPSetInputStrText(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetActionsCount(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetActionData(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPExecuteSelActionCode(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPSetSelActionIndex(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetSelActionIndex(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPIsActionsChanged(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetObjectsCount(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetObjectData(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPSetSelObjectIndex(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetSelObjectIndex(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPIsObjectsChanged(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPShowWindow(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetVarValuesCount(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetVarValues(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetMaxVarsCount(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetVarNameByIndex(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPExecString(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPExecCounter(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPExecUserInput(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPExecLocationCode(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetLastErrorData(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPGetErrorDesc(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPLoadGameWorld(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPLoadGameWorldFromData(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPSaveGame(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPSaveGameAsString(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPOpenSavedGame(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPOpenSavedGameFromString(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPRestartGame(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPSelectMenuItem(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPSetCallBack(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPInit(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPDeInit(void *param, AS3_Val args);\n        QSP_EXTERN AS3_Val QSPReturnValue(void *param, AS3_Val args);\n\n    #endif\n\n    #ifdef __cplusplus\n    }\n    #endif\n\n#endif\n\n'})}),"\n",(0,t.jsxs)(S.p,{children:["\u0410\u0432\u0442\u043e\u0440: ",(0,t.jsx)(S.strong,{children:"NTROPY"}),"\n12.05.2010 17:25"]})]})}function o(n={}){const{wrapper:S}={...(0,_.R)(),...n.components};return S?(0,t.jsx)(S,{...n,children:(0,t.jsx)(s,{...n})}):s(n)}},8453:(n,S,e)=>{e.d(S,{R:()=>P,x:()=>i});var a=e(6540);const t={},_=a.createContext(t);function P(n){const S=a.useContext(_);return a.useMemo((function(){return"function"==typeof n?n(S):{...S,...n}}),[S,n])}function i(n){let S;return S=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:P(n.components),a.createElement(_.Provider,{value:S},n.children)}}}]);