<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <link id="favicon" rel="icon" type="image/x-icon" href="../res/favicon.ico" />
    <link type="text/css" rel="stylesheet" href="../res/css/easy.library.css" />
    <title>QSP: Как сделать?</title>
</head>
    
<body>
    <div class="avs-page-wrapper">
        <div class="easy-lib-page">
            <h1 class="avs-article-h1">Онлайн-справочник по самым часто задаваемым вопросам из темы "<a href="https://qsp.org/index.php?option=com_agora&task=topic&id=40&Itemid=57">Как сделать?</a>" на форуме <a href="https://qsp.org/index.php?option=com_agora&Itemid=57" title="перейти на форум" target="_blank">QSP.su</a></h1>
            <!-- body start -->
<div class="avs-pages-button__wrapper"><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/pages/kak_zatsiklit__melodiju_0034.html" class="avs-pages-button__link">&lt; Назад, к странице 35</a></div><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/pages/kak_delat__giperssylki_0036.html" class="avs-pages-button__link">Вперёд, к странице 37 &gt;</a></div></div>
<h3 id="faq_06_07" class="avs-article-h3">6.7. Как сделать плейлист?</h3><p>
Прежде, чем приступить к прочтению данной статьи, ознакомьтесь со статьёй <a href="https://aleksversus.github.io/howdo_faq/pages/kak_zatsiklit__melodiju_0034.html#faq_06_06" style="text-decoration:none;" class="avs-page-external-link">"Как зациклить мелодию?"</a>.
</p>
<p>
Если вы поняли, как зациклить одну мелодию, а то и как зациклить мелодию для проигрывания на отдельной локации, то смело переходите к следующим примерам и решениям.
</p>
<p>
Плейлист, как правило, представляет из себя список проигрываемых файлов в том порядке, в котором эти файлы должны проигрываться.
</p>
<p>
Мы рассмотрим случай, когда четыре файла должны проигрываться друг за другом в непрерывном порядке. И тут у нас есть несколько вариантов решения поставленной задачи.
</p>
<h4 id="variant-pervyj-fajly-poimenovany-poocheriodno" class="avs-article-h4">Вариант первый. Файлы поименованы поочерёдно</h4><p>
Имена файлов могут представлять собой числа, или включать в себя числа от одного до другого по порядку. В этом случае, нам не нужно сохранять полные имена файлов в памяти, достаточно лишь следить за порядковым номером. Например, у нас есть файлы с такимим именами:
</p>
<p>
`music_1.mp3`
</p>
<p>
`music_2.mp3`
</p>
<p>
`music_3.mp3`
</p>
<p>
`music_4.mp3`
</p>
<p>
Как видите в названиях этих файлов отличается только одно число, и все числа идут по порядку. Поэтому для организации плейлиста мы можем использовать всего две числовые переменные.
</p>
<p>
На самой первой локации в игре обозначаем номер первой проигрываемой композиции, общее число файлов, и в системную переменную `$counter` прописываем название локации-счётчика.
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator"></span><span class="Monokai-Comment">!&nbsp;#&nbsp;start</span><br/>
<span class="Monokai-Koperator">if</span>&nbsp;filescount<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">0</span><span class="Monokai-Operator">:</span><span class="Monokai-Operator"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;если&nbsp;ни&nbsp;в&nbsp;одной&nbsp;из&nbsp;переменных&nbsp;не&nbsp;записано&nbsp;значение</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;filescount<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">4</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;общее&nbsp;число&nbsp;проигрываемых&nbsp;файлов&nbsp;4</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;current_file<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;номер&nbsp;файла,&nbsp;с&nbsp;которого&nbsp;хотим&nbsp;начать,&nbsp;1.&nbsp;т.е.&nbsp;это&nbsp;будет&nbsp;файл&nbsp;с&nbsp;именем&nbsp;music_1.mp3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">play</span>&nbsp;<span class="Monokai-String">'music_&lt;&lt;current_file&gt;&gt;.mp3'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;запускаем&nbsp;проигрывание&nbsp;файла&nbsp;с&nbsp;указанным&nbsp;номером</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-SysVar">$counter</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'Counter'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;локация-счётчик&nbsp;так&nbsp;и&nbsp;будет&nbsp;называться&nbsp;Counter</span><br/>
<span class="Monokai-Koperator">end</span><br/>
</div>
<p>
Теперь на локации-счётчике пишем такой код:
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator"></span><span class="Monokai-Comment">!&nbsp;#&nbsp;Counter</span><br/>
<span class="Monokai-Koperator">if</span>&nbsp;<span class="Monokai-Func">no</span>&nbsp;<span class="Monokai-Func">isplay</span><span class="Monokai-Operator">(</span><span class="Monokai-String">'music_&lt;&lt;current_file&gt;&gt;.mp3'</span><span class="Monokai-Operator">)</span><span class="Monokai-Operator">:</span><span class="Monokai-Operator"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;если&nbsp;текущий&nbsp;файл&nbsp;больше&nbsp;не&nbsp;проигрывается</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;current_file<span class="Monokai-Operator">+=</span><span class="Monokai-Numeric">1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;увеличиваем&nbsp;номер&nbsp;на&nbsp;единицу</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">if</span>&nbsp;current_file<span class="Monokai-Operator">&gt;</span>filescount<span class="Monokai-Operator">:</span><span class="Monokai-Operator"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;если&nbsp;получившийся&nbsp;номер&nbsp;больше&nbsp;количества&nbsp;файлов</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current_file<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;возвращаем&nbsp;номер&nbsp;самого&nbsp;первого&nbsp;файла</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">play</span>&nbsp;<span class="Monokai-String">'music_&lt;&lt;current_file&gt;&gt;.mp3'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;запускаем&nbsp;проигрывание&nbsp;файла&nbsp;с&nbsp;указанным&nbsp;номером</span><br/>
<span class="Monokai-Koperator">end</span><br/>
</div>
<p>
Вот и всё. Наш непрерывный плейлист готов.
</p>
<p>
При заранее поименованных файлах вам понадобится небольшое количество переменных и кода. Например, вы можете отдельно поименовать файлы, которые необходимо проигрывать на разных локациях, и тогда станет возможным запускать на разных локациях разные плейлисты, используя только одну дополнительную переменную.
</p>
<p>
Например, наши файлы называются так:
</p>
<p>
`комната_1.mp3`
</p>
<p>
`комната_2.mp3`
</p>
<p>
`комната_3.mp3`
</p>
<p>
`коридор_1.mp3`
</p>
<p>
`коридор_2.mp3`
</p>
<p>
`коридор_3.mp3`
</p>
<p>
`коридор_4.mp3`
</p>
<p>
Тогда код может выглядеть так:
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator"></span><span class="Monokai-Comment">!&nbsp;#&nbsp;Counter</span><br/>
<span class="Monokai-Koperator">if</span>&nbsp;<span class="Monokai-Func">$curloc</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'комната'</span>&nbsp;<span class="Monokai-Func">and</span>&nbsp;$loc_theme<span class="Monokai-Operator">&lt;</span><span class="Monokai-Operator">&gt;</span><span class="Monokai-String">'комната'</span><span class="Monokai-Operator">:</span><span class="Monokai-Operator"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;если&nbsp;мы&nbsp;оказались&nbsp;на&nbsp;локации&nbsp;комната,&nbsp;но&nbsp;выставлена&nbsp;не&nbsp;тема&nbsp;комнаты</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">close</span>&nbsp;<span class="Monokai-String">'&lt;&lt;$loc_theme&gt;&gt;_&lt;&lt;current_file&gt;&gt;.mp3'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;закрываем&nbsp;то,&nbsp;что&nbsp;сейчас&nbsp;проигрывается</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;$loc_theme<span class="Monokai-Operator">=</span><span class="Monokai-String">'комната'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;вносим&nbsp;в&nbsp;переменную&nbsp;$loc_theme&nbsp;слово&nbsp;комната</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;current_file<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;выставляем&nbsp;номер&nbsp;файла,&nbsp;с&nbsp;которого&nbsp;нужно&nbsp;стартовать</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;filescount<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">3</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;для&nbsp;комнаты&nbsp;в&nbsp;плелисте&nbsp;будет&nbsp;только&nbsp;три&nbsp;файла,&nbsp;поэтом&nbsp;указываем&nbsp;число&nbsp;файлов&nbsp;3</span><br/>
<span class="Monokai-Koperator">end</span><br/>
<span class="Monokai-Koperator">if</span>&nbsp;<span class="Monokai-Func">$curloc</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'коридор'</span>&nbsp;<span class="Monokai-Func">and</span>&nbsp;$loc_theme<span class="Monokai-Operator">&lt;</span><span class="Monokai-Operator">&gt;</span><span class="Monokai-String">'коридор'</span><span class="Monokai-Operator">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">close</span>&nbsp;<span class="Monokai-String">'&lt;&lt;$loc_theme&gt;&gt;_&lt;&lt;current_file&gt;&gt;.mp3'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;$loc_theme<span class="Monokai-Operator">=</span><span class="Monokai-String">'коридор'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;current_file<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;filescount<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">4</span><br/>
<span class="Monokai-Koperator">end</span><br/>
<span class="Monokai-Koperator">if</span>&nbsp;<span class="Monokai-Func">no</span>&nbsp;<span class="Monokai-Func">isplay</span><span class="Monokai-Operator">(</span><span class="Monokai-String">'&lt;&lt;$loc_theme&gt;&gt;_&lt;&lt;current_file&gt;&gt;.mp3'</span><span class="Monokai-Operator">)</span><span class="Monokai-Operator">:</span><span class="Monokai-Operator"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;если&nbsp;текущий&nbsp;файл&nbsp;больше&nbsp;не&nbsp;проигрывается</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;current_file<span class="Monokai-Operator">+=</span><span class="Monokai-Numeric">1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;увеличиваем&nbsp;номер&nbsp;на&nbsp;единицу</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">if</span>&nbsp;current_file<span class="Monokai-Operator">&gt;</span>filescount<span class="Monokai-Operator">:</span><span class="Monokai-Operator"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;если&nbsp;получившийся&nbsp;номер&nbsp;больше&nbsp;количества&nbsp;файлов</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current_file<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">1</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;возвращаем&nbsp;номер&nbsp;самого&nbsp;первого&nbsp;файла</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">play</span>&nbsp;<span class="Monokai-String">'&lt;&lt;$loc_theme&gt;&gt;_&lt;&lt;current_file&gt;&gt;.mp3'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;запускаем&nbsp;проигрывание&nbsp;файла&nbsp;с&nbsp;указанным&nbsp;номером</span><br/>
<span class="Monokai-Koperator">end</span><br/>
</div>
<p>
У такого подхода есть один недостаток. Мы не можем использовать произвольные имена файлов для организации плейлиста, а ведь нам может потребоваться такой вариант, если файлы разбросаны по нескольким папкам. В этом случае нам потребуется следующий вариант.
</p>
<h4 id="variant-vtoroj-plejlist-s-proizvol_nymi-imenami-fajlov" class="avs-article-h4">Вариант второй. Плейлист с произвольными именами файлов</h4><p>
Данный способ предусматривает использование лишь одной переменной, однако для его реализации потребуется написать гораздо больше кода. Например, у нас есть такие файлы:
</p>
<p>
`amb/zoo.mp3`
</p>
<p>
`amb/monkey.mp3`
</p>
<p>
`zoo/buss.mp3`
</p>
<p>
`texlab/drillmusic.mp3`
</p>
<p>
На локации-счётчике мы будем проверять, проигрывается ли мелодия, записанная в переменную `$music`, и если мелодия уже не проигрывается, то запускать следующую.
</p>
<p>
Поскольку на начало игры у нас не проигрывается ни одна мелодия, в первый раз нам нужно проверять не проигрывается ли последняя из списка, и тогда автоматически у нас запустится первая То есть на самой первой в игре локации мы записываем в переменную `$music` самую последнюю мелодию из списка, а так же в переменную `$counter` помещаем название локации-счётчика.
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator"></span><span class="Monokai-Comment">!&nbsp;#&nbsp;start</span><br/>
$music<span class="Monokai-Operator">=</span><span class="Monokai-String">'texlab/drillmusic.mp3'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;добавили&nbsp;в&nbsp;переменную&nbsp;music&nbsp;самую&nbsp;последнюю&nbsp;проигрываемую&nbsp;мелодию</span><br/>
<span class="Monokai-SysVar">$counter</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'Counter'</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;в&nbsp;системную&nbsp;переменную&nbsp;прописали&nbsp;название&nbsp;локации-счётчика&nbsp;Counter</span><br/>
</div>
<p>
Осталось на локации-счётчике прописать код нашего плейлиста.
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator"></span><span class="Monokai-Comment">!&nbsp;#&nbsp;Counter</span><br/>
<span class="Monokai-Koperator">if</span>&nbsp;<span class="Monokai-Func">no</span>&nbsp;<span class="Monokai-Func">isplay</span><span class="Monokai-Operator">(</span>$music<span class="Monokai-Operator">)</span><span class="Monokai-Operator">:</span><span class="Monokai-Operator"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;если&nbsp;мелодия,&nbsp;записанная&nbsp;в&nbsp;music&nbsp;не&nbsp;проигрывается</span><span class="Monokai-Operator"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;с&nbsp;помощью&nbsp;сложного&nbsp;условия&nbsp;переключаем&nbsp;мелодию&nbsp;на&nbsp;следующую</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">if</span>&nbsp;$music<span class="Monokai-Operator">=</span><span class="Monokai-String">'amb/zoo.mp'</span><span class="Monokai-Operator">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$music<span class="Monokai-Operator">=</span><span class="Monokai-String">'amb/monkey.mp3'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">elseif</span>&nbsp;$music<span class="Monokai-Operator">=</span><span class="Monokai-String">'amb/monkey.mp3'</span><span class="Monokai-Operator">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$music<span class="Monokai-Operator">=</span><span class="Monokai-String">'zoo/buss.mp3'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">elseif</span>&nbsp;$music<span class="Monokai-Operator">=</span><span class="Monokai-String">'zoo/buss.mp3'</span><span class="Monokai-Operator">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$music<span class="Monokai-Operator">=</span><span class="Monokai-String">'texlab/drillmusic.mp3'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">elseif</span>&nbsp;$music<span class="Monokai-Operator">=</span><span class="Monokai-String">'texlab/drillmusic.mp3'</span><span class="Monokai-Operator">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$music<span class="Monokai-Operator">=</span><span class="Monokai-String">'amb/zoo.mp3'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">play</span>&nbsp;$music<br/>
<span class="Monokai-Koperator">end</span><br/>
</div>
<p>
По сравнению с первым вариантом кода стало вдвое больше, и соответственно в нём легче запутаться. Однако мы используем всего одну переменную и можем работать с произвольными именами файлов.
</p>
<p>
Разбирать вариант с разными плейлистами для разных локаций не будем. Код получится достаточно громоздким, и нам потребуется ещё одна переменная, чтобы отличать, какой плейлист сейчас проигрывается. Тем не менее такой вариант, если он вам удобен, вполне имеет право на существование.
</p>
<h4 id="tretij-variant-plejlist-v-massive" class="avs-article-h4">Третий вариант. Плейлист в массиве</h4><p>
Этот вариант по сути объединяет два предыдущих варианта. Здесь мы можем использовать произвольные имена файлов, как во втором варианте, но производить переключение на следующий трек, просто зная номер проигрываемого трека.
</p>
<p>
Единственным недостатком этого варианта можно посчитать то, что пути ко все проигрываемым файлам заносятся в массив и остаются в нём на протяжении всей игры, что нагружает память. Однако, этот недостаток сложно счесть недостатком, ведь чтобы забить даже 100 мегабайт оперативной памяти таким образом вам понадобятся либо ооочень длинные пути, либо оооочень много этих самых путей.
</p>
<p>
Итак, на самой первой локации в игре мы формируем массив с именами файлов для нашего плейлиста, выставляем номер трека, с которого хотим запустить воспроизведение, и не забываем про локацию-счётчик, название которой нам нужно прописать в переменную `$counter`:
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator"></span><span class="Monokai-Comment">!&nbsp;#&nbsp;start</span><br/>
<span class="Monokai-Koperator">if</span>&nbsp;<span class="Monokai-Func">arrsize</span><span class="Monokai-Operator">(</span><span class="Monokai-String">'$playlist'</span><span class="Monokai-Operator">)</span><span class="Monokai-Operator">=</span><span class="Monokai-Numeric">0</span><span class="Monokai-Operator">:</span><span class="Monokai-Operator"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;если&nbsp;массив&nbsp;с&nbsp;путями&nbsp;к&nbsp;проигрываемым&nbsp;файлам&nbsp;ещё&nbsp;не&nbsp;создан</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;$<span class="Monokai-Operator">play</span>list<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">0</span><span class="Monokai-Operator">]</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'amb/zoo.mp3'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;$<span class="Monokai-Operator">play</span>list<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">1</span><span class="Monokai-Operator">]</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'amb/monkey.mp3'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;$<span class="Monokai-Operator">play</span>list<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">2</span><span class="Monokai-Operator">]</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'zoo/buss.mp3'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;$<span class="Monokai-Operator">play</span>list<span class="Monokai-Operator">[</span><span class="Monokai-Numeric">3</span><span class="Monokai-Operator">]</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'texlab/drillmusic.mp3'</span><span class="Monokai-Operator"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;ячейки&nbsp;массива&nbsp;нумеруются&nbsp;по&nbsp;порядку,&nbsp;это&nbsp;очень&nbsp;удобно</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;current_file<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">0</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;в&nbsp;данную&nbsp;переменную&nbsp;вносим&nbsp;номер&nbsp;ячейки&nbsp;с&nbsp;названием&nbsp;того&nbsp;трека,&nbsp;который&nbsp;хотим&nbsp;запустить,&nbsp;и...</span><span class="Monokai-Operator"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;...запускаем&nbsp;трек:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">play</span>&nbsp;$playlist<span class="Monokai-Operator">[</span>current_file<span class="Monokai-Operator">]</span><span class="Monokai-Operator"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;системной&nbsp;переменной&nbsp;$counter&nbsp;присваиваем&nbsp;название&nbsp;локации-счётчика</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-SysVar">$counter</span><span class="Monokai-Operator">=</span><span class="Monokai-String">'Counter'</span><br/>
<span class="Monokai-Koperator">end</span><br/>
</div>
<p>
Нам осталось на локации-счётчике написать код, похожий на код из первого варианта:
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator"></span><span class="Monokai-Comment">!&nbsp;#&nbsp;Counter</span><br/>
<span class="Monokai-Koperator">if</span>&nbsp;<span class="Monokai-Func">no</span>&nbsp;<span class="Monokai-Func">isplay</span><span class="Monokai-Operator">(</span>$<span class="Monokai-Operator">play</span>list<span class="Monokai-Operator">[</span>current_file<span class="Monokai-Operator">]</span><span class="Monokai-Operator">)</span><span class="Monokai-Operator">:</span><span class="Monokai-Operator"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;если&nbsp;мелодия&nbsp;больше&nbsp;не&nbsp;проигрывается</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;current_file<span class="Monokai-Operator">+=</span><span class="Monokai-Numeric">1</span>&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;увеличиваем&nbsp;номер&nbsp;трека&nbsp;на&nbsp;единицу</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">if</span>&nbsp;current_file<span class="Monokai-Operator">=</span><span class="Monokai-Func">arrsize</span><span class="Monokai-Operator">(</span><span class="Monokai-String">'$playlist'</span><span class="Monokai-Operator">)</span><span class="Monokai-Operator">:</span><span class="Monokai-Operator"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;если&nbsp;полученый&nbsp;номер&nbsp;совпадает&nbsp;с&nbsp;размером&nbsp;массива</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current_file<span class="Monokai-Operator">=</span><span class="Monokai-Numeric">0</span>&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;пора&nbsp;снова&nbsp;воспроизводить&nbsp;трек&nbsp;с&nbsp;номером&nbsp;0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">play</span>&nbsp;$playlist<span class="Monokai-Operator">[</span>current_file<span class="Monokai-Operator">]</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">&amp;&nbsp;</span><span class="Monokai-Comment">!&nbsp;воспроизводим&nbsp;указанный&nbsp;трек</span><br/>
<span class="Monokai-Koperator">end</span><br/>
</div>
<h4 id="zakliuchenie" class="avs-article-h4">Заключение</h4><p>
Как видите, последний вариант практически лишён недостатков первых двух вариантов. Использование массива в данном случае сильно упрощает как написание, так и чтение кода. Если развить этот вариант и дальше, чтобы добиться работы разных плейлистов на разных локациях, то можно прийти к решению, которое предложил `Werewolf` в своём <a href="https://qsp.org/index.php?option=com_content&amp;view=article&amp;id=79:-10&amp;catid=36:2009-02-19-06-11-21&amp;Itemid=76" style="text-decoration:none;" class="avs-page-external-link">Гибком плейлисте</a>. Если решили разрабатывать собственную систему управления музыкой в игре, ознакомьтесь с наработками `Werewolf`а. Вполне возможно, все ваши задумки уже реализованы в удобной и лаконичной системе.
</p>
<div class="avs-pages-button__wrapper"><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/pages/kak_zatsiklit__melodiju_0034.html" class="avs-pages-button__link">&lt; Назад, к странице 35</a></div><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/pages/kak_delat__giperssylki_0036.html" class="avs-pages-button__link">Вперёд, к странице 37 &gt;</a></div></div>
<!-- body end -->
            </article>
            <aside class="e-block">
                <div class="avs-page-stamp">
                    <p class="empty">Aleks Versus'HowDo-F.A.Q.'2021-<span class="subscribe-year">2022</span></p>
                    <p class="empty">Aleks Versus'Game Adventure Making'Really Unimaginable Stories'2013-<span class="subscribe-year">2022</span></p>
                </div>
            </aside>
            <aside class="em-btn">
                <div class="avs-pages-button__wrapper e-block">
                    <div class="avs-pages-button">
                        <a href="https://aleksversus.github.io/howdo_faq/" class="avs-pages-button__link">Главная</a>
                    </div>
                    <div class="avs-pages-button">
                        <a href="#"  class="avs-pages-button__link" id="section-content-open">Содержание</a>
                    </div>
                </div>
            </aside>
        </div><!-- easy-lib-page -->
    </div><!-- avs-page-wrapper -->
    <aside id="soderzhanije_outer">
        <div class="soderzhanije">
<header-header></header-header>
        </div>
    </aside>
    <script type="text/javascript" src="../res/js/text_replace.js"></script>
    <script type="text/javascript" src="../res/js/soderzhanie.js" ></script>
</body>
</html>
