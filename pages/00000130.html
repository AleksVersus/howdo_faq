<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link id="favicon" rel="icon" type="image/x-icon" href="./res/favicon.ico" />
    <link type="text/css" rel="stylesheet" href="../res/css/easy.library.css" />
    <link type="text/css" rel="stylesheet" href="../res/css/offline.window.css" />
    <link type="text/css" rel="stylesheet" href="../res/css/qsp_code.css" />
    <title>QSP: Как сделать?</title>
</head>
<body>
    
    <div class="em_AROUND">
        <h1>Онлайн-справочник по самым часто задаваемым вопросам из темы "<a href="http://qsp.su/index.php?option=com_agora&task=topic&id=40&Itemid=57">Как сделать?</a>" на форуме <a href="http://qsp.su/index.php?option=com_agora&Itemid=57" title="перейти на форум" target="_blank">QSP.su</a></h1>
        <!-- body start -->
<a id="тKYг"></a><h2>19. Изыски</h2><a id="faq_19_09"></a><h3>19.9. Как обновлять переменные на экране?</h3><p>
В: Как обновлять переменные на экране?

</p>
<p>
О:

</p>
<p>
Очень частый вопрос, который происходит от непонимания того, в каком порядке плеер выполняет код.

</p>
<p>
Например, автор пишет вывод здоровья в окне дополнительного описания так:

</p>
<div class="Monokai-Code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">pl</span>&nbsp;<span class="Monokai-String">"Ваше&nbsp;здоровье&nbsp;<<health>>/100"</span><br>


</div>
<p>
Переменная <span class="em_BLCK">health</span> в данном случае показывает уровень здоровья главного героя. Далее автор меняет значение переменной

</p>
<div class="Monokai-Code">
&nbsp;&nbsp;&nbsp;&nbsp;health<span class="Monokai-Operator">=</span>health<span class="Monokai-Operator">+</span><span class="Monokai-Numeric">20</span><br>


</div>
<p>
И ожидает, что и на экране значение изменится, но в окне дополнительного описания изменения не происходят.

</p>
<p>
А всё дело в том, что плеер выполняет команды последовательно, а кроме выполнения команд ничего иного делать не умеет.

</p>
<p>
Когда плеер выполняет команду

</p>
<div class="Monokai-Code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">pl</span>&nbsp;<span class="Monokai-String">"Ваше&nbsp;здоровье&nbsp;<<health>>/100"</span><br>


</div>
<p>
Происходит следующее:

</p>
<ol>
<li>
Плеер видит оператор <span class="em_BLCK"><span class="emOPRT">pl</span></span> и понимает, что ему нужно вывести некий текст в окно дополнительного описания. Данный текст плееру передан в виде конкретного значения, однако в этом значении присутствует подвыражение "&lt;&lt;health&gt;&gt;" (так же оно называется вложенным выражением).
</li>
<li>
Плеер "раскрывает" подвыражение. То есть вычисляет его значение и подставляет это значение вместо подвыражения в строку. Например, если значение переменной <span class="em_BLCK">health</span> в этот момент было равно 50, плеер подставит число 50 вместо подвыражения, и теперь команда будет для него выглядеть так:
</li>
</ol>
<div class="Monokai-Code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">pl</span>&nbsp;<span class="Monokai-String">"Ваше&nbsp;здоровье&nbsp;50/100"</span><br>


</div>
<ol>
<li>
Строка передаётся оператору <span class="em_BLCK"><span class="emOPRT">pl</span></span>, и оператор <span class="em_BLCK"><span class="emOPRT">pl</span></span> выводит строку в окно дополнительного описания, что собственно и видит игрок.
</li>
</ol>
<p>
Что же происходит, когда выполняется команда

</p>
<div class="Monokai-Code">
&nbsp;&nbsp;&nbsp;&nbsp;health<span class="Monokai-Operator">=</span>health<span class="Monokai-Operator">+</span><span class="Monokai-Numeric">20</span><br>


</div>
<p>
А вот что. Плеер вычисляет значение выражения <span class="em_BLCK">health+20</span>, подставляя значение переменной <span class="em_BLCK">health</span> (равно 50), и получает конкретное значение (50+20 равно 70), и уже это конкретное значение возвращает переменной <span class="em_BLCK">health</span> (теперь в переменной <span class="em_BLCK">health</span> значение 70). И всё. Здесь нет указания плееру "обновить" значение на экране. Только вычислить.

</p>
<p>
Чтобы значение в окне дополнительного описания "обновилось", нужно:

</p>
<ol>
<li>
Стереть старое значение в окне дополнительного описания
</li>
<li>
Вывести новое значение в окне дополнительного описания
</li>
</ol>
<p>
Простой код для этого:

</p>
<div class="Monokai-Code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Comment">!&nbsp;меняем&nbsp;значение&nbsp;переменной</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;health<span class="Monokai-Operator">=</span>health<span class="Monokai-Operator">+</span><span class="Monokai-Numeric">20</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Comment">!&nbsp;стираем&nbsp;весь&nbsp;текст&nbsp;из&nbsp;окна&nbsp;доп.описания</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">clr</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Comment">!&nbsp;выводим&nbsp;новый&nbsp;текст&nbsp;на&nbsp;экран</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">pl</span>&nbsp;<span class="Monokai-String">"Ваше&nbsp;здоровье&nbsp;<<health>>/100"</span><br>


</div>
<p>
Таким образом всякий раз, изменив значение переменной, вам нужно повторно вывести его на экран, чтобы игрок увидел "обновление" этого значения.

</p>
        <!-- body end -->
        <div class="em_Epigraph">
            <div class="em_subText">
                <p>Aleks Versus'HowDo-F.A.Q.'2013-2021</p>
                <p>Aleks Versus'Game Adventure Making'Really Unimaginable Stories'2013-<span id="date_stamp">2021</span></p>
            </div>
        </div>
    </div>

</body>
</html>
