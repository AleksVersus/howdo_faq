<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <link id="favicon" rel="icon" type="image/x-icon" href="../res/favicon.ico" />
    <link type="text/css" rel="stylesheet" href="../res/css/easy.library.css" />
    <title>QSP: Как сделать?</title>
</head>
    
<body>
    <div class="avs-page-wrapper">
        <div class="easy-lib-page">
            <h1 class="avs-article-h1">Онлайн-справочник по самым часто задаваемым вопросам из темы "<a href="https://qsp.org/index.php?option=com_agora&task=topic&id=40&Itemid=57">Как сделать?</a>" на форуме <a href="https://qsp.org/index.php?option=com_agora&Itemid=57" title="перейти на форум" target="_blank">QSP.su</a></h1>
            <!-- body start -->
<div class="avs-pages-button__wrapper"><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/pages/kak_izmenit__tsvet_giperssylok_0037.html" class="avs-pages-button__link">&lt; Назад, к странице 38</a></div><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/pages/kak_sdelat__ssylki_bez_podchiorkivanija_0039.html" class="avs-pages-button__link">Вперёд, к странице 40 &gt;</a></div></div>
<h3 id="faq_07_03" class="avs-article-h3">7.3. Как помещать в гиперссылки сложный код?</h3><p>
В: Как помещать в гиперссылки сложный код?
</p>
<p>
О:
</p>
<p>
Большой кусок кода в гиперссылке будет трудно читать, к тому же это грозит ошибками. Некоторые плееры, работающие с бразуерным html-рендером, могут криво обрабатывать многострочный код в гиперссылках. Поэтому лучше избегать больших объёмов кода непосредственно в самих гиперссылках. Однако есть два решения, которые позволяют выполнять сколь угодно сложный код при щелчке по ссылке.
</p>
<p>
Например, мы делаем покупку предметов через гиперссылки:
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator">*</span><span class="Monokai-Operator">pl</span>&nbsp;<span class="Monokai-String">"&lt;a&nbsp;href='exec:&nbsp;'&gt;Купить&nbsp;кружку&nbsp;имбирного&nbsp;эля&lt;/a&gt;"</span><br/>
</div>
<p>
И нам нужно, чтобы при щелчке по ссылке выполнялся такой вот код:
</p>
<div class="Monokai-Code">
<span class="Monokai-Koperator">if</span>&nbsp;<span class="Monokai-Func">no</span>&nbsp;деньги<span class="Monokai-Operator">&lt;</span><span class="Monokai-Numeric">100</span><span class="Monokai-Operator">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">addobj</span>&nbsp;<span class="Monokai-String">'Кружка&nbsp;имбирного&nbsp;эля'</span>&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;кружка_эля<span class="Monokai-Operator">+=</span><span class="Monokai-Numeric">1</span>&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;деньги<span class="Monokai-Operator">-=</span><span class="Monokai-Numeric">100</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">*</span><span class="Monokai-Operator">pl</span>&nbsp;<span class="Monokai-String">"Я&nbsp;приобрёл&nbsp;куржку&nbsp;имбирного&nbsp;эля."</span><br/>
<span class="Monokai-Koperator">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">*</span><span class="Monokai-Operator">pl</span>&nbsp;<span class="Monokai-String">"Мне&nbsp;не&nbsp;хватает&nbsp;денег&nbsp;на&nbsp;эль."</span><br/>
<span class="Monokai-Koperator">end</span><br/>
</div>
<ol>
<li><p>
Чтобы не совать весь код в гиперссылку, мы можем создать отдельную локацию, назвав её, например "купить_эль", разместить код в этой локации, а затем просто вызывать локацию из гиперссылки по `gosub`:</p>
<div class="Monokai-Code">
<span class="Monokai-Operator">*</span><span class="Monokai-Operator">pl</span>&nbsp;<span class="Monokai-String">"&lt;a&nbsp;href='exec:gosub&nbsp;"</span><span class="Monokai-String">"купить_эль"</span><span class="Monokai-String">"'&gt;Купить&nbsp;кружку&nbsp;имбирного&nbsp;эля&lt;/a&gt;"</span><br/>
</div>
</li>
<li><p>
Можно не создавать отдельную локацию под кусок кода, а выделить для него отдельную переменную. То есть, поместим наш код в текстовую переменную:</p>
<div class="Monokai-Code">
$code<span class="Monokai-Operator">=</span><span class="Monokai-Operator">{</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">if</span>&nbsp;<span class="Monokai-Func">no</span>&nbsp;деньги<span class="Monokai-Operator">&lt;</span><span class="Monokai-Numeric">100</span><span class="Monokai-Operator">:</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">addobj</span>&nbsp;<span class="Monokai-String">'Кружка&nbsp;имбирного&nbsp;эля'</span>&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;кружка_эля<span class="Monokai-Operator">+=</span><span class="Monokai-Numeric">1</span>&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;деньги<span class="Monokai-Operator">-=</span><span class="Monokai-Numeric">100</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">*</span><span class="Monokai-Operator">pl</span>&nbsp;<span class="Monokai-String">"Я&nbsp;приобрёл&nbsp;куржку&nbsp;имбирного&nbsp;эля."</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Operator">*</span><span class="Monokai-Operator">pl</span>&nbsp;<span class="Monokai-String">"Мне&nbsp;не&nbsp;хватает&nbsp;денег&nbsp;на&nbsp;эль."</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="Monokai-Koperator">end</span><br/>
<span class="Monokai-Operator">}</span><br/>
</div>
</li>
</ol>
<p>
Теперь этот код можно будет выполнить в любой момент, используя оператор `dynamic`:
</p>
<div class="Monokai-Code">
<span class="Monokai-Operator">*</span><span class="Monokai-Operator">pl</span>&nbsp;<span class="Monokai-String">"&lt;a&nbsp;href='exec:dynamic&nbsp;$code'&gt;Купить&nbsp;кружку&nbsp;имбирного&nbsp;эля&lt;/a&gt;"</span><br/>
</div>
<p>
Как видите, первый способ требует написания отдельной локации, а так же мы всё ещё можем неверно закрыть кавычки, прописывая команду для вызова этой локации. Во втором варианте этот риск минимален, однако нам приходится выделять для размещения кода переменную, которую нельзя уничтожать, пока игрок не щёлкнет по гиперссылке.
</p>
<div class="avs-pages-button__wrapper"><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/pages/kak_izmenit__tsvet_giperssylok_0037.html" class="avs-pages-button__link">&lt; Назад, к странице 38</a></div><div class="avs-pages-button"><a href="https://aleksversus.github.io/howdo_faq/pages/kak_sdelat__ssylki_bez_podchiorkivanija_0039.html" class="avs-pages-button__link">Вперёд, к странице 40 &gt;</a></div></div>
<!-- body end -->
            </article>
            <aside class="e-block">
                <div class="avs-page-stamp">
                    <p class="empty">Aleks Versus'HowDo-F.A.Q.'2021-<span class="subscribe-year">2022</span></p>
                    <p class="empty">Aleks Versus'Game Adventure Making'Really Unimaginable Stories'2013-<span class="subscribe-year">2022</span></p>
                </div>
            </aside>
            <aside class="em-btn">
                <div class="avs-pages-button__wrapper e-block">
                    <div class="avs-pages-button">
                        <a href="https://aleksversus.github.io/howdo_faq/" class="avs-pages-button__link">Главная</a>
                    </div>
                    <div class="avs-pages-button">
                        <a href="#"  class="avs-pages-button__link" id="section-content-open">Содержание</a>
                    </div>
                </div>
            </aside>
        </div><!-- easy-lib-page -->
    </div><!-- avs-page-wrapper -->
    <aside id="soderzhanije_outer">
        <div class="soderzhanije">
<header-header></header-header>
        </div>
    </aside>
    <script type="text/javascript" src="../res/js/text_replace.js"></script>
    <script type="text/javascript" src="../res/js/soderzhanie.js" ></script>
</body>
</html>
